"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[587],{9171:function(e,t,o){o.d(t,{D:function(){return n}});var r=o(55402),a=o(95050),s=o(67294);let i=[["#ffbe0b","#fb5607","#ff006e","#8338ec","#3a86ff"],["#9b5de5","#f15bb5","#fee440","#00bbf9","#00f5d4"]],l=()=>{let e=i.length;return i[Math.min(e-1,Math.floor(Math.random()*e))]},n=()=>{let e=s.useRef(!1),t=s.useRef(null);s.useEffect(()=>(t.current=new a.Z,()=>{t.current=null}),[]);let o=(0,r.$0)(async()=>{if(null==t.current)return;let o=t.current,r=l(),a=window.screen.width<=900;e.current=!0;try{await o.addConfetti({confettiColors:r,confettiRadius:a?4:8,confettiNumber:a?100:300})}finally{e.current=!1}});return o}},34781:function(e,t,o){o.d(t,{p:function(){return l},X:function(){return a}}),(r=a||(a={}))[r.PENDING=1]="PENDING",r[r.RUNNING=2]="RUNNING",r[r.PAUSED=4]="PAUSED",r[r.END=8]="END";var r,a,s=o(76955),i=o(15658);class l extends s.jz{constructor(e){super();let t=new s.ZM(e.status),o=new s.ZM(e.elapsedTime),r=Date.now(),l=(e,t)=>{let s=Date.now();if(t===a.RUNNING){let e=s-r;o.setState(t=>t+e)}else e===a.PENDING&&o.setState(0);r=s};t.subscribe({next:(e,t)=>l(e,t),complete:()=>{}});let n=(0,i.iP)(()=>{let e=t.getSnapshot();l(e,e)});this.status$=t,this.elapsedTime$=o,this._disposables.push(new s.JT(n))}}},21587:function(e,t,o){o.d(t,{vk:function(){return G},oh:function(){return d},tR:function(){return eA},aK:function(){return eH},ZP:function(){return eV},vD:function(){return T},eK:function(){return R}});var r,a,s,i,l,n,d,c,u,p,h=o(85893),m=o(45697),B=o.n(m),S=o(67294),f=o(60459),g=o(55402),x=o(59976),C=o(15658),v=o(45684),b=o(13339);let k="2023-06-06";(r=n||(n={})).ERASE="ERASE",r.HINT="HINT",r.WRITE="WRITE",(a=d||(d={})).RESTART="RESTART",a.RESET="RESET",a.START="START",a.PAUSE="PAUSE",a.RESUME="RESUME",a.ACTIVE="ACTIVE",a.HINT="HINT",a.TOGGLE_CHEAT="TOGGLE_CHEAT",a.INPUT="INPUT";let y=S.createContext(null);y.displayName="SudokuContextType";let T=()=>{let e=S.useContext(y);return e.dispatch},R=e=>{let t=S.useContext(y),o=e(t);return(0,x.vc)(o)};var $=o(43118),N=o(34781);let E={},z={},_=e=>{let t=z[e];return void 0===t&&(t=new $.$X(e),z[e]=t),t},D=e=>{let t=E[e];return void 0===t&&(t=new $.wY({childMatrixWidth:e}),E[e]=t),t};function j(e,t,o){let{BOARD:r}=e;for(let e=0;e<r;++e)if(t[e]!==o[e])return!1;return!0}function I(e,t){if(t<0)return{r:-1,c:-1};let{MATRIX:o}=e;return{r:Math.floor(t/o),c:t%o}}let P=function(e){var t;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U,{SUDOKU_SIZE_SQRT:r=o.SUDOKU_SIZE_SQRT,difficulty:a=o.difficulty,score:s=o.score,radix:i=o.radix,activatedPos:l=null!==(t=o.activatedPos)&&void 0!==t?t:-1,gameTick:d=o.gameTick,puzzle:c=o.puzzle,solution:u=o.solution,instructions:p=o.instructions.slice(),elapsedTime:h=o.elapsedTime}=null!=e?e:{},{puzzle:m,solution:B}=null!=c&&null!=u?{puzzle:c,solution:u}:D(r).createSudoku(a/100),S=_(r),f=(0,$.s0)(S);(0,$._g)(m,f,S),function(e,t,o){for(let r of o)switch(r.type){case n.ERASE:{let{r:o,c:a}=r.payload,s=o*e.MATRIX+a;t[s]=-1;break}case n.WRITE:{let{r:o,c:a,v:s}=r.payload,i=o*e.MATRIX+a;t[i]=s}}}(S,f,p);let g=j(S,f,B)?N.X.END:h>0||!j(S,f,m)?N.X.PAUSED:N.X.PENDING;return{status:g,elapsedTime:h,SUDOKU_SIZE_SQRT:r,difficulty:a,radix:i,score:s,attempt:f,instructions:p,puzzle:m,solution:B,activatedPos:l,hintPos:-1,cheatVisible:!1,gameTick:d,attemptTick:0,hintTick:0}},U={status:N.X.PENDING,elapsedTime:0,SUDOKU_SIZE_SQRT:3,difficulty:20,radix:10,score:0,puzzle:null,solution:null,attempt:null,instructions:[],activatedPos:-1,hintPos:-1,cheatVisible:!1,gameTick:0,attemptTick:0,hintTick:0};var w=o(35369),A=o(73935);let Z=(e,t,o,r)=>{let{BOARD:a}=e;for(let e=0;e<a;++e)if(-1===t[e])return e;for(let e=0;e<a;++e)if(-1===o[e]&&t[e]!==r[e])return e;return -1};class F{constructor(e){var t=this;this.restart=()=>{let e=this.viewmodel,t=e.SUDOKU_SIZE_SQRT$.getSnapshot(),o=e.difficulty$.getSnapshot(),r=D(t),{puzzle:a,solution:s}=r.createSudoku(o),i=(0,$.s0)(r.size);(0,$._g)(a,i,r.size),e.status$.next(N.X.PENDING),e.gameTick$.setState(e=>e+1),e.puzzle$.next(a),e.solution$.next(s),e.attempt$.next(i),e.instructions$.next(w.aV.of()),e.hintPos$.next(-1),e.hintTick$.next(0),e.attemptTick$.next(0)},this.reset=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=t.viewmodel,{difficulty:r=o.difficulty$.getSnapshot(),SUDOKU_SIZE_SQRT:a=o.SUDOKU_SIZE_SQRT$.getSnapshot(),radix:s=o.radix$.getSnapshot()}=e,i=D(a),{puzzle:l,solution:n}=i.createSudoku(r/100),d=(0,$.s0)(i.size);(0,$._g)(l,d,i.size),o.status$.next(N.X.PENDING),o.SUDOKU_SIZE_SQRT$.next(a),o.difficulty$.next(r),o.radix$.next(s),o.puzzle$.next(l),o.solution$.next(n),o.attempt$.next(d),o.instructions$.next(w.aV.of()),o.hintPos$.next(-1),o.cheatVisible$.next(!1),o.gameTick$.setState(e=>e+1),o.attemptTick$.next(0),o.hintTick$.next(0)},this.start=()=>{let e=this.viewmodel;e.status$.getSnapshot()===N.X.PENDING&&e.status$.next(N.X.RUNNING)},this.pause=()=>{let e=this.viewmodel;e.status$.getSnapshot()===N.X.RUNNING&&e.status$.next(N.X.PAUSED)},this.resume=()=>{let e=this.viewmodel;e.status$.getSnapshot()===N.X.PAUSED&&e.status$.next(N.X.RUNNING)},this._end=()=>{let e=this.viewmodel;if(e.status$.getSnapshot()===N.X.RUNNING){let t=e.SUDOKU_SIZE_SQRT$.getSnapshot(),o=_(t),r=e.attempt$.getSnapshot(),a=e.solution$.getSnapshot();if(!j(o,r,a))return;let s=0,i=e.difficulty$.getSnapshot(),l=e.elapsedTime$.getSnapshot(),n=t**4*1e3;if(l<n){let e=t**4*i/100;s=(n-l)*e/1e3}let d=Math.max(5,Math.round(s));e.status$.next(N.X.END),e.score$.setState(e=>e+d)}},this.activePos=(e,t)=>{let o=this.viewmodel,r=_(o.SUDOKU_SIZE_SQRT$.getSnapshot()),a=e*r.MATRIX+t;o.activatedPos$.next(a)},this.hint=()=>{let e=this.viewmodel,t=e.SUDOKU_SIZE_SQRT$.getSnapshot(),o=e.puzzle$.getSnapshot(),r=e.solution$.getSnapshot(),a=e.attempt$.getSnapshot(),s=e.activatedPos$.getSnapshot(),i=_(t),l=-1===s||-1!==o[s]?Z(i,a,o,r):s,d=I(i,l);e.hintPos$.next(l),e.hintTick$.setState(e=>e+1),e.instructions$.setState(e=>e.push({type:n.HINT,payload:d,timestamp:new Date().toISOString()}))},this.toggleCheatVisibility=e=>{let t=this.viewmodel;t.cheatVisible$.setState(t=>null!=e?e:!t)},this.input=e=>{let t=this.viewmodel;if(t.status$.getSnapshot()!==N.X.RUNNING)return;let o=t.SUDOKU_SIZE_SQRT$.getSnapshot(),{size:r}=D(o);if(!Number.isInteger(e)||e<-1||e>=r.BOARD)return;let a=t.activatedPos$.getSnapshot();if(-1===a)return;let s=t.puzzle$.getSnapshot();if(-1!==s[a])return;let i=t.attempt$.getSnapshot();if(i[a]===e)return;let l=(0,$.s0)(r);(0,$._g)(i,l,r),l[a]=e;let{r:d,c}=I(r,a);t.attempt$.next(l),t.attemptTick$.setState(e=>e+1),t.hintPos$.setState(e=>a===e?-1:e),t.instructions$.setState(t=>t.push({type:n.WRITE,payload:{r:d,c,v:e},timestamp:new Date().toISOString()}))},this.viewmodel=e.viewmodel,this.viewmodel.attempt$.subscribeStateChange(()=>this._end())}}class M extends N.p{constructor(e){super(e),this.getSnapshot=()=>({status:this.status$.getSnapshot(),elapsedTime:this.elapsedTime$.getSnapshot(),SUDOKU_SIZE_SQRT:this.SUDOKU_SIZE_SQRT$.getSnapshot(),difficulty:this.difficulty$.getSnapshot(),radix:this.radix$.getSnapshot(),score:this.score$.getSnapshot(),puzzle:this.puzzle$.getSnapshot(),solution:this.solution$.getSnapshot(),attempt:this.attempt$.getSnapshot(),instructions:Array.from(this.instructions$.getSnapshot()),activatedPos:this.activatedPos$.getSnapshot(),hintPos:this.hintPos$.getSnapshot(),cheatVisible:this.cheatVisible$.getSnapshot(),gameTick:this.gameTick$.getSnapshot(),attemptTick:this.attemptTick$.getSnapshot(),hintTick:this.hintTick$.getSnapshot()}),this.dispatch=e=>{let t=X[e.type];t?(0,A.unstable_batchedUpdates)(()=>{t(this._controller,e)}):console.error(this.constructor.name,"Bad action:",e)},this.SUDOKU_SIZE_SQRT$=new x.ZM(e.SUDOKU_SIZE_SQRT),this.difficulty$=new x.ZM(e.difficulty),this.radix$=new x.ZM(e.radix),this.score$=new x.ZM(e.score),this.puzzle$=new x.ZM(e.puzzle),this.solution$=new x.ZM(e.solution),this.attempt$=new x.ZM(e.attempt),this.instructions$=new x.ZM(w.aV.of(...e.instructions)),this.activatedPos$=new x.ZM(e.activatedPos),this.hintPos$=new x.ZM(e.hintPos),this.cheatVisible$=new x.ZM(e.cheatVisible),this.gameTick$=new x.ZM(e.gameTick),this.attemptTick$=new x.ZM(e.attemptTick),this.hintTick$=new x.ZM(e.hintTick);let t=new F({viewmodel:this});this._controller=t}}let X={[d.RESTART]:e=>{e.restart()},[d.RESET]:(e,t)=>{let o=t.payload;e.reset(o)},[d.START]:e=>{e.start()},[d.PAUSE]:e=>{e.pause()},[d.RESUME]:e=>{e.resume()},[d.ACTIVE]:(e,t)=>{let{r:o,c:r}=t.payload;e.activePos(o,r)},[d.HINT]:e=>{e.hint()},[d.TOGGLE_CHEAT]:(e,t)=>{let o=t.payload;e.toggleCheatVisibility(o)},[d.INPUT]:(e,t)=>{let o=t.payload;e.input(o)}},G=e=>{let{storageKey:t,LoadingComponent:o=v.gb}=e,[r,a]=S.useState(void 0),s=S.useMemo(()=>t?(0,b.Yu)(t):void 0,[t]),i=S.useRef(e.initialData);return(S.useEffect(()=>{e();async function e(){let e=await i.current;if(s){let t=await s.load();null==t||t.version!==k?a(new M(P(e))):a(new M(P({...t.data,...e})))}else a(new M(P(e)))}},[s]),S.useEffect(()=>{if(r)return()=>{console.log("[waw] unmounting sudoku viewmodel."),r.dispose()}},[r]),r)?(0,h.jsxs)(S.Fragment,{children:[(0,h.jsx)(y.Provider,{value:r,children:e.children}),s&&(0,h.jsx)(O,{viewmodel:r,storage:s,storageKey:t})]}):(0,h.jsx)(o,{})},O=e=>{let{viewmodel:t,storage:o,storageKey:r}=e,a=(0,x.sD)(t,["SUDOKU_SIZE_SQRT$","difficulty$","radix$","score$","puzzle$","solution$","instructions$","activatedPos$","gameTick$"]),s=S.useMemo(()=>(0,f.P2)(()=>{let e={elapsedTime:t.elapsedTime$.getSnapshot(),SUDOKU_SIZE_SQRT:t.SUDOKU_SIZE_SQRT$.getSnapshot(),difficulty:t.difficulty$.getSnapshot(),radix:t.radix$.getSnapshot(),score:t.score$.getSnapshot(),puzzle:t.puzzle$.getSnapshot(),solution:t.solution$.getSnapshot(),instructions:Array.from(t.instructions$.getSnapshot()),activatedPos:t.activatedPos$.getSnapshot(),gameTick:t.gameTick$.getSnapshot()};return C.kg.log("saving ".concat(r,". data:"),e),o.save({version:k,data:e})},200),[t,o,r]);return S.useEffect(()=>void s(),[s,a]),(0,g.i7)(()=>s.flushSync(),[],!1),(0,h.jsx)(S.Fragment,{})};var q=o(6260),K=o(94101),Q=o(36674),H=o(72908);(s=c||(c={})).fontSize="--sudoku_fontSize",s.fontSizeBoardCell="--sudoku_fontSizeBoardCell",s.fontSizeFinishedBanner="--sudoku_fontSizeFinishedBanner",s.sizeBoardCell="--sudoku_sizeBoardCell",s.sizeBorderBoard1="--sudoku_sizeBorderBoard1",s.sizeBorderBoard2="--sudoku_sizeBorderBoard2",s.sizeBorderBoard3="--sudoku_sizeBorderBoard3",(i=u||(u={})).colorBgBoard="--sudoku_colorBgBoard",i.colorBgBoardCell="--sudoku_colorBgBoardCell",i.colorBgBoardCellActivated="--sudoku_colorBgBoardCellActivated",i.colorBgBoardCellAttempt="--sudoku_colorBgBoardCellAttempt",i.colorBgBoardCellDuplicated="--sudoku_colorBgBoardCellDuplicated",i.colorBgBoardCellHint="--sudoku_colorBgBoardCellHint",i.colorBgBoardCellPreset="--sudoku_colorBgBoardCellPreset",i.colorBgBoardCellRelated="--sudoku_colorBgBoardCellRelated",i.colorBgBoardCellSame="--sudoku_colorBgBoardCellSame",i.colorBorderBoard1="--sudoku_colorBorderBoard1",i.colorBorderBoard2="--sudoku_colorBorderBoard2",i.colorBorderBoard3="--sudoku_colorBorderBoard3",(l=p||(p={}))[l.colorBgBoard="var(--sudoku_colorBgBoard)"]="colorBgBoard",l[l.colorBgBoardCell="var(--sudoku_colorBgBoardCell)"]="colorBgBoardCell",l[l.colorBgBoardCellActivated="var(--sudoku_colorBgBoardCellActivated)"]="colorBgBoardCellActivated",l[l.colorBgBoardCellAttempt="var(--sudoku_colorBgBoardCellAttempt)"]="colorBgBoardCellAttempt",l[l.colorBgBoardCellDuplicated="var(--sudoku_colorBgBoardCellDuplicated)"]="colorBgBoardCellDuplicated",l[l.colorBgBoardCellHint="var(--sudoku_colorBgBoardCellHint)"]="colorBgBoardCellHint",l[l.colorBgBoardCellPreset="var(--sudoku_colorBgBoardCellPreset)"]="colorBgBoardCellPreset",l[l.colorBgBoardCellRelated="var(--sudoku_colorBgBoardCellRelated)"]="colorBgBoardCellRelated",l[l.colorBgBoardCellSame="var(--sudoku_colorBgBoardCellSame)"]="colorBgBoardCellSame",l[l.colorBorderBoard1="var(--sudoku_colorBorderBoard1)"]="colorBorderBoard1",l[l.colorBorderBoard2="var(--sudoku_colorBorderBoard2)"]="colorBorderBoard2",l[l.colorBorderBoard3="var(--sudoku_colorBorderBoard3)"]="colorBorderBoard3",l[l.fontSize="var(--sudoku_fontSize)"]="fontSize",l[l.fontSizeBoardCell="var(--sudoku_fontSizeBoardCell)"]="fontSizeBoardCell",l[l.fontSizeFinishedBanner="var(--sudoku_fontSizeFinishedBanner)"]="fontSizeFinishedBanner",l[l.sizeBoardCell="var(--sudoku_sizeBoardCell)"]="sizeBoardCell",l[l.sizeBorderBoard1="var(--sudoku_sizeBorderBoard1)"]="sizeBorderBoard1",l[l.sizeBorderBoard2="var(--sudoku_sizeBorderBoard2)"]="sizeBorderBoard2",l[l.sizeBorderBoard3="var(--sudoku_sizeBorderBoard3)"]="sizeBorderBoard3";var V=o(9171),W=o(18872),L=o(41616),Y=o(70655),J=o(1849),ee=o(83321);class et extends S.PureComponent{render(){let{status:e}=this.props,{start:t,resume:o,restart:r}=this;switch(e){case N.X.PENDING:return(0,h.jsx)("div",{className:eo.overlay,children:(0,h.jsx)(ee.Z,{className:eo.button,variant:"contained",color:"primary",startIcon:(0,h.jsx)(Y.Z,{}),onClick:t,children:"Start"})});case N.X.PAUSED:return(0,h.jsx)("div",{className:eo.overlay,children:(0,h.jsx)(ee.Z,{className:eo.button,variant:"contained",color:"primary",startIcon:(0,h.jsx)(L.Z,{}),onClick:o,children:"Resume"})});case N.X.END:return(0,h.jsx)("div",{className:eo.overlay,children:(0,h.jsxs)("div",{className:eo.finishedBanner,children:[(0,h.jsx)("p",{children:"You win \uD83C\uDF89\uD83C\uDF89\uD83C\uDF89"}),(0,h.jsx)(ee.Z,{className:eo.button,variant:"contained",color:"primary",startIcon:(0,h.jsx)(J.Z,{}),onClick:r,children:"New"})]})});default:return(0,h.jsx)(S.Fragment,{})}}componentDidUpdate(e){let t=this.props.status,o=e.status;o!==t&&t===N.X.END&&this.props.throwConfetti()}constructor(...e){super(...e),this.start=()=>{let{dispatchSudokuAction:e}=this.props;e({type:d.START})},this.resume=()=>{let{dispatchSudokuAction:e}=this.props;e({type:d.RESUME})},this.restart=()=>{let{dispatchSudokuAction:e}=this.props;e({type:d.RESTART})}}}et.displayName="GameOverlayComponent",et.propTypes={status:B().any.isRequired,dispatchSudokuAction:B().func.isRequired,throwConfetti:B().func.isRequired};let eo={overlay:(0,W.iv)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:"100%",userSelect:"none"}),confettiCanvas:(0,W.iv)({position:"absolute",top:0,bottom:0,left:0,right:0,width:"100%",height:"100%"}),button:(0,W.iv)({"&&, &&:hover":{boxShadow:"4px 4px 16px 0px hsl(0deg 0% 0% / 0.75)"}}),finishedBanner:(0,W.iv)({position:"relative",display:"flex",flexDirection:"column",justifyContent:"center",padding:0,margin:0,fontSize:p.fontSizeFinishedBanner}),playerName:(0,W.iv)({color:"#e200e2"})},er=()=>{let e=T(),t=R(e=>e.status$),o=(0,V.D)();return(0,h.jsx)(et,{status:t,dispatchSudokuAction:e,throwConfetti:o})};var ea=o(45018),es=o(55819),ei=o(45929);class el extends S.PureComponent{render(){let{status:e,SUDOKU_SIZE_SQRT:t,difficulty:o,radix:r}=this.props,{onSizeChange:a,onRadixChange:s,onDifficultyChange:i}=this,l=e===N.X.PENDING;return(0,h.jsxs)("div",{className:en.settings,children:[(0,h.jsxs)("div",{className:en.item,children:[(0,h.jsx)("span",{children:"Size:"}),(0,h.jsxs)(ea.Z,{variant:"standard",value:t,disabled:!l,onChange:a,children:[(0,h.jsx)(es.Z,{value:2,children:"4x4"}),(0,h.jsx)(es.Z,{value:3,children:"9x9"}),(0,h.jsx)(es.Z,{value:4,children:"16x16"})]})]}),(0,h.jsxs)("div",{className:en.item,children:[(0,h.jsx)("span",{children:"Radix:"}),(0,h.jsxs)(ea.Z,{variant:"standard",value:r,disabled:!l,onChange:s,children:[(0,h.jsx)(es.Z,{value:10,children:"Decimal (x10)"}),(0,h.jsx)(es.Z,{value:16,children:"Hexadecimal (x16)"})]})]}),(0,h.jsxs)("div",{className:(0,W.cx)(en.item,en.difficulty),children:[(0,h.jsx)("span",{children:"Difficulty:"}),(0,h.jsx)(ei.ZP,{value:o,disabled:!l,step:1,min:0,max:100,valueLabelDisplay:"auto","aria-labelledby":"sudoku-difficulty",onChange:i})]})]})}constructor(...e){super(...e),this.onSizeChange=e=>{let{dispatchSudokuAction:t}=this.props;t({type:d.RESET,payload:{SUDOKU_SIZE_SQRT:Number(e.target.value)}})},this.onRadixChange=e=>{let{dispatchSudokuAction:t}=this.props;t({type:d.RESET,payload:{radix:Number(e.target.value)}})},this.onDifficultyChange=(e,t)=>{let{dispatchSudokuAction:o}=this.props;o({type:d.RESET,payload:{difficulty:t}})}}}el.displayName="GameSettingsComponent",el.propTypes={status:B().any.isRequired,SUDOKU_SIZE_SQRT:B().number.isRequired,difficulty:B().number.isRequired,radix:B().number.isRequired,dispatchSudokuAction:B().func.isRequired};let en={settings:(0,W.iv)({display:"block",maxWidth:"min(90vw, 400px)",margin:"auto"}),item:(0,W.iv)({display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"flex-start",margin:"1rem 0","& > *":{marginRight:"1rem"}}),difficulty:(0,W.iv)({flexWrap:"nowrap","& > span":{"&:first-child":{flex:"0 0 auto"}}})},ed=()=>{let e=T(),t=R(e=>e.status$),o=R(e=>e.SUDOKU_SIZE_SQRT$),r=R(e=>e.difficulty$),a=R(e=>e.radix$);return(0,h.jsx)(el,{status:t,SUDOKU_SIZE_SQRT:o,difficulty:r,radix:a,dispatchSudokuAction:e})};var ec=o(27484),eu=o.n(ec),ep=o(1646),eh=o.n(ep),em=o(75303),eB=o(53247),eS=o(22961),ef=o(76997),eg=o(93946),ex=o(78262),eC=o(9581),ev=o(31425),eb=o(65464);class ek extends S.PureComponent{render(){let{elapsedTime:e}=this.props;return(0,h.jsxs)("div",{className:ey.elapsedTime,children:[(0,h.jsx)(ef.Z,{title:"Time used",children:(0,h.jsx)(eb.Z,{})}),"\xa0\xa0",(0,h.jsx)("span",{children:e})]},"elapsed-time")}}ek.displayName="ElapsedTimeComponent",ek.propTypes={elapsedTime:B().string.isRequired};let ey={elapsedTime:(0,W.iv)({flex:"0 1 auto",display:"flex",alignItems:"center",fontFamily:"Consolas, 'Source Code Pro', 'Roboto Mono', monospace, sans-serif",color:"#595959",userSelect:"none"})};eu().extend(eh());let eT=()=>{let e=R(e=>e.elapsedTime$),t=eu().duration(e).format("HH:mm:ss");return(0,h.jsx)(ek,{elapsedTime:t})};class eR extends S.Component{render(){let{containerRef:e,status:t,score:o}=this.props,{isRestartDialogVisible:r}=this.state,{closeRestartDialog:a,hint:s,pauseGame:i,restartGame:l,showCheat:n,startGame:d}=this;return(0,h.jsxs)("div",{className:e$.toolbar,children:[(0,h.jsxs)("div",{className:(0,W.cx)(e$.item,e$.buttons),children:[(0,h.jsx)(ee.Z,{variant:"contained",color:"inherit",startIcon:(0,h.jsx)(J.Z,{}),onClick:d,children:"New"}),(0,h.jsx)(ee.Z,{variant:"contained",color:"inherit",disabled:t!==N.X.RUNNING,startIcon:(0,h.jsx)(em.Z,{}),onClick:s,children:"HINT"}),(0,h.jsx)(ee.Z,{variant:"contained",color:"secondary",disabled:t!==N.X.RUNNING,startIcon:(0,h.jsx)(eS.Z,{}),onClick:n,children:"Cheat"})]}),(0,h.jsxs)("div",{className:(0,W.cx)(e$.item,e$.state),children:[(0,h.jsx)("div",{className:e$.stateButtons,children:t===N.X.RUNNING&&(0,h.jsx)(ef.Z,{title:"Pause",children:(0,h.jsx)(eg.Z,{color:"primary",onClick:i,children:(0,h.jsx)(eB.Z,{})})})},"state-buttons"),(0,h.jsx)(eT,{}),(0,h.jsxs)("div",{className:e$.score,children:["Score: ",o]},"score")]}),(0,h.jsxs)(ex.Z,{container:e.current,open:r,onClose:a,"aria-labelledby":"confirm-to-restart",children:[(0,h.jsx)(eC.Z,{children:"Are you sure you want to start a new game?"}),(0,h.jsxs)(ev.Z,{children:[(0,h.jsx)(ee.Z,{color:"inherit",onClick:a,children:"Cancel"}),(0,h.jsx)(ee.Z,{color:"primary",onClick:l,children:"Confirm"})]})]})]})}constructor(e){super(e),this.closeRestartDialog=()=>{this.setState({isRestartDialogVisible:!1})},this.hint=()=>{let{dispatchSudokuAction:e}=this.props;e({type:d.HINT})},this.pauseGame=()=>{let{dispatchSudokuAction:e}=this.props;e({type:d.PAUSE})},this.restartGame=()=>{let{dispatchSudokuAction:e}=this.props;this.setState({isRestartDialogVisible:!1}),e({type:d.RESTART})},this.showCheat=()=>{let{dispatchSudokuAction:e}=this.props;e({type:d.TOGGLE_CHEAT,payload:!0})},this.startGame=()=>{let{status:e}=this.props;e===N.X.PENDING||e===N.X.END?this.restartGame():this.setState({isRestartDialogVisible:!0})},this.state={isRestartDialogVisible:!1}}}eR.displayName="GameToolbarComponent",eR.propTypes={containerRef:B().object.isRequired,status:B().any.isRequired,score:B().number.isRequired,dispatchSudokuAction:B().func.isRequired};let e$={toolbar:(0,W.iv)({display:"block",maxWidth:"min(90vw, 400px)",margin:"auto"}),item:(0,W.iv)({display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"flex-start",margin:"1rem 0","> *":{marginRight:"1rem"}}),buttons:(0,W.iv)({justifyContent:"space-around","> button":{margin:"0 4px"}}),state:(0,W.iv)({justifyContent:"center",margin:"2rem 0 0",height:"48px"}),stateButtons:(0,W.iv)({flex:"0 1 auto",display:"flex",alignItems:"center",justifyContent:"center",margin:"0",userSelect:"none"}),score:(0,W.iv)({flex:"0 1 auto",color:"green",overflow:"hidden",textOverflow:"ellipsis",fontFamily:"Consolas, 'Source Code Pro', 'Roboto Mono', monospace, sans-serif"})};eu().extend(eh());let eN=e=>{let{containerRef:t}=e,o=T(),r=R(e=>e.status$),a=R(e=>e.score$);return(0,h.jsx)(eR,{containerRef:t,status:r,score:a,dispatchSudokuAction:o})};class eE extends S.PureComponent{render(){let{SUDOKU_SIZE_SQRT:e}=this.props,t=e*e,o=[];for(let r=e,a=-1;r<t;r+=e,++a){let e="calc((".concat(r," * ").concat(p.sizeBoardCell,") + ").concat(r+a,"px)");o.push((0,h.jsx)("div",{className:ez.horizontalBoarder,style:{top:e}},"h-".concat(r))),o.push((0,h.jsx)("div",{className:ez.verticalBorder,style:{left:e}},"v-".concat(r)))}return(0,h.jsx)(S.Fragment,{children:o})}}eE.displayName="SudokuBoardBorders",eE.propTypes={SUDOKU_SIZE_SQRT:B().number.isRequired};let ez={horizontalBoarder:(0,W.iv)({position:"absolute",boxSizing:"content-box",left:"0",right:"0",bottom:"unset",width:"calc(100% + 2px)",height:p.sizeBorderBoard2,background:p.colorBorderBoard2}),verticalBorder:(0,W.iv)({position:"absolute",boxSizing:"content-box",top:"0",bottom:"0",right:"unset",height:"calc(100% + 2px)",width:p.sizeBorderBoard2,background:p.colorBorderBoard2})};function e_(e,t){let{BOARD:o,MATRIX:r,BASE_1:a,BASE_3:s}=e,i=Array(o).fill(!1),l=Array(r).fill(0);for(let e=0;e<o;e+=r){l.fill(0);for(let o=e,a=e+r;o<a;++o){let e=t[o];-1!==e&&(l[e]+=1)}for(let o=e,a=e+r;o<a;++o){let e=t[o];-1!==e&&l[e]>1&&(i[o]=!0)}}for(let e=0;e<r;++e){l.fill(0);for(let a=e;a<o;a+=r){let e=t[a];-1!==e&&(l[e]+=1)}for(let a=e;a<o;a+=r){let e=t[a];-1!==e&&l[e]>1&&(i[a]=!0)}}for(let e=0;e<o;e+=s)for(let o=0;o<r;o+=a){l.fill(0);for(let i=e,n=e+s;i<n;i+=r)for(let e=i+o,r=e+a;e<r;++e){let o=t[e];-1!==o&&(l[o]+=1)}for(let n=e,d=e+s;n<d;n+=r)for(let e=n+o,r=e+a;e<r;++e){let o=t[e];-1!==o&&l[o]>1&&(i[e]=!0)}}return i}class eD extends S.PureComponent{render(){let e;let{SUDOKU_SIZE_SQRT:t,radix:o,puzzle:r,solution:a,attempt:s}=this.props,{activatedPos:i,hintTick:l,hintPos:n,onCellClick:d}=this.props;t!==this.size.BASE_1&&(this.size=new $.$X(t),this.matrixCoordinateMap=(0,$.iN)(this.size));let{size:c,matrixCoordinateMap:u}=this,{r:p,c:m}=I(c,i),B=u[i],f=-1===i?-1:s[i],{r:g=-1,c:x=-1}=I(c,n),C=-1===n?-1:a[n];{let t=-1!==n&&-1===r[n];if(t){let t=s[n];s[n]=a[n],e=e_(c,s),s[n]=t}else e=e_(c,s)}let v=[];for(let a=0,i=0;a<c.MATRIX;++a){let n=[];for(let S=0;S<c.MATRIX;++S,++i){let c=s[i],v=a===g&&S===x,b=a===p&&S===m,k=!b&&(a===p||S===m||u[i]===B),y=-1!==f&&c===f&&!k&&!b,T=!!e[i],R=v?C:c,$=(0,h.jsx)("span",{className:(0,W.cx)(eI.boardCell,{[eI.boardCellLeftSeamless]:0===S,[eI.boardCellLeft]:S>0&&S%t==0,[eI.boardCellTopSeamless]:0===a,[eI.boardCellTop]:a>0&&a%t==0,[eI.boardCellPreset]:-1!==c,[eI.boardCellAttempt]:c!==r[i],[eI.boardCellDuplicated]:!v&&T,[eI.boardCellHint]:v,[eI.boardCellActivated]:!T&&b,[eI.boardCellRelated]:!T&&k,[eI.boardCellSame]:!T&&y}),children:(0,h.jsx)("span",{className:eI.boardCellContent,"data-sudoku-hint":v,onClick:()=>d(a,S),children:-1===R?"":(R+1).toString(o)})},v?"".concat(S,"-hint-").concat(l):S);n.push($)}v.push((0,h.jsx)("div",{className:eI.boardRow,children:n},a))}return(0,h.jsx)(S.Fragment,{children:v})}constructor(e){super(e),this.size=new $.$X(e.SUDOKU_SIZE_SQRT),this.matrixCoordinateMap=(0,$.iN)(this.size)}}eD.displayName="SudokuBoardCells",eD.propTypes={SUDOKU_SIZE_SQRT:B().number.isRequired,radix:B().number.isRequired,puzzle:B().array.isRequired,solution:B().array.isRequired,attempt:B().array.isRequired,activatedPos:B().number.isRequired,hintTick:B().number.isRequired,hintPos:B().number.isRequired,onCellClick:B().func};let ej={hint:(0,W.F4)({"0%":{transform:"scale(1) rotate(0deg)"},"50%":{transform:"scale(2) rotate(200deg)"},"100%":{transform:"scale(1.3) rotate(360deg)"}})},eI={boardRow:(0,W.iv)({display:"flex"}),boardCell:(0,W.iv)({flex:"0 0 auto",overflow:"hidden",display:"inline-block",boxSizing:"border-box",width:p.sizeBoardCell,height:p.sizeBoardCell,margin:"".concat(p.sizeBorderBoard1," 0 0 ").concat(p.sizeBorderBoard1),backgroundColor:p.colorBgBoardCell,userSelect:"none",cursor:"pointer"}),boardCellContent:(0,W.iv)({display:"inline-flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",height:"100%",width:"100%",padding:"4px",margin:0,'&[data-sudoku-hint="true"]':{animation:"0.5s 0s ".concat(ej.hint," linear 1 both normal")}}),boardCellLeftSeamless:(0,W.iv)({marginLeft:0}),boardCellLeft:(0,W.iv)({marginLeft:p.sizeBorderBoard2}),boardCellTopSeamless:(0,W.iv)({marginTop:0}),boardCellTop:(0,W.iv)({marginTop:p.sizeBorderBoard2}),boardCellPreset:(0,W.iv)({color:p.colorBgBoardCellPreset}),boardCellHint:(0,W.iv)({color:p.colorBgBoardCellHint}),boardCellAttempt:(0,W.iv)({color:p.colorBgBoardCellAttempt}),boardCellDuplicated:(0,W.iv)({background:p.colorBgBoardCellDuplicated}),boardCellActivated:(0,W.iv)({background:p.colorBgBoardCellActivated}),boardCellRelated:(0,W.iv)({background:p.colorBgBoardCellRelated}),boardCellSame:(0,W.iv)({background:p.colorBgBoardCellSame})};class eP extends S.PureComponent{render(){let{SUDOKU_SIZE_SQRT:e,radix:t,puzzle:o,solution:r,attempt:a,status:s,activatedPos:i,hintTick:l,hintPos:n,overlay:d}=this.props,{onCellClick:c}=this;return(0,h.jsxs)("div",{className:ew.container,children:[(0,h.jsx)("div",{className:ew.overlay,"data-sudoku-status":s,children:d}),(0,h.jsx)(eE,{SUDOKU_SIZE_SQRT:e}),(0,h.jsx)("div",{className:ew.boardWrapper,"data-sudoku-status":s,children:(0,h.jsx)(eD,{SUDOKU_SIZE_SQRT:e,puzzle:o,solution:r,radix:t,activatedPos:i,hintTick:l,attempt:a,hintPos:n,onCellClick:c})})]})}constructor(...e){super(...e),this.onCellClick=(e,t)=>{let{dispatchSudokuAction:o,onCellClick:r}=this.props;null==r||r(e,t),o({type:d.ACTIVE,payload:{r:e,c:t}})}}}eP.displayName="SudokuBoardComponent",eP.propTypes={SUDOKU_SIZE_SQRT:B().number.isRequired,radix:B().number.isRequired,puzzle:B().array.isRequired,solution:B().array.isRequired,attempt:B().array.isRequired,status:B().any.isRequired,activatedPos:B().number.isRequired,hintTick:B().number.isRequired,hintPos:B().number.isRequired,overlay:B().node,dispatchSudokuAction:B().func.isRequired,onCellClick:B().func};let eU={finished:(0,W.F4)({"0%":{transform:"translate(0, -100px)"},"80%":{transform:"translate(0, 20px)"},"90%":{transform:"translate(0, -10px)"},"95%":{transform:"translate(0, 2px)"},"100%":{transform:"translate(0, 0)"}})},ew={container:(0,W.iv)({position:"relative",boxSizing:"content-box",display:"inline-block",width:"fit-content",padding:0,border:"".concat(p.sizeBorderBoard3," solid ").concat(p.colorBorderBoard3),margin:0,backgroundColor:p.colorBgBoard,fontFamily:"Consolas, 'Source Code Pro', 'Roboto Mono', monospace, sans-serif"}),overlay:(0,W.iv)({zIndex:2,position:"absolute",top:0,left:0,right:0,bottom:0,display:"none",width:"100%",height:"100%",overflow:"hidden",background:"linear-gradient(45deg, hsla(30deg,20%,90%,0.2), hsla(210deg,20%,100%,0.3))",['&[data-sudoku-status="'.concat(N.X.PENDING,'"]')]:{display:"block",backdropFilter:"blur(1px)"},['&[data-sudoku-status="'.concat(N.X.RUNNING,'"]')]:{display:"none"},['&[data-sudoku-status="'.concat(N.X.PAUSED,'"]')]:{display:"block",backdropFilter:"blur(16px)"},['&[data-sudoku-status="'.concat(N.X.END,'"]')]:{display:"block",backdropFilter:"blur(4px)",color:"#FF00FF",animation:"1s 0s ".concat(eU.finished," ease-in-out")}}),boardWrapper:(0,W.iv)({display:"flex",flexDirection:"column",fontSize:p.fontSizeBoardCell,['&[data-sudoku-status="'.concat(N.X.PENDING,'"]')]:{borderColor:"transparent"},['&[data-sudoku-status="'.concat(N.X.PAUSED,'"]')]:{borderColor:"transparent"},['&[data-sudoku-status="'.concat(N.X.END,'"]')]:{borderColor:"transparent"}})},eA=e=>{let{attempt:t,hintPos:o,overlay:r,onCellClick:a}=e,s=T(),i=R(e=>e.SUDOKU_SIZE_SQRT$),l=R(e=>e.radix$),n=R(e=>e.puzzle$),d=R(e=>e.solution$),c=R(e=>e.status$),u=R(e=>e.activatedPos$),p=R(e=>e.hintTick$);return(0,h.jsx)(eP,{SUDOKU_SIZE_SQRT:i,radix:l,puzzle:n,solution:d,attempt:t,status:c,activatedPos:u,hintTick:p,hintPos:o,overlay:r,dispatchSudokuAction:s,onCellClick:a})};var eZ=o(98271);class eF extends S.Component{render(){let{inputRef:e,radix:t}=this.props,{text:o}=this.state,{onChange:r,onKeyDown:a,onFocus:s}=this;return(0,h.jsx)(eZ.Z,{inputRef:e,autoFocus:!0,autoComplete:"off",margin:"dense",label:"A ".concat(10===t?"decimal":"hexadecimal"," number"),type:t<=10?"number":"input",fullWidth:!0,value:o,multiline:!1,onChange:r,onFocus:s,onKeyDown:a})}shouldComponentUpdate(e,t){let o=this.props,r=this.state;return t.text!==r.text||e.size!==o.size||e.radix!==o.radix||e.initialValue!==o.initialValue}constructor(e){super(e),this.onChange=e=>{let{radix:t,size:o,onConfirm:r}=this.props,a=this.state.text,s=e.target.value;if(this.setState({text:s}),a.length<=s.length&&o<t){let e=Number.parseInt(s,t);e>0&&e<=o&&r(e)}},this.onKeyDown=e=>{if("Enter"===e.key){let{radix:e,size:t,onConfirm:o}=this.props,r=this.state.text,a=Number.parseInt(r,e);a>=0&&a<=t&&o(a)}},this.onFocus=e=>{e.target.select()};let{radix:t,initialValue:o}=e;this.state={text:o>0?o.toString(t):""}}}eF.displayName="SudokuInputComponent",eF.propTypes={inputRef:B().object.isRequired,size:B().number.isRequired,radix:B().number.isRequired,initialValue:B().number.isRequired,onConfirm:B().func.isRequired};let eM=e=>{let{size:t,container:o,cellPos:r,visible:a,onCancel:s}=e,i=R(e=>e.radix$),l=R(e=>e.attempt$),n=S.useRef(null),d=r>=0?l[r]+1:0,c=(0,g.$0)(o=>{o>=0&&o<=t&&e.onConfirm(o)}),u=(0,g.$0)(()=>{var e;let t=null===(e=n.current)||void 0===e?void 0:e.value;if("string"==typeof t){let e=Number.parseInt(t,i);c(e)}});return(0,h.jsxs)(ex.Z,{container:o,open:a,onClose:s,"aria-labelledby":"sudoku-input-dialog",children:[(0,h.jsx)(eC.Z,{children:(0,h.jsx)(eF,{inputRef:n,size:t,radix:i,initialValue:d,onConfirm:c},r)}),(0,h.jsxs)(ev.Z,{children:[(0,h.jsx)(ee.Z,{color:"inherit",onClick:s,children:"Cancel"}),(0,h.jsx)(ee.Z,{color:"primary",onClick:u,children:"Confirm"})]})]})},eX={[c.fontSize]:"18px",[c.fontSizeBoardCell]:"16px",[c.fontSizeFinishedBanner]:"32px",[c.sizeBoardCell]:"32px",[c.sizeBorderBoard1]:"1px",[c.sizeBorderBoard2]:"2px",[c.sizeBorderBoard3]:"3px"},eG={[u.colorBgBoard]:"#D3D8E2",[u.colorBgBoardCell]:"#FFFFFF",[u.colorBgBoardCellActivated]:"#6EB2F7",[u.colorBgBoardCellAttempt]:"#0080FF",[u.colorBgBoardCellDuplicated]:"#FF6A00",[u.colorBgBoardCellHint]:"#FFA500",[u.colorBgBoardCellPreset]:"#333333",[u.colorBgBoardCellRelated]:"#E2EBF3",[u.colorBgBoardCellSame]:"#BBDEFB",[u.colorBorderBoard1]:"#111111",[u.colorBorderBoard2]:"#111111",[u.colorBorderBoard3]:"#111111"},eO={[u.colorBgBoard]:"#D3D8E2",[u.colorBgBoardCell]:"#FFFFFF",[u.colorBgBoardCellActivated]:"#6EB2F7",[u.colorBgBoardCellAttempt]:"#0080FF",[u.colorBgBoardCellDuplicated]:"#FF6A00",[u.colorBgBoardCellHint]:"#FFA500",[u.colorBgBoardCellPreset]:"#333333",[u.colorBgBoardCellRelated]:"#E2EBF3",[u.colorBgBoardCellSame]:"#BBDEFB",[u.colorBorderBoard1]:"#111111",[u.colorBorderBoard2]:"#111111",[u.colorBorderBoard3]:"#111111"},eq={backdrop:{timeout:500}},eK=()=>{let e=T(),t=(0,Q.mY)(e=>e.theme$),o=R(e=>e.status$),r=R(e=>e.SUDOKU_SIZE_SQRT$),a=R(e=>e.puzzle$),s=R(e=>e.solution$),i=R(e=>e.attempt$),l=R(e=>e.hintPos$),n=R(e=>e.cheatVisible$),c=_(r),u=S.useRef(null),p=S.useRef(-1),[m,B]=S.useState(!1),f={closeCheat:(0,g.$0)(()=>{e({type:d.TOGGLE_CHEAT,payload:!1})}),handleInput:(0,g.$0)(t=>{B(!1),e({type:d.INPUT,payload:t-1})}),handleCellClick:(0,g.$0)((e,t)=>{if(-1===e||-1===t)return;let o=e*c.MATRIX+t;-1===a[o]&&(p.current=o,B(!0))})};(0,g.TK)(()=>e({type:d.PAUSE}),[e]),(0,q.Z)(r>=2&&r<=7,"`childMatrixSize` must be an integer in the range [2, 7].");let x=r*r;return(0,h.jsxs)("div",{ref:u,className:eQ.sudoku,"data-theme":t,"data-sudoku-status":o,"data-sudoku-size":x,children:[(0,h.jsxs)("div",{className:eQ.sudokuWrapper,children:[(0,h.jsx)(ed,{}),(0,h.jsx)(eN,{containerRef:u}),(0,h.jsx)("div",{className:eQ.sudokuMain,children:(0,h.jsxs)("div",{className:eQ.sudokuMainWrapper,children:[(0,h.jsx)(eA,{attempt:i,hintPos:l,overlay:(0,h.jsx)(er,{}),onCellClick:f.handleCellClick}),(0,h.jsx)(H.Z,{open:n,container:u.current,keepMounted:!0,disableAutoFocus:!0,slotProps:eq,closeAfterTransition:!0,onClose:f.closeCheat,children:(0,h.jsxs)("div",{className:eQ.sudokuSolution,onClick:f.closeCheat,children:[(0,h.jsx)("span",{className:eQ.sudokuSolutionClose,children:"\xd7"}),(0,h.jsx)("div",{onClick:C.UW,children:(0,h.jsx)(eA,{attempt:s,hintPos:-1})})]})})]})})]}),(0,h.jsx)(eM,{size:c.BASE_2,container:u.current,cellPos:p.current,visible:m,onCancel:()=>B(!1),onConfirm:f.handleInput})]})},eQ=(0,C.ZC)({sudoku:{...eX,['&[data-theme="'.concat(K.Q2.light,'"]')]:{...eO},['&[data-theme="'.concat(K.Q2.darken,'"]')]:{...eG},display:"block",transform:"scale(1)",caretColor:"transparent",background:"transparent",'&[data-sudoku-size="4"]':{[c.fontSize]:"24px",[c.fontSizeBoardCell]:"20px",[c.fontSizeFinishedBanner]:"20px",[c.sizeBoardCell]:"48px"},['&[data-sudoku-status="'.concat(N.X.PENDING,'"]')]:{[u.colorBorderBoard2]:"transparent",[u.colorBorderBoard3]:"transparent"},['&[data-sudoku-status="'.concat(N.X.PAUSED,'"]')]:{[u.colorBorderBoard2]:"transparent",[u.colorBorderBoard3]:"transparent"},['&[data-sudoku-status="'.concat(N.X.END,'"]')]:{[u.colorBorderBoard2]:"transparent",[u.colorBorderBoard3]:"transparent"}},sudokuSolution:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",height:"100%",width:"100%",background:"#eddede"},sudokuSolutionClose:{position:"absolute",top:"0",right:"0",bottom:"unset",left:"unset",display:"inline-block",height:"48px",width:"48px",lineHeight:"48px",fontSize:"32px",textAlign:"center",verticalAlign:"center",color:"#333",cursor:"pointer"},sudokuWrapper:{display:"block",maxWidth:"90vw",margin:"auto"},sudokuMain:{display:"flex",justifyContent:"center",padding:"1rem",margin:"0"},sudokuMainWrapper:{display:"block",overflow:"auto",fontSize:"16px"}});class eH extends S.PureComponent{render(){let{storageKey:e,initialData:t}=this.props;return(0,h.jsx)(G,{storageKey:e,initialData:t,children:(0,h.jsx)(eK,{})})}}eH.displayName="SudokuGame",eH.propTypes={storageKey:B().string,initialData:B().any};var eV=eH}}]);