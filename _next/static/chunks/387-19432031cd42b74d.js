"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[387],{9171:function(t,e,n){n.d(e,{D:function(){return l}});var s=n(55402),a=n(95050),o=n(67294);let i=[["#ffbe0b","#fb5607","#ff006e","#8338ec","#3a86ff"],["#9b5de5","#f15bb5","#fee440","#00bbf9","#00f5d4"]],r=()=>{let t=i.length;return i[Math.min(t-1,Math.floor(Math.random()*t))]},l=()=>{let t=o.useRef(!1),e=o.useRef(null);o.useEffect(()=>(e.current=new a.Z,()=>{e.current=null}),[]);let n=(0,s.$0)(async()=>{if(null==e.current)return;let n=e.current,s=r(),a=window.screen.width<=900;t.current=!0;try{await n.addConfetti({confettiColors:s,confettiRadius:a?4:8,confettiNumber:a?100:300})}finally{t.current=!1}});return n}},34781:function(t,e,n){n.d(e,{p:function(){return r},X:function(){return a}}),(s=a||(a={}))[s.PENDING=1]="PENDING",s[s.RUNNING=2]="RUNNING",s[s.PAUSED=4]="PAUSED",s[s.END=8]="END";var s,a,o=n(76955),i=n(15658);class r extends o.jz{constructor(t){super();let e=new o.ZM(t.status),n=new o.ZM(t.elapsedTime),s=Date.now(),r=(t,e)=>{let o=Date.now();if(e===a.RUNNING){let t=o-s;n.setState(e=>e+t)}else t===a.PENDING&&n.setState(0);s=o};e.subscribe({next:(t,e)=>r(t,e),complete:()=>{}});let l=(0,i.iP)(()=>{let t=e.getSnapshot();r(t,t)});this.status$=e,this.elapsedTime$=n,this._disposables.push(new o.JT(l))}}},31387:function(t,e,n){n.d(e,{vk:function(){return z},oh:function(){return i},tR:function(){return tK},aK:function(){return tB},ZP:function(){return tF},vD:function(){return g},eK:function(){return k}});var s,a,o,i,r=n(85893),l=n(45697),u=n.n(l),c=n(67294),d=n(60459),h=n(55402),p=n(59976),f=n(15658),m=n(45684),x=n(13339);let b="2023-06-06";(s=o||(o={})).ERASE="ERASE",s.HINT="HINT",s.WRITE="WRITE",(a=i||(i={})).RESTART="RESTART",a.RESET="RESET",a.START="START",a.PAUSE="PAUSE",a.RESUME="RESUME",a.ACTIVE="ACTIVE",a.HINT="HINT",a.TOGGLE_CHEAT="TOGGLE_CHEAT",a.INPUT="INPUT";let S=c.createContext(null);S.displayName="SudokuContextType";let g=()=>{let t=c.useContext(S);return t.dispatch},k=t=>{let e=c.useContext(S),n=t(e);return(0,p.vc)(n)};var v=n(43118),_=n(34781);let y={},$={},T=t=>{let e=$[t];return void 0===e&&(e=new v.$X(t),$[t]=e),e},N=t=>{let e=y[t];return void 0===e&&(e=new v.wY({childMatrixWidth:t}),y[t]=e),e};function C(t,e,n){let{BOARD:s}=t;for(let t=0;t<s;++t)if(e[t]!==n[t])return!1;return!0}function E(t,e){if(e<0)return{r:-1,c:-1};let{MATRIX:n}=t;return{r:Math.floor(e/n),c:e%n}}let R=function(t){var e;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j,{SUDOKU_SIZE_SQRT:s=n.SUDOKU_SIZE_SQRT,difficulty:a=n.difficulty,score:i=n.score,radix:r=n.radix,activatedPos:l=null!==(e=n.activatedPos)&&void 0!==e?e:-1,gameTick:u=n.gameTick,puzzle:c=n.puzzle,solution:d=n.solution,instructions:h=n.instructions.slice(),elapsedTime:p=n.elapsedTime}=null!=t?t:{},{puzzle:f,solution:m}=null!=c&&null!=d?{puzzle:c,solution:d}:N(s).createSudoku(a/100),x=T(s),b=(0,v.s0)(x);(0,v._g)(f,b,x),function(t,e,n){for(let s of n)switch(s.type){case o.ERASE:{let{r:n,c:a}=s.payload,o=n*t.MATRIX+a;e[o]=-1;break}case o.WRITE:{let{r:n,c:a,v:o}=s.payload,i=n*t.MATRIX+a;e[i]=o}}}(x,b,h);let S=C(x,b,m)?_.X.END:p>0||!C(x,b,f)?_.X.PAUSED:_.X.PENDING;return{status:S,elapsedTime:p,SUDOKU_SIZE_SQRT:s,difficulty:a,radix:r,score:i,attempt:b,instructions:h,puzzle:f,solution:m,activatedPos:l,hintPos:-1,cheatVisible:!1,gameTick:u,attemptTick:0,hintTick:0}},j={status:_.X.PENDING,elapsedTime:0,SUDOKU_SIZE_SQRT:3,difficulty:20,radix:10,score:0,puzzle:null,solution:null,attempt:null,instructions:[],activatedPos:-1,hintPos:-1,cheatVisible:!1,gameTick:0,attemptTick:0,hintTick:0};var I=n(35369),w=n(73935);let D=(t,e,n,s)=>{let{BOARD:a}=t;for(let t=0;t<a;++t)if(-1===e[t])return t;for(let t=0;t<a;++t)if(-1===n[t]&&e[t]!==s[t])return t;return -1};class Z{constructor(t){var e=this;this.restart=()=>{let t=this.viewmodel,e=t.SUDOKU_SIZE_SQRT$.getSnapshot(),n=t.difficulty$.getSnapshot(),s=N(e),{puzzle:a,solution:o}=s.createSudoku(n),i=(0,v.s0)(s.size);(0,v._g)(a,i,s.size),t.status$.next(_.X.PENDING),t.gameTick$.setState(t=>t+1),t.puzzle$.next(a),t.solution$.next(o),t.attempt$.next(i),t.instructions$.next(I.aV.of()),t.hintPos$.next(-1),t.hintTick$.next(0),t.attemptTick$.next(0)},this.reset=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.viewmodel,{difficulty:s=n.difficulty$.getSnapshot(),SUDOKU_SIZE_SQRT:a=n.SUDOKU_SIZE_SQRT$.getSnapshot(),radix:o=n.radix$.getSnapshot()}=t,i=N(a),{puzzle:r,solution:l}=i.createSudoku(s/100),u=(0,v.s0)(i.size);(0,v._g)(r,u,i.size),n.status$.next(_.X.PENDING),n.SUDOKU_SIZE_SQRT$.next(a),n.difficulty$.next(s),n.radix$.next(o),n.puzzle$.next(r),n.solution$.next(l),n.attempt$.next(u),n.instructions$.next(I.aV.of()),n.hintPos$.next(-1),n.cheatVisible$.next(!1),n.gameTick$.setState(t=>t+1),n.attemptTick$.next(0),n.hintTick$.next(0)},this.start=()=>{let t=this.viewmodel;t.status$.getSnapshot()===_.X.PENDING&&t.status$.next(_.X.RUNNING)},this.pause=()=>{let t=this.viewmodel;t.status$.getSnapshot()===_.X.RUNNING&&t.status$.next(_.X.PAUSED)},this.resume=()=>{let t=this.viewmodel;t.status$.getSnapshot()===_.X.PAUSED&&t.status$.next(_.X.RUNNING)},this._end=()=>{let t=this.viewmodel;if(t.status$.getSnapshot()===_.X.RUNNING){let e=t.SUDOKU_SIZE_SQRT$.getSnapshot(),n=T(e),s=t.attempt$.getSnapshot(),a=t.solution$.getSnapshot();if(!C(n,s,a))return;let o=0,i=t.difficulty$.getSnapshot(),r=t.elapsedTime$.getSnapshot(),l=e**4*1e3;if(r<l){let t=e**4*i/100;o=(l-r)*t/1e3}let u=Math.max(5,Math.round(o));t.status$.next(_.X.END),t.score$.setState(t=>t+u)}},this.activePos=(t,e)=>{let n=this.viewmodel,s=T(n.SUDOKU_SIZE_SQRT$.getSnapshot()),a=t*s.MATRIX+e;n.activatedPos$.next(a)},this.hint=()=>{let t=this.viewmodel,e=t.SUDOKU_SIZE_SQRT$.getSnapshot(),n=t.puzzle$.getSnapshot(),s=t.solution$.getSnapshot(),a=t.attempt$.getSnapshot(),i=t.activatedPos$.getSnapshot(),r=T(e),l=-1===i||-1!==n[i]?D(r,a,n,s):i,u=E(r,l);t.hintPos$.next(l),t.hintTick$.setState(t=>t+1),t.instructions$.setState(t=>t.push({type:o.HINT,payload:u,timestamp:new Date().toISOString()}))},this.toggleCheatVisibility=t=>{let e=this.viewmodel;e.cheatVisible$.setState(e=>null!=t?t:!e)},this.input=t=>{let e=this.viewmodel;if(e.status$.getSnapshot()!==_.X.RUNNING)return;let n=e.SUDOKU_SIZE_SQRT$.getSnapshot(),{size:s}=N(n);if(!Number.isInteger(t)||t<-1||t>=s.BOARD)return;let a=e.activatedPos$.getSnapshot();if(-1===a)return;let i=e.puzzle$.getSnapshot();if(-1!==i[a])return;let r=e.attempt$.getSnapshot();if(r[a]===t)return;let l=(0,v.s0)(s);(0,v._g)(r,l,s),l[a]=t;let{r:u,c}=E(s,a);e.attempt$.next(l),e.attemptTick$.setState(t=>t+1),e.hintPos$.setState(t=>a===t?-1:t),e.instructions$.setState(e=>e.push({type:o.WRITE,payload:{r:u,c,v:t},timestamp:new Date().toISOString()}))},this.viewmodel=t.viewmodel,this.viewmodel.attempt$.subscribeStateChange(()=>this._end())}}class U extends _.p{constructor(t){super(t),this.getSnapshot=()=>({status:this.status$.getSnapshot(),elapsedTime:this.elapsedTime$.getSnapshot(),SUDOKU_SIZE_SQRT:this.SUDOKU_SIZE_SQRT$.getSnapshot(),difficulty:this.difficulty$.getSnapshot(),radix:this.radix$.getSnapshot(),score:this.score$.getSnapshot(),puzzle:this.puzzle$.getSnapshot(),solution:this.solution$.getSnapshot(),attempt:this.attempt$.getSnapshot(),instructions:Array.from(this.instructions$.getSnapshot()),activatedPos:this.activatedPos$.getSnapshot(),hintPos:this.hintPos$.getSnapshot(),cheatVisible:this.cheatVisible$.getSnapshot(),gameTick:this.gameTick$.getSnapshot(),attemptTick:this.attemptTick$.getSnapshot(),hintTick:this.hintTick$.getSnapshot()}),this.dispatch=t=>{let e=P[t.type];e?(0,w.unstable_batchedUpdates)(()=>{e(this._controller,t)}):console.error(this.constructor.name,"Bad action:",t)},this.SUDOKU_SIZE_SQRT$=new p.ZM(t.SUDOKU_SIZE_SQRT),this.difficulty$=new p.ZM(t.difficulty),this.radix$=new p.ZM(t.radix),this.score$=new p.ZM(t.score),this.puzzle$=new p.ZM(t.puzzle),this.solution$=new p.ZM(t.solution),this.attempt$=new p.ZM(t.attempt),this.instructions$=new p.ZM(I.aV.of(...t.instructions)),this.activatedPos$=new p.ZM(t.activatedPos),this.hintPos$=new p.ZM(t.hintPos),this.cheatVisible$=new p.ZM(t.cheatVisible),this.gameTick$=new p.ZM(t.gameTick),this.attemptTick$=new p.ZM(t.attemptTick),this.hintTick$=new p.ZM(t.hintTick);let e=new Z({viewmodel:this});this._controller=e}}let P={[i.RESTART]:t=>{t.restart()},[i.RESET]:(t,e)=>{let n=e.payload;t.reset(n)},[i.START]:t=>{t.start()},[i.PAUSE]:t=>{t.pause()},[i.RESUME]:t=>{t.resume()},[i.ACTIVE]:(t,e)=>{let{r:n,c:s}=e.payload;t.activePos(n,s)},[i.HINT]:t=>{t.hint()},[i.TOGGLE_CHEAT]:(t,e)=>{let n=e.payload;t.toggleCheatVisibility(n)},[i.INPUT]:(t,e)=>{let n=e.payload;t.input(n)}},z=t=>{let{storageKey:e,LoadingComponent:n=m.gb}=t,[s,a]=c.useState(void 0),o=c.useMemo(()=>e?(0,x.Yu)(e):void 0,[e]),i=c.useRef(t.initialData);return(c.useEffect(()=>{t();async function t(){let t=await i.current;if(o){let e=await o.load();null==e||e.version!==b?a(new U(R(t))):a(new U(R({...e.data,...t})))}else a(new U(R(t)))}},[o]),c.useEffect(()=>{if(s)return()=>{console.log("[waw] unmounting sudoku viewmodel."),s.dispose()}},[s]),s)?(0,r.jsxs)(c.Fragment,{children:[(0,r.jsx)(S.Provider,{value:s,children:t.children}),o&&(0,r.jsx)(A,{viewmodel:s,storage:o,storageKey:e})]}):(0,r.jsx)(n,{})},A=t=>{let{viewmodel:e,storage:n,storageKey:s}=t,a=(0,p.sD)(e,["SUDOKU_SIZE_SQRT$","difficulty$","radix$","score$","puzzle$","solution$","instructions$","activatedPos$","gameTick$"]),o=c.useMemo(()=>(0,d.P2)(()=>{let t={elapsedTime:e.elapsedTime$.getSnapshot(),SUDOKU_SIZE_SQRT:e.SUDOKU_SIZE_SQRT$.getSnapshot(),difficulty:e.difficulty$.getSnapshot(),radix:e.radix$.getSnapshot(),score:e.score$.getSnapshot(),puzzle:e.puzzle$.getSnapshot(),solution:e.solution$.getSnapshot(),instructions:Array.from(e.instructions$.getSnapshot()),activatedPos:e.activatedPos$.getSnapshot(),gameTick:e.gameTick$.getSnapshot()};return f.kg.log("saving ".concat(s,". data:"),t),n.save({version:b,data:t})},200),[e,n,s]);return c.useEffect(()=>void o(),[o,a]),(0,h.i7)(()=>o.flushSync(),[],!1),(0,r.jsx)(c.Fragment,{})};var M=n(6260),X=n(72908),G=n(78262),O=n(9581),K=n(98271),Q=n(31425),H=n(83321);let V=t=>{let{radix:e,container:n,initialValue:s,visible:a,label:o,onCancel:i,onConfirm:l}=t,[u,d]=c.useState(s);return c.useEffect(()=>d(s),[s,a]),(0,r.jsxs)(G.Z,{container:n,open:a,onClose:i,"aria-labelledby":"sudoku-input-dialog",children:[(0,r.jsx)(O.Z,{children:(0,r.jsx)(K.Z,{autoFocus:!0,margin:"dense",label:o,type:e<=10?"number":"input",fullWidth:!0,value:u,onChange:t=>d(t.target.value),onFocus:t=>t.target.select(),onKeyDown:t=>{"Enter"===t.key&&l(u)}})}),(0,r.jsxs)(Q.Z,{children:[(0,r.jsx)(H.Z,{color:"inherit",onClick:i,children:"Cancel"}),(0,r.jsx)(H.Z,{color:"primary",onClick:()=>l(u),children:"Confirm"})]})]})};var W=n(18872),B=n(9171),F=n(41616),L=n(70655),q=n(1849);let Y=c.memo(()=>{let t=g(),e=k(t=>t.status$),n=(0,B.D)(),s=(0,h.rc)(e);c.useEffect(()=>{s!==e&&e===_.X.END&&n()},[s,e,n]);let a=c.useMemo(()=>({start:()=>t({type:i.START}),resume:()=>t({type:i.RESUME}),restart:()=>t({type:i.RESTART})}),[t]);switch(e){case _.X.PENDING:return(0,r.jsx)("div",{className:J.overlay,children:(0,r.jsx)(H.Z,{className:J.button,variant:"contained",color:"primary",startIcon:(0,r.jsx)(L.Z,{}),onClick:a.start,children:"Start"})});case _.X.PAUSED:return(0,r.jsx)("div",{className:J.overlay,children:(0,r.jsx)(H.Z,{className:J.button,variant:"contained",color:"primary",startIcon:(0,r.jsx)(F.Z,{}),onClick:a.resume,children:"Resume"})});case _.X.END:return(0,r.jsx)("div",{className:J.overlay,children:(0,r.jsxs)("div",{className:J.finishedBanner,children:[(0,r.jsx)("p",{children:"You win \uD83C\uDF89\uD83C\uDF89\uD83C\uDF89"}),(0,r.jsx)(H.Z,{className:J.button,variant:"contained",color:"primary",startIcon:(0,r.jsx)(q.Z,{}),onClick:a.restart,children:"New"})]})});default:return null}}),J={overlay:(0,W.iv)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:"100%",userSelect:"none"}),confettiCanvas:(0,W.iv)({position:"absolute",top:0,bottom:0,left:0,right:0,width:"100%",height:"100%"}),button:(0,W.iv)({"&&, &&:hover":{boxShadow:"4px 4px 16px 0px hsl(0deg 0% 0% / 0.75)"}}),finishedBanner:(0,W.iv)({position:"relative",display:"flex",flexDirection:"column",justifyContent:"center",padding:0,margin:0,fontSize:32}),playerName:(0,W.iv)({color:"#e200e2"})};var tt=n(45018),te=n(55819),tn=n(45929);let ts=()=>{let t=g(),e=k(t=>t.status$),n=k(t=>t.SUDOKU_SIZE_SQRT$),s=k(t=>t.difficulty$),a=k(t=>t.radix$),o=e===_.X.PENDING,l=c.useMemo(()=>({onSizeChange:e=>{t({type:i.RESET,payload:{SUDOKU_SIZE_SQRT:Number(e.target.value)}})},onRadixChange:e=>{t({type:i.RESET,payload:{radix:Number(e.target.value)}})},onDifficultyChange:(e,n)=>{t({type:i.RESET,payload:{difficulty:n}})}}),[t]);return(0,r.jsxs)("div",{className:ta.settings,children:[(0,r.jsxs)("div",{className:ta.item,children:[(0,r.jsx)("span",{children:"Size:"}),(0,r.jsxs)(tt.Z,{variant:"standard",value:n,disabled:!o,onChange:l.onSizeChange,children:[(0,r.jsx)(te.Z,{value:2,children:"4x4"}),(0,r.jsx)(te.Z,{value:3,children:"9x9"}),(0,r.jsx)(te.Z,{value:4,children:"16x16"})]})]}),(0,r.jsxs)("div",{className:ta.item,children:[(0,r.jsx)("span",{children:"Radix:"}),(0,r.jsxs)(tt.Z,{variant:"standard",value:a,disabled:!o,onChange:l.onRadixChange,children:[(0,r.jsx)(te.Z,{value:10,children:"Decimal (x10)"}),(0,r.jsx)(te.Z,{value:16,children:"Hexadecimal (x16)"})]})]}),(0,r.jsxs)("div",{className:(0,W.cx)(ta.item,ta.difficulty),children:[(0,r.jsx)("span",{children:"Difficulty:"}),(0,r.jsx)(tn.ZP,{value:s,disabled:!o,step:1,min:0,max:100,valueLabelDisplay:"auto","aria-labelledby":"sudoku-difficulty",onChange:l.onDifficultyChange})]})]})},ta=(0,f.ZC)({settings:{display:"block",maxWidth:"min(90vw, 400px)",margin:"auto"},item:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"flex-start",margin:"1rem 0","& > *":{marginRight:"1rem"}},difficulty:{flexWrap:"nowrap","& > span":{"&:first-child":{flex:"0 0 auto"}}}});var to=n(75303),ti=n(53247),tr=n(22961),tl=n(76997),tu=n(93946),tc=n(27484),td=n.n(tc),th=n(1646),tp=n.n(th),tf=n(65464);td().extend(tp());let tm=c.memo(()=>{let t=k(t=>t.elapsedTime$),e=td().duration(t).format("HH:mm:ss");return(0,r.jsxs)("div",{className:tx.elapsedTime,children:[(0,r.jsx)(tl.Z,{title:"Time used",children:(0,r.jsx)(tf.Z,{})}),"\xa0\xa0",(0,r.jsx)("span",{children:e})]},"elapsed-time")}),tx=(0,f.ZC)({elapsedTime:{flex:"0 1 auto",display:"flex",alignItems:"center",fontFamily:"Consolas, 'Source Code Pro', 'Roboto Mono', monospace, sans-serif",color:"#595959",userSelect:"none"}});td().extend(tp());let tb=t=>{let{containerRef:e}=t,n=g(),s=k(t=>t.status$),a=k(t=>t.score$),[o,l]=c.useState(!1),u=c.useMemo(()=>({showCheat:()=>{n({type:i.TOGGLE_CHEAT,payload:!0})},restartGame:()=>{l(!1),n({type:i.RESTART})},pauseGame:()=>{n({type:i.PAUSE})},hint:()=>{n({type:i.HINT})},closeRestartDialog:()=>{l(!1)}}),[n]);return(0,r.jsxs)("div",{className:tS.toolbar,children:[(0,r.jsxs)("div",{className:(0,W.cx)(tS.item,tS.buttons),children:[(0,r.jsx)(H.Z,{variant:"contained",color:"inherit",startIcon:(0,r.jsx)(q.Z,{}),onClick:()=>s===_.X.PENDING||s===_.X.END?u.restartGame():l(!0),children:"New"}),(0,r.jsx)(H.Z,{variant:"contained",color:"inherit",disabled:s!==_.X.RUNNING,startIcon:(0,r.jsx)(to.Z,{}),onClick:u.hint,children:"HINT"}),(0,r.jsx)(H.Z,{variant:"contained",color:"secondary",disabled:s!==_.X.RUNNING,startIcon:(0,r.jsx)(tr.Z,{}),onClick:u.showCheat,children:"Cheat"})]}),(0,r.jsxs)("div",{className:(0,W.cx)(tS.item,tS.state),children:[(0,r.jsx)("div",{className:tS.stateButtons,children:s===_.X.RUNNING&&(0,r.jsx)(tl.Z,{title:"Pause",children:(0,r.jsx)(tu.Z,{color:"primary",onClick:u.pauseGame,children:(0,r.jsx)(ti.Z,{})})})},"state-buttons"),(0,r.jsx)(tm,{}),(0,r.jsxs)("div",{className:tS.score,children:["Score: ",a]},"score")]}),(0,r.jsxs)(G.Z,{container:e.current,open:o,onClose:u.closeRestartDialog,"aria-labelledby":"confirm-to-restart",children:[(0,r.jsx)(O.Z,{children:"Are you sure you want to start a new game?"}),(0,r.jsxs)(Q.Z,{children:[(0,r.jsx)(H.Z,{color:"inherit",onClick:u.closeRestartDialog,children:"Cancel"}),(0,r.jsx)(H.Z,{color:"primary",onClick:u.restartGame,children:"Confirm"})]})]})]})};tb.propTypes={containerRef:u().any.isRequired};let tS=(0,f.ZC)({toolbar:{display:"block",maxWidth:"min(90vw, 400px)",margin:"auto"},item:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"flex-start",margin:"1rem 0","> *":{marginRight:"1rem"}},buttons:{justifyContent:"space-around","> button":{margin:"0 4px"}},state:{justifyContent:"center",margin:"2rem 0 0",height:"48px"},stateButtons:{flex:"0 1 auto",display:"flex",alignItems:"center",justifyContent:"center",margin:"0",userSelect:"none"},score:{flex:"0 1 auto",color:"green",overflow:"hidden",textOverflow:"ellipsis",fontFamily:"Consolas, 'Source Code Pro', 'Roboto Mono', monospace, sans-serif"}});var tg=n(82729);let tk=t=>{let{SUDOKU_SIZE_SQRT:e}=t,n=e*e,s=[];for(let t=e,a=-1;t<n;t+=e,++a){let e="calc(".concat(t," * var(--sudoku__board-cell-size) + ").concat(t+a,"px)");s.push((0,r.jsx)("div",{className:(0,W.cx)(t_.boarder,t_.horizontalBoarder),style:{top:e}},"h-".concat(t))),s.push((0,r.jsx)("div",{className:(0,W.cx)(t_.boarder,t_.verticalBorder),style:{left:e}},"v-".concat(t)))}return(0,r.jsx)(c.Fragment,{children:s})},tv=c.memo(tk);tk.propTypes={SUDOKU_SIZE_SQRT:u().number.isRequired};let t_=(0,f.ZC)({boarder:{position:"absolute",boxSizing:"content-box",background:"var(--sudoku__board-border-thickness-color)"},horizontalBoarder:{left:"0",right:"0",bottom:"unset",width:"calc(100% + 2px)",height:"var(--sudoku__board-border-thickness)"},verticalBorder:{top:"0",bottom:"0",right:"unset",height:"calc(100% + 2px)",width:"var(--sudoku__board-border-thickness)"}});function ty(t,e){let{BOARD:n,MATRIX:s,BASE_1:a,BASE_3:o}=t,i=Array(n).fill(!1),r=Array(s).fill(0);for(let t=0;t<n;t+=s){r.fill(0);for(let n=t,a=t+s;n<a;++n){let t=e[n];-1!==t&&(r[t]+=1)}for(let n=t,a=t+s;n<a;++n){let t=e[n];-1!==t&&r[t]>1&&(i[n]=!0)}}for(let t=0;t<s;++t){r.fill(0);for(let a=t;a<n;a+=s){let t=e[a];-1!==t&&(r[t]+=1)}for(let a=t;a<n;a+=s){let t=e[a];-1!==t&&r[t]>1&&(i[a]=!0)}}for(let t=0;t<n;t+=o)for(let n=0;n<s;n+=a){r.fill(0);for(let i=t,l=t+o;i<l;i+=s)for(let t=i+n,s=t+a;t<s;++t){let n=e[t];-1!==n&&(r[n]+=1)}for(let l=t,u=t+o;l<u;l+=s)for(let t=l+n,s=t+a;t<s;++t){let n=e[t];-1!==n&&r[n]>1&&(i[t]=!0)}}return i}function t$(){let t=(0,tg._)(["\n        --sudoku__board-bg: #d3d8e2;\n        --sudoku__board-cell-bg: #fff;\n        --sudoku__board-cell-size: 32px;\n        --sudoku__board-cell-font-size: 16px;\n        --sudoku__board-cell-border-thickness: 1px;\n        --sudoku__board-border-thickness: 2px;\n        --sudoku__board-border-thickness-color: #111;\n        --sudoku__board-border-thickness-plus: 3px;\n        --sudoku__board-border-thickness-plus-color: #111;\n        position: relative;\n        box-sizing: content-box;\n        display: inline-block;\n        width: fit-content;\n        padding: 0;\n        border: var(--sudoku__board-border-thickness-plus) solid var(--sudoku__board-border-thickness-plus-color);\n        margin: 0;\n        background-color: var(--sudoku__board-bg);\n        font-family: Consolas, 'Source Code Pro', 'Roboto Mono', monospace, sans-serif;\n        [data-sudoku-size=\"4x4\"] && {\n          --sudoku__board-cell-size: 48px;\n          --sudoku__board-cell-font-size: 20px;\n        }\n      "]);return t$=function(){return t},t}function tT(){let t=(0,tg._)(['\n        z-index: 2;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        display: none;\n        width: 100%;\n        height: 100%;\n        overflow: hidden;\n        background: linear-gradient(\n          45deg,\n          hsl(30deg 20% 90% / 0.2),\n          hsl(210deg 20% 100% / 0.3)\n        );\n        [data-sudoku-status="','"] && {\n          display: block;\n          backdrop-filter: blur(1px);\n        }\n        [data-sudoku-status="','"] && {\n          display: none;\n        }\n        [data-sudoku-status="','"] && {\n          display: block;\n          backdrop-filter: blur(16px);\n        }\n        [data-sudoku-status="','"] && {\n          display: block;\n          backdrop-filter: blur(4px);\n          color: #ff00ff;\n          animation: 1s 0s '," ease-in-out;\n        }\n      "]);return tT=function(){return t},t}function tN(){let t=(0,tg._)(['\n        display: flex;\n        flex-direction: column;\n        font-size: var(--sudoku__board-cell-font-size);\n        [data-sudoku-status="','"] && {\n          border-color: transparent;\n        }\n        [data-sudoku-status="','"] && {\n          border-color: transparent;\n        }\n        [data-sudoku-status="','"] && {\n          border-color: transparent;\n        }\n      ']);return tN=function(){return t},t}function tC(){let t=(0,tg._)(["\n        display: flex;\n      "]);return tC=function(){return t},t}function tE(){let t=(0,tg._)(["\n        flex: 0 0 auto;\n        overflow: hidden;\n        display: inline-block;\n        box-sizing: border-box;\n        width: var(--sudoku__board-cell-size);\n        height: var(--sudoku__board-cell-size);\n        margin: var(--sudoku__board-cell-border-thickness) 0 0 var(--sudoku__board-cell-border-thickness);\n        background-color: var(--sudoku__board-cell-bg);\n        user-select: none;\n        cursor: pointer;\n      "]);return tE=function(){return t},t}function tR(){let t=(0,tg._)(['\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        box-sizing: border-box;\n        height: 100%;\n        width: 100%;\n        padding: 4px;\n        margin: 0;\n        [data-sudoku-hint="true"] && {\n          animation: 0.5s 0s '," linear 1 both normal;\n        }\n      "]);return tR=function(){return t},t}function tj(){let t=(0,tg._)(["\n        && {\n          margin-left: 0;\n        }\n      "]);return tj=function(){return t},t}function tI(){let t=(0,tg._)(["\n        && {\n          margin-left: var(--sudoku__board-border-thickness);\n        }\n      "]);return tI=function(){return t},t}function tw(){let t=(0,tg._)(["\n        && {\n          margin-top: 0;\n        }\n      "]);return tw=function(){return t},t}function tD(){let t=(0,tg._)(["\n        && {\n          margin-top: var(--sudoku__board-border-thickness);\n        }\n      "]);return tD=function(){return t},t}function tZ(){let t=(0,tg._)(["\n        && {\n          color: #333;\n        }\n      "]);return tZ=function(){return t},t}function tU(){let t=(0,tg._)(["\n        && {\n          color: #ffa500;\n        }\n      "]);return tU=function(){return t},t}function tP(){let t=(0,tg._)(["\n        && {\n          color: #0080ff;\n        }\n      "]);return tP=function(){return t},t}function tz(){let t=(0,tg._)(["\n        && {\n          background: #ff6a00;\n        }\n      "]);return tz=function(){return t},t}function tA(){let t=(0,tg._)(["\n        && {\n          background: #6eb2f7;\n        }\n      "]);return tA=function(){return t},t}function tM(){let t=(0,tg._)(["\n        && {\n          background: #e2ebf3;\n        }\n      "]);return tM=function(){return t},t}function tX(){let t=(0,tg._)(["\n        && {\n          background: #bbdefb;\n        }\n      "]);return tX=function(){return t},t}function tG(){let t=(0,tg._)(["\n    0% {\n      transform: translate(0, -100px);\n    }\n    80% {\n      transform: translate(0, 20px);\n    }\n    90% {\n      transform: translate(0, -10px);\n    }\n    95% {\n      transform: translate(0, 2px);\n    }\n    100% {\n      transform: translate(0, 0);\n    }\n  "]);return tG=function(){return t},t}function tO(){let t=(0,tg._)(["\n    0% {\n      transform: scale(1) rotate(0deg);\n    }\n\n    50% {\n      transform: scale(2) rotate(200deg);\n    }\n\n    100% {\n      transform: scale(1.3) rotate(360deg);\n    }\n  "]);return tO=function(){return t},t}let tK=t=>{let e;let{attempt:n,hintPos:s,className:a,overlay:o,onCellClick:l}=t,u=g(),d=k(t=>t.SUDOKU_SIZE_SQRT$),p=k(t=>t.puzzle$),f=k(t=>t.solution$),m=k(t=>t.radix$),x=k(t=>t.activatedPos$),b=k(t=>t.hintTick$),S=c.useMemo(()=>new v.$X(d),[d]),_=tQ(),y={onCellClick:(0,h.$0)((t,e)=>{null!=l&&l(t,e),u({type:i.ACTIVE,payload:{r:t,c:e}})})},$=(0,v.iN)(S),{r:T,c:N}=E(S,x),C=$[x],R=-1===x?-1:n[x],{r:j=-1,c:I=-1}=E(S,s),w=-1===s?-1:f[s];{let t=-1!==s&&-1===p[s];if(t){let t=n[s];n[s]=f[s],e=ty(S,n),n[s]=t}else e=ty(S,n)}let D=[];for(let t=0,s=0;t<S.MATRIX;++t){let a=[];for(let o=0;o<S.MATRIX;++o,++s){let i=n[s],l=t===j&&o===I,u=t===T&&o===N,c=!u&&(t===T||o===N||$[s]===C),h=-1!==R&&i===R&&!c&&!u,f=!!e[s],x=l?w:i,S=(0,r.jsx)("span",{className:(0,W.cx)(_.boardCell,{[_.boardCellLeftSeamless]:0===o,[_.boardCellLeft]:o>0&&o%d==0,[_.boardCellTopSeamless]:0===t,[_.boardCellTop]:t>0&&t%d==0,[_.boardCellPreset]:-1!==i,[_.boardCellAttempt]:i!==p[s],[_.boardCellDuplicated]:!l&&f,[_.boardCellHint]:l,[_.boardCellActivated]:!f&&u,[_.boardCellRelated]:!f&&c,[_.boardCellSame]:!f&&h}),"data-sudoku-hint":l,children:(0,r.jsx)("span",{className:_.boardCellContent,onClick:()=>y.onCellClick(t,o),children:-1===x?"":(x+1).toString(m)})},l?"".concat(o,"-hint-").concat(b):o);a.push(S)}D.push((0,r.jsx)("div",{className:_.boardRow,children:a},t))}return(0,r.jsxs)("div",{className:"".concat(_.container," ").concat(a),children:[(0,r.jsx)("div",{className:_.overlay,children:o},"overlay"),(0,r.jsx)(tv,{SUDOKU_SIZE_SQRT:d}),(0,r.jsx)("div",{className:_.boardWrapper,children:D},"wrapper")]})};tK.propTypes={attempt:u().array.isRequired,className:u().string,overlay:u().node,onCellClick:u().func};let tQ=()=>c.useMemo(()=>({container:(0,W.iv)(t$()),overlay:(0,W.iv)(tT(),_.X.PENDING,_.X.RUNNING,_.X.PAUSED,_.X.END,tH.finished),boardWrapper:(0,W.iv)(tN(),_.X.PENDING,_.X.PAUSED,_.X.END),boardRow:(0,W.iv)(tC()),boardCell:(0,W.iv)(tE()),boardCellContent:(0,W.iv)(tR(),tH.hint),boardCellLeftSeamless:(0,W.iv)(tj()),boardCellLeft:(0,W.iv)(tI()),boardCellTopSeamless:(0,W.iv)(tw()),boardCellTop:(0,W.iv)(tD()),boardCellPreset:(0,W.iv)(tZ()),boardCellHint:(0,W.iv)(tU()),boardCellAttempt:(0,W.iv)(tP()),boardCellDuplicated:(0,W.iv)(tz()),boardCellActivated:(0,W.iv)(tA()),boardCellRelated:(0,W.iv)(tM()),boardCellSame:(0,W.iv)(tX())}),[]),tH={finished:(0,W.F4)(tG()),hint:(0,W.F4)(tO())},tV=()=>{let t=g(),e=k(t=>t.status$),n=k(t=>t.SUDOKU_SIZE_SQRT$),s=k(t=>t.puzzle$),a=k(t=>t.solution$),o=k(t=>t.attempt$),l=k(t=>t.radix$),u=k(t=>t.hintPos$),d=k(t=>t.cheatVisible$),p=T(n),m=c.useRef(null),x=c.useRef(""),[b,S]=c.useState(!1),v={closeCheat:(0,h.$0)(()=>{t({type:i.TOGGLE_CHEAT,payload:!1})}),handleInput:(0,h.$0)(e=>{S(!1),x.current=e;let n=/^\s*$/.test(e)?0:Number.parseInt(e,l);Number.isInteger(n)&&t({type:i.INPUT,payload:n-1})}),handleCellClick:(0,h.$0)((t,e)=>{if(-1===t||-1===e)return;let n=t*p.MATRIX+e;-1===s[n]&&S(!0)})};(0,h.TK)(()=>t({type:i.PAUSE}),[t]),(0,M.Z)(n>=2&&n<=7,"`childMatrixSize` must be an integer in the range [2, 7].");let _=n*n;return(0,r.jsxs)("div",{ref:m,className:tW.sudoku,"data-sudoku-status":e,"data-sudoku-size":"".concat(_,"x").concat(_),children:[(0,r.jsxs)("div",{className:tW.sudokuWrapper,children:[(0,r.jsx)(ts,{}),(0,r.jsx)(tb,{containerRef:m}),(0,r.jsx)("div",{className:tW.sudokuMain,children:(0,r.jsxs)("div",{className:tW.sudokuMainWrapper,children:[(0,r.jsx)(tK,{className:tW.sudokuBoardPuzzle,attempt:o,hintPos:u,overlay:(0,r.jsx)(Y,{}),onCellClick:v.handleCellClick}),(0,r.jsx)(X.Z,{open:d,container:m.current,keepMounted:!0,disableAutoFocus:!0,BackdropProps:{timeout:500},closeAfterTransition:!0,onClose:v.closeCheat,children:(0,r.jsxs)("div",{className:tW.sudokuSolution,onClick:v.closeCheat,children:[(0,r.jsx)("span",{className:tW.sudokuSolutionClose,children:"\xd7"}),(0,r.jsx)("div",{onClick:f.UW,children:(0,r.jsx)(tK,{attempt:a,hintPos:-1})})]})})]})})]}),(0,r.jsx)(V,{radix:l,container:m.current,initialValue:x.current,visible:b,label:"A ".concat(10===l?"decimal":"hexadecimal"," number"),onCancel:()=>S(!1),onConfirm:v.handleInput})]})},tW=(0,f.ZC)({sudoku:{display:"block",transform:"scale(1)",caretColor:"transparent",background:"transparent","--sudoku__font-size":"18px",'&[data-sudoku-size="4x4"]':{"--sudoku__font-size":"24px"}},sudokuSolution:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",height:"100%",width:"100%",background:"#eddede"},sudokuSolutionClose:{position:"absolute",top:"0",right:"0",bottom:"unset",left:"unset",display:"inline-block",height:"48px",width:"48px",lineHeight:"48px",fontSize:"32px",textAlign:"center",verticalAlign:"center",color:"#333",cursor:"pointer"},sudokuWrapper:{display:"block",maxWidth:"90vw",margin:"auto"},sudokuMain:{display:"flex",justifyContent:"center",padding:"1rem",margin:"0"},sudokuMainWrapper:{display:"block",overflow:"auto",fontSize:"16px"},sudokuBoardPuzzle:{['[data-sudoku-status="'.concat(_.X.PENDING,'"] &&')]:{"--sudoku__board-border-thickness-color":"transparent","--sudoku__board-border-thickness-plus-color":"transparent"},["'[data-sudoku-status=\"".concat(_.X.PAUSED,"\"] &&'")]:{"--sudoku__board-border-thickness-color":"transparent","--sudoku__board-border-thickness-plus-color":"transparent"},["'[data-sudoku-status=\"".concat(_.X.END,"\"] &&'")]:{"--sudoku__board-border-thickness-color":"transparent","--sudoku__board-border-thickness-plus-color":"transparent"}}}),tB=t=>(0,r.jsx)(z,{storageKey:t.storageKey,initialData:t.initialData,children:(0,r.jsx)(tV,{})});tB.propTypes={storageKey:u().string,initialData:u().any};var tF=tB}}]);