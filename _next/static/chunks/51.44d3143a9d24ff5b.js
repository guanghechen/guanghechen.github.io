"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[51,102,40,388],{70102:function(t,e,r){r.r(e),r.d(e,{SimpleTextareaEditor:function(){return o}});var n=r(82729),l=r(16829);function i(){let t=(0,n._)(["\n    padding: 1rem;\n    border: 1px solid #DDDDDD;\n    outline: none;\n    line-height: inherit;\n    font-size: inherit;\n    resize: none;\n    transition: all 0.30s ease-in-out;\n\n    &:focus {\n      box-shadow: 0 0 5px rgba(81, 203, 238, 1);\n      border: 1px solid rgba(81, 203, 238, 1);\n    }\n  "]);return i=function(){return t},t}let o=l.Z.textarea(i())},36040:function(t,e,r){r.r(e),r.d(e,{SimpleTexturalPreviewer:function(){return s}});var n=r(82729),l=r(85893),i=r(16829);function o(){let t=(0,n._)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #083ca6;\n  background: #f6f6f6;\n"]);return o=function(){return t},t}r(67294);let u=i.Z.div(o()),s=t=>{let{value:e,children:r,...n}=t;return(0,l.jsx)(u,{...n,children:(0,l.jsx)("pre",{children:(0,l.jsx)("code",{children:t.value})})})}},15051:function(t,e,r){r.r(e),r.d(e,{SudokuSolverComponent:function(){return A}});var n=r(82729),l=r(85893),i=r(43118),o=r(16829),u=r(70102),s=r(36040),f=r(34388),a=r(67294);function h(){let t=(0,n._)(["\n  display: flex;\n  width: 100%;\n  line-height: 1.5;\n  font-size: 1rem;\n"]);return h=function(){return t},t}function c(){let t=(0,n._)(["\n  flex: 1 1 0;\n"]);return c=function(){return t},t}function _(){let t=(0,n._)(["\n  flex: 1 1 0;\n  padding: 0.5rem 0;\n"]);return _=function(){return t},t}let d=new i.M({childMatrixWidth:3}),A=t=>{let{puzzle:e,solution:r,onPuzzleChange:n}=t,{size:i}=d,[o,u]=a.useState(()=>m(i,e)),s=a.useCallback(t=>{let e=t.target.value;u(e);let r=function(t,e){let r=t.split(/\s*\n\s*/g).filter(t=>t.length>0).map(t=>t.split(/\s*[,\s]\s*/g).filter(t=>t.length>0).map(t=>Number(t))).flat();return(0,f.checkPuzzle)(r,e)?r:null}(e,i);null!==r&&d.solve(r,null)&&n(r)},[i,n]);a.useEffect(()=>u(m(i,e)),[i,e]);let h=a.useMemo(()=>m(i,r),[i,r]);return(0,l.jsxs)(g,{children:[(0,l.jsx)(p,{value:o,onChange:s}),(0,l.jsx)(v,{value:h})]})};function m(t,e){let r=(0,i.OA)(e,t);return r.map(t=>t.map(t=>String(t).padStart(2)).join(" ")).join("\n")}let g=o.Z.div(h()),p=(0,o.Z)(u.SimpleTextareaEditor)(c()),v=(0,o.Z)(s.SimpleTexturalPreviewer)(_())},34388:function(t,e,r){r.r(e),r.d(e,{SudokuCreator:function(){return n.wY},SudokuSolver:function(){return n.M},checkPuzzle:function(){return l},createSudokuBoardData:function(){return n.s0}});var n=r(43118);function l(t,e){if(t.length!==e.BOARD)return!1;for(let r of t)if(!Number.isInteger(r)||r<-1||r>=e.MATRIX)return!1;return!0}},66420:function(t,e,r){function n(t){let e=Math.random()*t>>0;return e===t?t-1:e}function l(t,e=0,r=t.length){if(e<0&&(e=0),r>t.length&&(r=t.length),e+1>=r)return;let l=r-e;for(let i=l-1,o=r-1;i>0;--i,--o){let r=n(i)+e,l=t[r];t[r]=t[o],t[o]=l}}r.d(e,{Er:function(){return l},Iy:function(){return n},ZP:function(){return l}})},43118:function(t,e,r){r.d(e,{wY:function(){return c},$X:function(){return i},M:function(){return h},_g:function(){return s},iN:function(){return a},s0:function(){return o},OA:function(){return f}});var n=r(66420);class l{_count;_row;_col;_L;_R;_U;_D;_sz;constructor(t){let{MAX_N:e}=t;this._count=Array(e),this._row=Array(e),this._col=Array(e),this._L=Array(e),this._R=Array(e),this._U=Array(e),this._D=Array(e),this._sz=0}destroy(){this._sz=0,this._count.length=0,this._row.length=0,this._col.length=0,this._L.length=0,this._R.length=0,this._U.length=0,this._D.length=0}init(t){let{_L:e,_R:r,_U:n,_D:l,_count:i}=this,o=t+1;for(let t=0;t<o;++t)e[t]=t-1,r[t]=t+1,n[t]=t,l[t]=t;r[t]=0,e[0]=t,i.fill(0,0,o),this._sz=o}addRow(t,e){let{_count:r,_row:n,_col:l,_L:i,_R:o,_U:u,_D:s}=this,{_sz:f}=this,a=f;for(let a=0;a<e.length;++a,++f){let h=e[a];n[f]=t,l[f]=h,r[h]+=1,i[f]=f-1,o[f]=f+1,s[f]=h,s[u[h]]=f,u[f]=u[h],u[h]=f}o[f-1]=a,i[a]=f-1,this._sz=f}solve(){if(0===this._sz)return null;let t=[];return this._algorithmX(0,t)?t:null}_algorithmX(t,e){let{_count:r,_row:n,_col:l,_L:i,_R:o,_D:u}=this;if(0===o[0])return e.length=t,!0;let s=o[0];for(let t=o[0];0!==t;t=o[t])r[t]<r[s]&&(s=t);this._removeColumn(s);for(let r=u[s];r!==s;r=u[r]){e[t]=n[r];for(let t=o[r];t!==r;t=o[t])this._removeColumn(l[t]);if(this._algorithmX(t+1,e))return!0;for(let t=i[r];t!==r;t=i[t])this._restoreColumn(l[t])}return this._restoreColumn(s),!1}_removeColumn(t){let{_count:e,_col:r,_L:n,_R:l,_U:i,_D:o}=this;n[l[t]]=n[t],l[n[t]]=l[t];for(let n=o[t];n!==t;n=o[n])for(let t=l[n];t!==n;t=l[t])i[o[t]]=i[t],o[i[t]]=o[t],e[r[t]]-=1}_restoreColumn(t){let{_count:e,_col:r,_L:n,_R:l,_U:i,_D:o}=this;for(let l=i[t];l!==t;l=i[l])for(let t=n[l];t!==l;t=n[t])e[r[t]]+=1,i[o[t]]=t,o[i[t]]=t;n[l[t]]=t,l[n[t]]=t}}class i{BASE_1;BASE_2;BASE_3;BASE_4;MATRIX_RANK;MATRIX;BOARD;constructor(t){let e=t*t,r=e*t;this.MATRIX_RANK=this.BASE_1=t,this.MATRIX=this.BASE_2=e,this.BASE_3=r,this.BOARD=this.BASE_4=r*t}}let o=t=>Array(t.BOARD),u=(t,e,r)=>{t.fill(e,0,r.BOARD)},s=(t,e,r)=>{let{BOARD:n}=r;for(let r=0;r<n;++r)e[r]=t[r]},f=(t,e)=>{let r=[],{MATRIX:n}=e;for(let e=0,l=0;e<n;++e){let i=[];r[e]=i;for(let e=0;e<n;++e,++l)i[e]=t[l]}return r};function a(t){let{BASE_1:e,BASE_3:r,MATRIX:n,BOARD:l}=t,i=Array(l);for(let t=0,o=0;t<l;t+=r)for(let l=t,u=t+r;l<u;l+=n)for(let r=0;r<n;r+=e){let n=o+e;i.fill(t+r,o,n),o=n}return i}class h{size;DL_TOTAL_COLUMNS;dlx;matCodeMap;constraints=[,,,,];constructor(t){let{childMatrixWidth:e}=t,r=new i(e),n=4*r.BOARD,o=r.BOARD*r.MATRIX,u=n*o+r.MATRIX+1,s=new l({MAX_N:u});this.size=r,this.DL_TOTAL_COLUMNS=n,this.dlx=s,this.matCodeMap=function(t){let{BASE_1:e,BASE_3:r,MATRIX:n,BOARD:l}=t,i=Array(l);for(let t=0,o=0;t<l;t+=r,o+=e)for(let l=t,u=t+r;l<u;l+=n)for(let t=l,r=l+n,u=o;t<r;t+=e)i.fill(u++,t,t+e);return i}(r)}solve(t,e){let{size:r,DL_TOTAL_COLUMNS:n,constraints:l,matCodeMap:i,dlx:o}=this,{MATRIX:u,BOARD:s}=r;o.init(n);for(let e=0,r=0;e<u;++e)for(let n=0;n<u;++n,++r){let f=t[r],a=i[r],h=-1===f?0:f,c=-1===f?u:f+1;for(let t=h;t<c;++t){l[0]=0*s+r+1,l[1]=1*s+(e*u+t)+1,l[2]=2*s+(n*u+t)+1,l[3]=3*s+(a*u+t)+1;let i=r*u+t+1;o.addRow(i,l)}}let f=o.solve();if(null===f)return!1;if(null!==e)for(let t of f){let r=t-1,n=r%u,l=r/u>>0;e[l]=n}return!0}}class c{size;solver;matCoordinateMap;gridCodes;candidates;availableNums;tmpBoard;difficulty;constructor(t){let{childMatrixWidth:e,difficulty:r=.2}=t,n=new i(e),l=new h({childMatrixWidth:e}),u=Array(n.BOARD);for(let t=0;t<n.BOARD;++t)u[t]=t;this.size=n,this.solver=l,this.matCoordinateMap=a(n),this.gridCodes=u,this.difficulty=this._resolveDifficulty(r),this.candidates=Array(n.MATRIX),this.availableNums=Array(n.MATRIX),this.tmpBoard=o(n)}createSudoku(t){null!=t&&(this.difficulty=this._resolveDifficulty(t));let e=this._createSolution(),r=this._createPuzzle(e);return{puzzle:r,solution:e}}_createSolution(){let{size:t,candidates:e,gridCodes:r,solver:l,tmpBoard:i}=this;u(i,-1,t),(0,n.Er)(r);let s=Math.round((.3*Math.random()+.2)*t.BOARD),f=Math.max(t.BASE_3,Math.min(t.BOARD,s));for(let t=0;t<f;++t){let l=r[t],o=this._collectCandidates(i,l);if(o<1)continue;let u=(0,n.Iy)(o),s=e[u];i[l]=s}let a=o(t);for(let t=0;t<f;++t){let e=r[t];if(-1!==e){if(l.solve(i,a))return a;i[e]=-1}}throw Error("[createSolution] This is impossible!")}_createPuzzle(t){let{size:e,candidates:r,gridCodes:l,solver:i,difficulty:u}=this,f=o(e);s(t,f,e),(0,n.Er)(l);let a=Math.floor(e.BOARD*u);for(let e=0;e<a;++e){let n=l[e],o=this._collectCandidates(f,n),u=0;for(;u<o&&(f[n]=r[u],!i.solve(f,null));++u);f[n]=u<o?t[n]:-1}return f}_collectCandidates(t,e){let{size:r,matCoordinateMap:n,candidates:l,availableNums:i}=this,{MATRIX_RANK:o,MATRIX:u,BOARD:s}=r,f=e%u,a=e-f,h=n[e];i.fill(!0);for(let e=a,r=a+u;e<r;++e){let r=t[e];-1!==r&&(i[r]=!1)}for(let e=f;e<s;e+=u){let r=t[e];-1!==r&&(i[r]=!1)}for(let e=h,r=0;r<o;++r,e+=u)for(let r=e,n=e+o;r<n;++r){let e=t[r];-1!==e&&(i[e]=!1)}let c=0;for(let t=0;t<u;++t)i[t]&&(l[c++]=t);return c}_resolveDifficulty(t){return .8*Math.max(0,Math.min(1,t))+.2}}}}]);