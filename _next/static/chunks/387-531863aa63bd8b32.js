"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[387],{9171:function(e,t,n){n.d(t,{D:function(){return l}});var s=n(4844),r=n(95050),a=n(67294);let o=[["#ffbe0b","#fb5607","#ff006e","#8338ec","#3a86ff"],["#9b5de5","#f15bb5","#fee440","#00bbf9","#00f5d4"]],i=()=>{let e=o.length;return o[Math.min(e-1,Math.floor(Math.random()*e))]},l=()=>{let e=a.useRef(!1),t=a.useRef(null);a.useEffect(()=>(t.current=new r.Z,()=>{t.current=null}),[]);let n=(0,s.$0)(async()=>{if(null==t.current)return;let n=t.current,s=i(),r=window.screen.width<=900;e.current=!0;try{await n.addConfetti({confettiColors:s,confettiRadius:r?4:8,confettiNumber:r?100:300})}finally{e.current=!1}});return n}},4844:function(e,t,n){n.d(t,{NY:function(){return a},$0:function(){return o},rc:function(){return i},nu:function(){return l}});var s=n(67294),r=n(26692);function a(e,t){let n=s.useRef(0),a=s.useRef(t);return(0,r.Z)(a.current,t)||(n.current+=1),a.current=t,s.useMemo(e,[n.current])}function o(e){let t=s.useRef(e);return s.useLayoutEffect(()=>{t.current=e}),s.useCallback(function(){for(var e=arguments.length,n=Array(e),s=0;s<e;s++)n[s]=arguments[s];let r=t.current;return r(...n)},[])}function i(e){let t=s.useRef(e);return s.useEffect(()=>{t.current=e},[e]),t.current}function l(e){let[t,n]=s.useState(e);return s.useEffect(()=>n(e),[e]),[t,n]}},34781:function(e,t,n){n.d(t,{p:function(){return i},X:function(){return r}}),(s=r||(r={}))[s.PENDING=1]="PENDING",s[s.RUNNING=2]="RUNNING",s[s.PAUSED=4]="PAUSED",s[s.END=8]="END";var s,r,a=n(95252),o=n(98501);class i extends a.jz{constructor(e){super();let t=new a.ZM(e.status),n=new a.ZM(e.elapsedTime),s=Date.now(),i=(e,t)=>{let a=Date.now();if(t===r.RUNNING){let e=a-s;n.setState(t=>t+e)}else e===r.PENDING&&n.setState(0);s=a};t.subscribe({next:(e,t)=>{i(e,t)},error:()=>{},complete:()=>{}});let l=(0,o.iP)(()=>{let e=t.getSnapshot();i(e,e)});this.status$=t,this.elapsedTime$=n,this._disposables.push(new a.JT(l))}}},31387:function(e,t,n){n.d(t,{vk:function(){return D},oh:function(){return o},tR:function(){return eG},aK:function(){return eH},ZP:function(){return eL},vD:function(){return b},eK:function(){return S}});var s,r,a,o,i=n(85893),l=n(45697),u=n.n(l),c=n(67294),d=n(26692),h=n(31819),p=n(45684),f=n(13339);let m="2023-06-06";(s=a||(a={})).ERASE="ERASE",s.HINT="HINT",s.WRITE="WRITE",(r=o||(o={})).RESTART="RESTART",r.RESET="RESET",r.START="START",r.PAUSE="PAUSE",r.RESUME="RESUME",r.ACTIVE="ACTIVE",r.HINT="HINT",r.TOGGLE_CHEAT_VISIBILITY="TOGGLE_CHEAT_VISIBILITY",r.INPUT="INPUT";let x=c.createContext(null);x.displayName="SudokuContextType";let b=()=>{let e=c.useContext(x);return e.dispatch},S=e=>{let t=c.useContext(x),n=e(t);return(0,h.vc)(n)};var g=n(43118),k=n(34781);let v={},_={},$=e=>{let t=_[e];return void 0===t&&(t=new g.$X(e),_[e]=t),t},y=e=>{let t=v[e];return void 0===t&&(t=new g.wY({childMatrixWidth:e}),v[e]=t),t};function T(e,t,n){let{BOARD:s}=e;for(let e=0;e<s;++e)if(t[e]!==n[e])return!1;return!0}function N(e,t){if(t<0)return{r:-1,c:-1};let{MATRIX:n}=e;return{r:Math.floor(t/n),c:t%n}}let C=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E,{SUDOKU_SIZE_SQRT:s=n.SUDOKU_SIZE_SQRT,difficulty:r=n.difficulty,score:o=n.score,radix:i=n.radix,activatedPos:l=null!==(t=n.activatedPos)&&void 0!==t?t:-1,gameTick:u=n.gameTick,puzzle:c=n.puzzle,solution:d=n.solution,instructions:h=n.instructions.slice(),elapsedTime:p=n.elapsedTime}=null!=e?e:{},{puzzle:f,solution:m}=null!=c&&null!=d?{puzzle:c,solution:d}:y(s).createSudoku(r/100),x=$(s),b=(0,g.s0)(x);(0,g._g)(f,b,x),function(e,t,n){for(let s of n)switch(s.type){case a.ERASE:{let{r:n,c:r}=s.payload,a=n*e.MATRIX+r;t[a]=-1;break}case a.WRITE:{let{r:n,c:r,v:a}=s.payload,o=n*e.MATRIX+r;t[o]=a}}}(x,b,h);let S=T(x,b,m)?k.X.END:p>0||!T(x,b,f)?k.X.PAUSED:k.X.PENDING;return{status:S,elapsedTime:p,SUDOKU_SIZE_SQRT:s,difficulty:r,radix:i,score:o,attempt:b,instructions:h,puzzle:f,solution:m,activatedPos:l,hintPos:-1,cheatVisible:!1,gameTick:u,attemptTick:0,hintTick:0}},E={status:k.X.PENDING,elapsedTime:0,SUDOKU_SIZE_SQRT:3,difficulty:20,radix:10,score:0,puzzle:null,solution:null,attempt:null,instructions:[],activatedPos:-1,hintPos:-1,cheatVisible:!1,gameTick:0,attemptTick:0,hintTick:0};var I=n(35369);let R=(e,t,n,s)=>{let{BOARD:r}=e;for(let e=0;e<r;++e)if(-1===t[e])return e;for(let e=0;e<r;++e)if(-1===n[e]&&t[e]!==s[e])return e;return -1};class j{constructor(e){var t=this;this.restart=()=>{let e=this.viewmodel,t=e.SUDOKU_SIZE_SQRT$.getSnapshot(),n=e.difficulty$.getSnapshot(),s=y(t),{puzzle:r,solution:a}=s.createSudoku(n),o=(0,g.s0)(s.size);(0,g._g)(r,o,s.size),e.status$.next(k.X.PENDING),e.gameTick$.setState(e=>e+1),e.puzzle$.next(r),e.solution$.next(a),e.attempt$.next(o),e.instructions$.next(I.aV.of()),e.hintPos$.next(-1),e.hintTick$.next(0),e.attemptTick$.next(0)},this.reset=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.viewmodel,{difficulty:s=n.difficulty$.getSnapshot(),SUDOKU_SIZE_SQRT:r=n.SUDOKU_SIZE_SQRT$.getSnapshot(),radix:a=n.radix$.getSnapshot()}=e,o=y(r),{puzzle:i,solution:l}=o.createSudoku(s/100),u=(0,g.s0)(o.size);(0,g._g)(i,u,o.size),n.status$.next(k.X.PENDING),n.SUDOKU_SIZE_SQRT$.next(r),n.difficulty$.next(s),n.radix$.next(a),n.puzzle$.next(i),n.solution$.next(l),n.attempt$.next(u),n.instructions$.next(I.aV.of()),n.hintPos$.next(-1),n.cheatVisible$.next(!1),n.gameTick$.setState(e=>e+1),n.attemptTick$.next(0),n.hintTick$.next(0)},this.start=()=>{let e=this.viewmodel;e.status$.getSnapshot()===k.X.PENDING&&e.status$.next(k.X.RUNNING)},this.pause=()=>{let e=this.viewmodel;e.status$.getSnapshot()===k.X.RUNNING&&e.status$.next(k.X.PAUSED)},this.resume=()=>{let e=this.viewmodel;e.status$.getSnapshot()===k.X.PAUSED&&e.status$.next(k.X.RUNNING)},this._end=()=>{let e=this.viewmodel;if(e.status$.getSnapshot()===k.X.RUNNING){let t=e.SUDOKU_SIZE_SQRT$.getSnapshot(),n=$(t),s=e.attempt$.getSnapshot(),r=e.solution$.getSnapshot();if(!T(n,s,r))return;let a=0,o=e.difficulty$.getSnapshot(),i=e.elapsedTime$.getSnapshot(),l=t**4*1e3;if(i<l){let e=t**4*o/100;a=(l-i)*e/1e3}let u=Math.max(5,Math.round(a));e.status$.next(k.X.END),e.score$.setState(e=>e+u)}},this.activePos=e=>{let{r:t,c:n}=e,s=this.viewmodel,r=$(s.SUDOKU_SIZE_SQRT$.getSnapshot()),a=t*r.MATRIX+n;s.activatedPos$.next(a)},this.hint=()=>{let e=this.viewmodel,t=e.SUDOKU_SIZE_SQRT$.getSnapshot(),n=e.puzzle$.getSnapshot(),s=e.solution$.getSnapshot(),r=e.attempt$.getSnapshot(),o=e.activatedPos$.getSnapshot(),i=$(t),l=-1===o||-1!==n[o]?R(i,r,n,s):o,u=N(i,l);e.hintPos$.next(l),e.hintTick$.setState(e=>e+1),e.instructions$.setState(e=>e.push({type:a.HINT,payload:u,timestamp:new Date().toISOString()}))},this.toggleCheatVisibility=e=>{let t=this.viewmodel;t.cheatVisible$.setState(t=>null!=e?e:!t)},this.input=e=>{let t=this.viewmodel;if(t.status$.getSnapshot()!==k.X.RUNNING)return;let n=t.SUDOKU_SIZE_SQRT$.getSnapshot(),{size:s}=y(n);if(!Number.isInteger(e)||e<-1||e>=s.BOARD)return;let r=t.activatedPos$.getSnapshot();if(-1===r)return;let o=t.puzzle$.getSnapshot();if(-1!==o[r])return;let i=t.attempt$.getSnapshot();if(i[r]===e)return;let l=(0,g.s0)(s);(0,g._g)(i,l,s),l[r]=e;let{r:u,c}=N(s,r);t.attempt$.next(l),t.attemptTick$.setState(e=>e+1),t.hintPos$.setState(e=>r===e?-1:e),t.instructions$.setState(t=>t.push({type:a.WRITE,payload:{r:u,c,v:e},timestamp:new Date().toISOString()}))},this.viewmodel=e.viewmodel,this.viewmodel.attempt$.subscribeStateChange(()=>this._end())}}class w extends k.p{_consume(e){let t=this._controller;switch(e.type){case o.RESTART:t.restart();break;case o.RESET:t.reset(e.payload);break;case o.START:t.start();break;case o.PAUSE:t.pause();break;case o.RESUME:t.resume();break;case o.ACTIVE:t.activePos(e.payload);break;case o.HINT:t.hint();break;case o.TOGGLE_CHEAT_VISIBILITY:t.toggleCheatVisibility(e.payload);break;case o.INPUT:t.input(e.payload);break;default:console.error(this.constructor.name,"Bad action:",e)}}constructor(e){super(e),this.getSnapshot=()=>({status:this.status$.getSnapshot(),elapsedTime:this.elapsedTime$.getSnapshot(),SUDOKU_SIZE_SQRT:this.SUDOKU_SIZE_SQRT$.getSnapshot(),difficulty:this.difficulty$.getSnapshot(),radix:this.radix$.getSnapshot(),score:this.score$.getSnapshot(),puzzle:this.puzzle$.getSnapshot(),solution:this.solution$.getSnapshot(),attempt:this.attempt$.getSnapshot(),instructions:Array.from(this.instructions$.getSnapshot()),activatedPos:this.activatedPos$.getSnapshot(),hintPos:this.hintPos$.getSnapshot(),cheatVisible:this.cheatVisible$.getSnapshot(),gameTick:this.gameTick$.getSnapshot(),attemptTick:this.attemptTick$.getSnapshot(),hintTick:this.hintTick$.getSnapshot()}),this.SUDOKU_SIZE_SQRT$=new h.ZM(e.SUDOKU_SIZE_SQRT),this.difficulty$=new h.ZM(e.difficulty),this.radix$=new h.ZM(e.radix),this.score$=new h.ZM(e.score),this.puzzle$=new h.ZM(e.puzzle),this.solution$=new h.ZM(e.solution),this.attempt$=new h.ZM(e.attempt),this.instructions$=new h.ZM(I.aV.of(...e.instructions)),this.activatedPos$=new h.ZM(e.activatedPos),this.hintPos$=new h.ZM(e.hintPos),this.cheatVisible$=new h.ZM(e.cheatVisible),this.gameTick$=new h.ZM(e.gameTick),this.attemptTick$=new h.ZM(e.attemptTick),this.hintTick$=new h.ZM(e.hintTick);let t=new j({viewmodel:this});this._controller=t}}let D=e=>{let{storageKey:t,LoadingComponent:n=p.gb}=e,[s,r]=c.useState(void 0),a=c.useMemo(()=>t?(0,f.Yu)(t):void 0,[t]),o=c.useRef(e.initialData);return(c.useEffect(()=>{e();async function e(){let e=await o.current;if(a){let t=await a.load();null==t||t.version!==m?r(new w(C(e))):r(new w(C({...t.data,...e})))}else r(new w(C(e)))}},[a]),c.useEffect(()=>{if(s)return()=>{console.log("unmounting sudoku viewmodel."),s.dispose()}},[s]),s)?(0,i.jsxs)(c.Fragment,{children:[(0,i.jsx)(x.Provider,{value:s,children:e.children}),a&&(0,i.jsx)(Z,{viewmodel:s,storage:a})]}):(0,i.jsx)(n,{})},Z=e=>{let{viewmodel:t,storage:n}=e,s=(0,h.L7)(t,["elapsedTime$","SUDOKU_SIZE_SQRT$","difficulty$","radix$","score$","puzzle$","solution$","instructions$","activatedPos$","gameTick$"],e=>({elapsedTime:e.elapsedTime$,SUDOKU_SIZE_SQRT:e.SUDOKU_SIZE_SQRT$,difficulty:e.difficulty$,radix:e.radix$,score:e.score$,puzzle:e.puzzle$,solution:e.solution$,instructions:Array.from(e.instructions$),activatedPos:e.activatedPos$,gameTick:e.gameTick$}),d.X);return c.useEffect(()=>{n.save({version:m,data:s})},[s,n]),(0,i.jsx)(c.Fragment,{})};var U=n(6260),P=n(4844),z=n(98501),A=n(72908),M=n(78262),X=n(9581),G=n(98271),O=n(31425),K=n(83321);let V=e=>{let{radix:t,container:n,initialValue:s,visible:r,label:a,onCancel:o,onConfirm:l}=e,[u,d]=c.useState(s);return c.useEffect(()=>d(s),[s,r]),(0,i.jsxs)(M.Z,{container:n,open:r,onClose:o,"aria-labelledby":"sudoku-input-dialog",children:[(0,i.jsx)(X.Z,{children:(0,i.jsx)(G.Z,{autoFocus:!0,margin:"dense",label:a,type:t<=10?"number":"input",fullWidth:!0,value:u,onChange:e=>d(e.target.value),onFocus:e=>e.target.select(),onKeyDown:e=>{"Enter"===e.key&&l(u)}})}),(0,i.jsxs)(O.Z,{children:[(0,i.jsx)(K.Z,{color:"inherit",onClick:o,children:"Cancel"}),(0,i.jsx)(K.Z,{color:"primary",onClick:()=>l(u),children:"Confirm"})]})]})};var Q=n(18872),H=n(9171),L=n(41616),B=n(70655),W=n(1849);let F=c.memo(()=>{let e=b(),t=S(e=>e.status$),n=(0,H.D)(),s=(0,P.rc)(t);c.useEffect(()=>{s!==t&&t===k.X.END&&n()},[s,t,n]);let r=c.useMemo(()=>({start:()=>e({type:o.START}),resume:()=>e({type:o.RESUME}),restart:()=>e({type:o.RESTART})}),[e]);switch(t){case k.X.PENDING:return(0,i.jsx)("div",{className:Y.overlay,children:(0,i.jsx)(K.Z,{className:Y.button,variant:"contained",color:"primary",startIcon:(0,i.jsx)(B.Z,{}),onClick:r.start,children:"Start"})});case k.X.PAUSED:return(0,i.jsx)("div",{className:Y.overlay,children:(0,i.jsx)(K.Z,{className:Y.button,variant:"contained",color:"primary",startIcon:(0,i.jsx)(L.Z,{}),onClick:r.resume,children:"Resume"})});case k.X.END:return(0,i.jsx)("div",{className:Y.overlay,children:(0,i.jsxs)("div",{className:Y.finishedBanner,children:[(0,i.jsx)("p",{children:"You win \uD83C\uDF89\uD83C\uDF89\uD83C\uDF89"}),(0,i.jsx)(K.Z,{className:Y.button,variant:"contained",color:"primary",startIcon:(0,i.jsx)(W.Z,{}),onClick:r.restart,children:"New"})]})});default:return null}}),Y={overlay:(0,Q.iv)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:"100%",userSelect:"none"}),confettiCanvas:(0,Q.iv)({position:"absolute",top:0,bottom:0,left:0,right:0,width:"100%",height:"100%"}),button:(0,Q.iv)({"&&, &&:hover":{boxShadow:"4px 4px 16px 0px hsl(0deg 0% 0% / 0.75)"}}),finishedBanner:(0,Q.iv)({position:"relative",display:"flex",flexDirection:"column",justifyContent:"center",padding:0,margin:0,fontSize:32}),playerName:(0,Q.iv)({color:"#e200e2"})};var q=n(45018),J=n(55819),ee=n(45929);let et=()=>{let e=b(),t=S(e=>e.status$),n=S(e=>e.SUDOKU_SIZE_SQRT$),s=S(e=>e.difficulty$),r=S(e=>e.radix$),a=t===k.X.PENDING,l=c.useMemo(()=>({onSizeChange:t=>{e({type:o.RESET,payload:{SUDOKU_SIZE_SQRT:Number(t.target.value)}})},onRadixChange:t=>{e({type:o.RESET,payload:{radix:Number(t.target.value)}})},onDifficultyChange:(t,n)=>{e({type:o.RESET,payload:{difficulty:n}})}}),[e]);return(0,i.jsxs)("div",{className:en.settings,children:[(0,i.jsxs)("div",{className:en.item,children:[(0,i.jsx)("span",{children:"Size:"}),(0,i.jsxs)(q.Z,{variant:"standard",value:n,disabled:!a,onChange:l.onSizeChange,children:[(0,i.jsx)(J.Z,{value:2,children:"4x4"}),(0,i.jsx)(J.Z,{value:3,children:"9x9"}),(0,i.jsx)(J.Z,{value:4,children:"16x16"})]})]}),(0,i.jsxs)("div",{className:en.item,children:[(0,i.jsx)("span",{children:"Radix:"}),(0,i.jsxs)(q.Z,{variant:"standard",value:r,disabled:!a,onChange:l.onRadixChange,children:[(0,i.jsx)(J.Z,{value:10,children:"Decimal (x10)"}),(0,i.jsx)(J.Z,{value:16,children:"Hexadecimal (x16)"})]})]}),(0,i.jsxs)("div",{className:(0,Q.cx)(en.item,en.difficulty),children:[(0,i.jsx)("span",{children:"Difficulty:"}),(0,i.jsx)(ee.ZP,{value:s,disabled:!a,step:1,min:0,max:100,valueLabelDisplay:"auto","aria-labelledby":"sudoku-difficulty",onChange:l.onDifficultyChange})]})]})},en=(0,z.ZC)({settings:{display:"block",maxWidth:"min(90vw, 400px)",margin:"auto"},item:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"flex-start",margin:"1rem 0","& > *":{marginRight:"1rem"}},difficulty:{flexWrap:"nowrap","& > span":{"&:first-child":{flex:"0 0 auto"}}}});var es=n(75303),er=n(53247),ea=n(22961),eo=n(76997),ei=n(93946),el=n(27484),eu=n.n(el),ec=n(1646),ed=n.n(ec),eh=n(65464);eu().extend(ed());let ep=c.memo(()=>{let e=S(e=>e.elapsedTime$),t=eu().duration(e).format("HH:mm:ss");return(0,i.jsxs)("div",{className:ef.elapsedTime,children:[(0,i.jsx)(eo.Z,{title:"Time used",children:(0,i.jsx)(eh.Z,{})}),"\xa0\xa0",(0,i.jsx)("span",{children:t})]},"elapsed-time")}),ef=(0,z.ZC)({elapsedTime:{flex:"0 1 auto",display:"flex",alignItems:"center",fontFamily:"Consolas, 'Source Code Pro', 'Roboto Mono', monospace, sans-serif",color:"#595959",userSelect:"none"}});eu().extend(ed());let em=e=>{let{containerRef:t}=e,n=b(),s=S(e=>e.status$),r=S(e=>e.score$),[a,l]=c.useState(!1),u=c.useMemo(()=>({showCheat:()=>{n({type:o.TOGGLE_CHEAT_VISIBILITY,payload:!0})},restartGame:()=>{l(!1),n({type:o.RESTART})},pauseGame:()=>{n({type:o.PAUSE})},hint:()=>{n({type:o.HINT})},closeRestartDialog:()=>{l(!1)}}),[n]);return(0,i.jsxs)("div",{className:ex.toolbar,children:[(0,i.jsxs)("div",{className:(0,Q.cx)(ex.item,ex.buttons),children:[(0,i.jsx)(K.Z,{variant:"contained",color:"inherit",startIcon:(0,i.jsx)(W.Z,{}),onClick:()=>s===k.X.PENDING||s===k.X.END?u.restartGame():l(!0),children:"New"}),(0,i.jsx)(K.Z,{variant:"contained",color:"inherit",disabled:s!==k.X.RUNNING,startIcon:(0,i.jsx)(es.Z,{}),onClick:u.hint,children:"HINT"}),(0,i.jsx)(K.Z,{variant:"contained",color:"secondary",disabled:s!==k.X.RUNNING,startIcon:(0,i.jsx)(ea.Z,{}),onClick:u.showCheat,children:"Cheat"})]}),(0,i.jsxs)("div",{className:(0,Q.cx)(ex.item,ex.state),children:[(0,i.jsx)("div",{className:ex.stateButtons,children:s===k.X.RUNNING&&(0,i.jsx)(eo.Z,{title:"Pause",children:(0,i.jsx)(ei.Z,{color:"primary",onClick:u.pauseGame,children:(0,i.jsx)(er.Z,{})})})},"state-buttons"),(0,i.jsx)(ep,{}),(0,i.jsxs)("div",{className:ex.score,children:["Score: ",r]},"score")]}),(0,i.jsxs)(M.Z,{container:t.current,open:a,onClose:u.closeRestartDialog,"aria-labelledby":"confirm-to-restart",children:[(0,i.jsx)(X.Z,{children:"Are you sure you want to start a new game?"}),(0,i.jsxs)(O.Z,{children:[(0,i.jsx)(K.Z,{color:"inherit",onClick:u.closeRestartDialog,children:"Cancel"}),(0,i.jsx)(K.Z,{color:"primary",onClick:u.restartGame,children:"Confirm"})]})]})]})};em.propTypes={containerRef:u().any.isRequired};let ex=(0,z.ZC)({toolbar:{display:"block",maxWidth:"min(90vw, 400px)",margin:"auto"},item:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"flex-start",margin:"1rem 0","> *":{marginRight:"1rem"}},buttons:{justifyContent:"space-around","> button":{margin:"0 4px"}},state:{justifyContent:"center",margin:"2rem 0 0",height:"48px"},stateButtons:{flex:"0 1 auto",display:"flex",alignItems:"center",justifyContent:"center",margin:"0",userSelect:"none"},score:{flex:"0 1 auto",color:"green",overflow:"hidden",textOverflow:"ellipsis",fontFamily:"Consolas, 'Source Code Pro', 'Roboto Mono', monospace, sans-serif"}});var eb=n(82729);let eS=e=>{let{SUDOKU_SIZE_SQRT:t}=e,n=t*t,s=[];for(let e=t,r=-1;e<n;e+=t,++r){let t="calc(".concat(e," * var(--sudoku__board-cell-size) + ").concat(e+r,"px)");s.push((0,i.jsx)("div",{className:(0,Q.cx)(ek.boarder,ek.horizontalBoarder),style:{top:t}},"h-".concat(e))),s.push((0,i.jsx)("div",{className:(0,Q.cx)(ek.boarder,ek.verticalBorder),style:{left:t}},"v-".concat(e)))}return(0,i.jsx)(c.Fragment,{children:s})},eg=c.memo(eS);eS.propTypes={SUDOKU_SIZE_SQRT:u().number.isRequired};let ek=(0,z.ZC)({boarder:{position:"absolute",boxSizing:"content-box",background:"var(--sudoku__board-border-thickness-color)"},horizontalBoarder:{left:"0",right:"0",bottom:"unset",width:"calc(100% + 2px)",height:"var(--sudoku__board-border-thickness)"},verticalBorder:{top:"0",bottom:"0",right:"unset",height:"calc(100% + 2px)",width:"var(--sudoku__board-border-thickness)"}});function ev(e,t){let{BOARD:n,MATRIX:s,BASE_1:r,BASE_3:a}=e,o=Array(n).fill(!1),i=Array(s).fill(0);for(let e=0;e<n;e+=s){i.fill(0);for(let n=e,r=e+s;n<r;++n){let e=t[n];-1!==e&&(i[e]+=1)}for(let n=e,r=e+s;n<r;++n){let e=t[n];-1!==e&&i[e]>1&&(o[n]=!0)}}for(let e=0;e<s;++e){i.fill(0);for(let r=e;r<n;r+=s){let e=t[r];-1!==e&&(i[e]+=1)}for(let r=e;r<n;r+=s){let e=t[r];-1!==e&&i[e]>1&&(o[r]=!0)}}for(let e=0;e<n;e+=a)for(let n=0;n<s;n+=r){i.fill(0);for(let o=e,l=e+a;o<l;o+=s)for(let e=o+n,s=e+r;e<s;++e){let n=t[e];-1!==n&&(i[n]+=1)}for(let l=e,u=e+a;l<u;l+=s)for(let e=l+n,s=e+r;e<s;++e){let n=t[e];-1!==n&&i[n]>1&&(o[e]=!0)}}return o}function e_(){let e=(0,eb._)(["\n        --sudoku__board-bg: #d3d8e2;\n        --sudoku__board-cell-bg: #fff;\n        --sudoku__board-cell-size: 32px;\n        --sudoku__board-cell-font-size: 16px;\n        --sudoku__board-cell-border-thickness: 1px;\n        --sudoku__board-border-thickness: 2px;\n        --sudoku__board-border-thickness-color: #111;\n        --sudoku__board-border-thickness-plus: 3px;\n        --sudoku__board-border-thickness-plus-color: #111;\n        position: relative;\n        box-sizing: content-box;\n        display: inline-block;\n        width: fit-content;\n        padding: 0;\n        border: var(--sudoku__board-border-thickness-plus) solid var(--sudoku__board-border-thickness-plus-color);\n        margin: 0;\n        background-color: var(--sudoku__board-bg);\n        font-family: Consolas, 'Source Code Pro', 'Roboto Mono', monospace, sans-serif;\n        [data-sudoku-size=\"4x4\"] && {\n          --sudoku__board-cell-size: 48px;\n          --sudoku__board-cell-font-size: 20px;\n        }\n      "]);return e_=function(){return e},e}function e$(){let e=(0,eb._)(['\n        z-index: 2;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        display: none;\n        width: 100%;\n        height: 100%;\n        overflow: hidden;\n        background: linear-gradient(\n          45deg,\n          hsl(30deg 20% 90% / 0.2),\n          hsl(210deg 20% 100% / 0.3)\n        );\n        [data-sudoku-status="','"] && {\n          display: block;\n          backdrop-filter: blur(1px);\n        }\n        [data-sudoku-status="','"] && {\n          display: none;\n        }\n        [data-sudoku-status="','"] && {\n          display: block;\n          backdrop-filter: blur(16px);\n        }\n        [data-sudoku-status="','"] && {\n          display: block;\n          backdrop-filter: blur(4px);\n          color: #ff00ff;\n          animation: 1s 0s '," ease-in-out;\n        }\n      "]);return e$=function(){return e},e}function ey(){let e=(0,eb._)(['\n        display: flex;\n        flex-direction: column;\n        font-size: var(--sudoku__board-cell-font-size);\n        [data-sudoku-status="','"] && {\n          border-color: transparent;\n        }\n        [data-sudoku-status="','"] && {\n          border-color: transparent;\n        }\n        [data-sudoku-status="','"] && {\n          border-color: transparent;\n        }\n      ']);return ey=function(){return e},e}function eT(){let e=(0,eb._)(["\n        display: flex;\n      "]);return eT=function(){return e},e}function eN(){let e=(0,eb._)(["\n        flex: 0 0 auto;\n        overflow: hidden;\n        display: inline-block;\n        box-sizing: border-box;\n        width: var(--sudoku__board-cell-size);\n        height: var(--sudoku__board-cell-size);\n        margin: var(--sudoku__board-cell-border-thickness) 0 0 var(--sudoku__board-cell-border-thickness);\n        background-color: var(--sudoku__board-cell-bg);\n        user-select: none;\n        cursor: pointer;\n      "]);return eN=function(){return e},e}function eC(){let e=(0,eb._)(['\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        box-sizing: border-box;\n        height: 100%;\n        width: 100%;\n        padding: 4px;\n        margin: 0;\n        [data-sudoku-hint="true"] && {\n          animation: 0.5s 0s '," linear 1 both normal;\n        }\n      "]);return eC=function(){return e},e}function eE(){let e=(0,eb._)(["\n        && {\n          margin-left: 0;\n        }\n      "]);return eE=function(){return e},e}function eI(){let e=(0,eb._)(["\n        && {\n          margin-left: var(--sudoku__board-border-thickness);\n        }\n      "]);return eI=function(){return e},e}function eR(){let e=(0,eb._)(["\n        && {\n          margin-top: 0;\n        }\n      "]);return eR=function(){return e},e}function ej(){let e=(0,eb._)(["\n        && {\n          margin-top: var(--sudoku__board-border-thickness);\n        }\n      "]);return ej=function(){return e},e}function ew(){let e=(0,eb._)(["\n        && {\n          color: #333;\n        }\n      "]);return ew=function(){return e},e}function eD(){let e=(0,eb._)(["\n        && {\n          color: #ffa500;\n        }\n      "]);return eD=function(){return e},e}function eZ(){let e=(0,eb._)(["\n        && {\n          color: #0080ff;\n        }\n      "]);return eZ=function(){return e},e}function eU(){let e=(0,eb._)(["\n        && {\n          background: #ff6a00;\n        }\n      "]);return eU=function(){return e},e}function eP(){let e=(0,eb._)(["\n        && {\n          background: #6eb2f7;\n        }\n      "]);return eP=function(){return e},e}function ez(){let e=(0,eb._)(["\n        && {\n          background: #e2ebf3;\n        }\n      "]);return ez=function(){return e},e}function eA(){let e=(0,eb._)(["\n        && {\n          background: #bbdefb;\n        }\n      "]);return eA=function(){return e},e}function eM(){let e=(0,eb._)(["\n    0% {\n      transform: translate(0, -100px);\n    }\n    80% {\n      transform: translate(0, 20px);\n    }\n    90% {\n      transform: translate(0, -10px);\n    }\n    95% {\n      transform: translate(0, 2px);\n    }\n    100% {\n      transform: translate(0, 0);\n    }\n  "]);return eM=function(){return e},e}function eX(){let e=(0,eb._)(["\n    0% {\n      transform: scale(1) rotate(0deg);\n    }\n\n    50% {\n      transform: scale(2) rotate(200deg);\n    }\n\n    100% {\n      transform: scale(1.3) rotate(360deg);\n    }\n  "]);return eX=function(){return e},e}let eG=e=>{let t;let{attempt:n,hintPos:s,className:r,overlay:a,onCellClick:l}=e,u=b(),d=S(e=>e.SUDOKU_SIZE_SQRT$),h=S(e=>e.puzzle$),p=S(e=>e.solution$),f=S(e=>e.radix$),m=S(e=>e.activatedPos$),x=S(e=>e.hintTick$),k=c.useMemo(()=>new g.$X(d),[d]),v=eO(),_={onCellClick:(0,P.$0)((e,t)=>{null!=l&&l(e,t),u({type:o.ACTIVE,payload:{r:e,c:t}})})},$=(0,g.iN)(k),{r:y,c:T}=N(k,m),C=$[m],E=-1===m?-1:n[m],{r:I=-1,c:R=-1}=N(k,s),j=-1===s?-1:p[s];{let e=-1!==s&&-1===h[s];if(e){let e=n[s];n[s]=p[s],t=ev(k,n),n[s]=e}else t=ev(k,n)}let w=[];for(let e=0,s=0;e<k.MATRIX;++e){let r=[];for(let a=0;a<k.MATRIX;++a,++s){let o=n[s],l=e===I&&a===R,u=e===y&&a===T,c=!u&&(e===y||a===T||$[s]===C),p=-1!==E&&o===E&&!c&&!u,m=!!t[s],b=l?j:o,S=(0,i.jsx)("span",{className:(0,Q.cx)(v.boardCell,{[v.boardCellLeftSeamless]:0===a,[v.boardCellLeft]:a>0&&a%d==0,[v.boardCellTopSeamless]:0===e,[v.boardCellTop]:e>0&&e%d==0,[v.boardCellPreset]:-1!==o,[v.boardCellAttempt]:o!==h[s],[v.boardCellDuplicated]:!l&&m,[v.boardCellHint]:l,[v.boardCellActivated]:!m&&u,[v.boardCellRelated]:!m&&c,[v.boardCellSame]:!m&&p}),"data-sudoku-hint":l,children:(0,i.jsx)("span",{className:v.boardCellContent,onClick:()=>_.onCellClick(e,a),children:-1===b?"":(b+1).toString(f)})},l?"".concat(a,"-hint-").concat(x):a);r.push(S)}w.push((0,i.jsx)("div",{className:v.boardRow,children:r},e))}return(0,i.jsxs)("div",{className:"".concat(v.container," ").concat(r),children:[(0,i.jsx)("div",{className:v.overlay,children:a},"overlay"),(0,i.jsx)(eg,{SUDOKU_SIZE_SQRT:d}),(0,i.jsx)("div",{className:v.boardWrapper,children:w},"wrapper")]})};eG.propTypes={attempt:u().array.isRequired,className:u().string,overlay:u().node,onCellClick:u().func};let eO=()=>c.useMemo(()=>({container:(0,Q.iv)(e_()),overlay:(0,Q.iv)(e$(),k.X.PENDING,k.X.RUNNING,k.X.PAUSED,k.X.END,eK.finished),boardWrapper:(0,Q.iv)(ey(),k.X.PENDING,k.X.PAUSED,k.X.END),boardRow:(0,Q.iv)(eT()),boardCell:(0,Q.iv)(eN()),boardCellContent:(0,Q.iv)(eC(),eK.hint),boardCellLeftSeamless:(0,Q.iv)(eE()),boardCellLeft:(0,Q.iv)(eI()),boardCellTopSeamless:(0,Q.iv)(eR()),boardCellTop:(0,Q.iv)(ej()),boardCellPreset:(0,Q.iv)(ew()),boardCellHint:(0,Q.iv)(eD()),boardCellAttempt:(0,Q.iv)(eZ()),boardCellDuplicated:(0,Q.iv)(eU()),boardCellActivated:(0,Q.iv)(eP()),boardCellRelated:(0,Q.iv)(ez()),boardCellSame:(0,Q.iv)(eA())}),[]),eK={finished:(0,Q.F4)(eM()),hint:(0,Q.F4)(eX())},eV=()=>{let e=b(),t=S(e=>e.status$),n=S(e=>e.SUDOKU_SIZE_SQRT$),s=S(e=>e.puzzle$),r=S(e=>e.solution$),a=S(e=>e.attempt$),l=S(e=>e.radix$),u=S(e=>e.hintPos$),d=S(e=>e.cheatVisible$),h=$(n),p=c.useRef(null),f=c.useRef(""),[m,x]=c.useState(!1),g={closeCheat:(0,P.$0)(()=>{e({type:o.TOGGLE_CHEAT_VISIBILITY,payload:!1})}),handleInput:(0,P.$0)(t=>{x(!1),f.current=t;let n=/^\s*$/.test(t)?0:Number.parseInt(t,l);Number.isInteger(n)&&e({type:o.INPUT,payload:n-1})}),handleCellClick:(0,P.$0)((e,t)=>{if(-1===e||-1===t)return;let n=e*h.MATRIX+t;-1===s[n]&&x(!0)})};c.useEffect(()=>{let t=()=>e({type:o.PAUSE});return window.addEventListener("beforeunload",t),()=>window.removeEventListener("beforeunload",t)},[e]),(0,U.Z)(n>=2&&n<=7,"`childMatrixSize` must be an integer in the range [2, 7].");let k=n*n;return(0,i.jsxs)("div",{ref:p,className:eQ.sudoku,"data-sudoku-status":t,"data-sudoku-size":"".concat(k,"x").concat(k),children:[(0,i.jsxs)("div",{className:eQ.sudokuWrapper,children:[(0,i.jsx)(et,{}),(0,i.jsx)(em,{containerRef:p}),(0,i.jsx)("div",{className:eQ.sudokuMain,children:(0,i.jsxs)("div",{className:eQ.sudokuMainWrapper,children:[(0,i.jsx)(eG,{className:eQ.sudokuBoardPuzzle,attempt:a,hintPos:u,overlay:(0,i.jsx)(F,{}),onCellClick:g.handleCellClick}),(0,i.jsx)(A.Z,{open:d,container:p.current,keepMounted:!0,disableAutoFocus:!0,BackdropProps:{timeout:500},closeAfterTransition:!0,onClose:g.closeCheat,children:(0,i.jsxs)("div",{className:eQ.sudokuSolution,onClick:g.closeCheat,children:[(0,i.jsx)("span",{className:eQ.sudokuSolutionClose,children:"\xd7"}),(0,i.jsx)("div",{onClick:z.UW,children:(0,i.jsx)(eG,{attempt:r,hintPos:-1})})]})})]})})]}),(0,i.jsx)(V,{radix:l,container:p.current,initialValue:f.current,visible:m,label:"A ".concat(10===l?"decimal":"hexadecimal"," number"),onCancel:()=>x(!1),onConfirm:g.handleInput})]})},eQ=(0,z.ZC)({sudoku:{display:"block",transform:"scale(1)",caretColor:"transparent",background:"transparent","--sudoku__font-size":"18px",'&[data-sudoku-size="4x4"]':{"--sudoku__font-size":"24px"}},sudokuSolution:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",height:"100%",width:"100%",background:"#eddede"},sudokuSolutionClose:{position:"absolute",top:"0",right:"0",bottom:"unset",left:"unset",display:"inline-block",height:"48px",width:"48px",lineHeight:"48px",fontSize:"32px",textAlign:"center",verticalAlign:"center",color:"#333",cursor:"pointer"},sudokuWrapper:{display:"block",maxWidth:"90vw",margin:"auto"},sudokuMain:{display:"flex",justifyContent:"center",padding:"1rem",margin:"0"},sudokuMainWrapper:{display:"block",overflow:"auto",fontSize:"16px"},sudokuBoardPuzzle:{['[data-sudoku-status="'.concat(k.X.PENDING,'"] &&')]:{"--sudoku__board-border-thickness-color":"transparent","--sudoku__board-border-thickness-plus-color":"transparent"},["'[data-sudoku-status=\"".concat(k.X.PAUSED,"\"] &&'")]:{"--sudoku__board-border-thickness-color":"transparent","--sudoku__board-border-thickness-plus-color":"transparent"},["'[data-sudoku-status=\"".concat(k.X.END,"\"] &&'")]:{"--sudoku__board-border-thickness-color":"transparent","--sudoku__board-border-thickness-plus-color":"transparent"}}}),eH=e=>(0,i.jsx)(D,{storageKey:e.storageKey,initialData:e.initialData,children:(0,i.jsx)(eV,{})});eH.propTypes={storageKey:u().string,initialData:u().any};var eL=eH}}]);