"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[387],{83235:function(t,e,n){n.d(e,{Ds:function(){return r},P2:function(){return l}});let o="object"==typeof n.g&&null!==n.g&&n.g.Object===Object&&n.g,i="object"==typeof globalThis&&null!==globalThis&&globalThis.Object===Object&&globalThis,a="object"==typeof self&&null!==self&&self.Object===Object&&self,s=i||o||a||Function("return this")();function r(t){var e,n;let o,i,a,r,l,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2?arguments[2]:void 0;if("function"!=typeof t)throw TypeError("Expected a function");let d=0,h=Math.max(0,Number(u)||0),p=0===h&&"function"==typeof s.requestAnimationFrame,f=!!(null!==(e=null==c?void 0:c.leading)&&void 0!==e&&e),m=!!(null===(n=null==c?void 0:c.trailing)||void 0===n||n),x="number"==typeof(null==c?void 0:c.maxWait),b=x?Math.max(Number(null==c?void 0:c.maxWait)||0,h):0;function g(e){let n=o,a=i;return o=void 0,i=void 0,d=e,l=t.apply(n,a)}function S(t,e){return p?(s.cancelAnimationFrame(r),s.requestAnimationFrame(t)):setTimeout(t,e)}function v(t){if(p){s.cancelAnimationFrame(t);return}clearTimeout(t)}function k(t){if(void 0===a)return!0;let e=t-a,n=t-d;return e>=h||e<0||x&&n>=b}function y(){let t=Date.now();if(k(t)){_(t);return}r=S(y,function(t){let e=t-(null!=a?a:0),n=t-d,o=h-e;return x?Math.min(o,b-n):o}(t))}function _(t){return(r=void 0,m&&i)?g(t):(o=void 0,i=void 0,l)}let T=function(){for(var t,e=arguments.length,n=Array(e),s=0;s<e;s++)n[s]=arguments[s];let u=Date.now(),c=k(u);if(o=this,i=n,a=u,c){if(void 0===r)return d=t=a,r=S(y,h),f?g(t):l;if(x)return r=S(y,h),g(a)}return void 0===r&&(r=S(y,h)),l};return T.cancel=function(){void 0!==r&&v(r),d=0,o=void 0,i=void 0,a=void 0,r=void 0},T.flush=function(){return void 0===r?l:_(Date.now())},T.flushSync=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];void 0!==r&&v(r),r=void 0;let s=Date.now();return o=this,i=e,a=s,g(s)},T.pending=function(){return void 0!==r},T}function l(t,e,n){var o,i;if("function"!=typeof t)throw TypeError("Expected a function");let a=!!(null===(o=null==n?void 0:n.leading)||void 0===o||o),s=!!(null===(i=null==n?void 0:n.trailing)||void 0===i||i);return r(t,e,{leading:a,trailing:s,maxWait:e})}},9171:function(t,e,n){n.d(e,{D:function(){return l}});var o=n(55402),i=n(95050),a=n(67294);let s=[["#ffbe0b","#fb5607","#ff006e","#8338ec","#3a86ff"],["#9b5de5","#f15bb5","#fee440","#00bbf9","#00f5d4"]],r=()=>{let t=s.length;return s[Math.min(t-1,Math.floor(Math.random()*t))]},l=()=>{let t=a.useRef(!1),e=a.useRef(null);a.useEffect(()=>(e.current=new i.Z,()=>{e.current=null}),[]);let n=(0,o.$0)(async()=>{if(null==e.current)return;let n=e.current,o=r(),i=window.screen.width<=900;t.current=!0;try{await n.addConfetti({confettiColors:o,confettiRadius:i?4:8,confettiNumber:i?100:300})}finally{t.current=!1}});return n}},34781:function(t,e,n){n.d(e,{p:function(){return r},X:function(){return i}}),(o=i||(i={}))[o.PENDING=1]="PENDING",o[o.RUNNING=2]="RUNNING",o[o.PAUSED=4]="PAUSED",o[o.END=8]="END";var o,i,a=n(76955),s=n(15658);class r extends a.jz{constructor(t){super();let e=new a.ZM(t.status),n=new a.ZM(t.elapsedTime),o=Date.now(),r=(t,e)=>{let a=Date.now();if(e===i.RUNNING){let t=a-o;n.setState(e=>e+t)}else t===i.PENDING&&n.setState(0);o=a};e.subscribe({next:(t,e)=>r(t,e),complete:()=>{}});let l=(0,s.iP)(()=>{let t=e.getSnapshot();r(t,t)});this.status$=e,this.elapsedTime$=n,this._disposables.push(new a.JT(l))}}},31387:function(t,e,n){n.d(e,{vk:function(){return U},oh:function(){return s},tR:function(){return tG},aK:function(){return tW},ZP:function(){return tH},vD:function(){return S},eK:function(){return v}});var o,i,a,s,r=n(85893),l=n(45697),u=n.n(l),c=n(67294),d=n(83235),h=n(55402),p=n(59976),f=n(15658),m=n(45684),x=n(13339);let b="2023-06-06";(o=a||(a={})).ERASE="ERASE",o.HINT="HINT",o.WRITE="WRITE",(i=s||(s={})).RESTART="RESTART",i.RESET="RESET",i.START="START",i.PAUSE="PAUSE",i.RESUME="RESUME",i.ACTIVE="ACTIVE",i.HINT="HINT",i.TOGGLE_CHEAT_VISIBILITY="TOGGLE_CHEAT_VISIBILITY",i.INPUT="INPUT";let g=c.createContext(null);g.displayName="SudokuContextType";let S=()=>{let t=c.useContext(g);return t.dispatch},v=t=>{let e=c.useContext(g),n=t(e);return(0,p.vc)(n)};var k=n(43118),y=n(34781);let _={},T={},$=t=>{let e=T[t];return void 0===e&&(e=new k.$X(t),T[t]=e),e},N=t=>{let e=_[t];return void 0===e&&(e=new k.wY({childMatrixWidth:t}),_[t]=e),e};function C(t,e,n){let{BOARD:o}=t;for(let t=0;t<o;++t)if(e[t]!==n[t])return!1;return!0}function E(t,e){if(e<0)return{r:-1,c:-1};let{MATRIX:n}=t;return{r:Math.floor(e/n),c:e%n}}let I=function(t){var e;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j,{SUDOKU_SIZE_SQRT:o=n.SUDOKU_SIZE_SQRT,difficulty:i=n.difficulty,score:s=n.score,radix:r=n.radix,activatedPos:l=null!==(e=n.activatedPos)&&void 0!==e?e:-1,gameTick:u=n.gameTick,puzzle:c=n.puzzle,solution:d=n.solution,instructions:h=n.instructions.slice(),elapsedTime:p=n.elapsedTime}=null!=t?t:{},{puzzle:f,solution:m}=null!=c&&null!=d?{puzzle:c,solution:d}:N(o).createSudoku(i/100),x=$(o),b=(0,k.s0)(x);(0,k._g)(f,b,x),function(t,e,n){for(let o of n)switch(o.type){case a.ERASE:{let{r:n,c:i}=o.payload,a=n*t.MATRIX+i;e[a]=-1;break}case a.WRITE:{let{r:n,c:i,v:a}=o.payload,s=n*t.MATRIX+i;e[s]=a}}}(x,b,h);let g=C(x,b,m)?y.X.END:p>0||!C(x,b,f)?y.X.PAUSED:y.X.PENDING;return{status:g,elapsedTime:p,SUDOKU_SIZE_SQRT:o,difficulty:i,radix:r,score:s,attempt:b,instructions:h,puzzle:f,solution:m,activatedPos:l,hintPos:-1,cheatVisible:!1,gameTick:u,attemptTick:0,hintTick:0}},j={status:y.X.PENDING,elapsedTime:0,SUDOKU_SIZE_SQRT:3,difficulty:20,radix:10,score:0,puzzle:null,solution:null,attempt:null,instructions:[],activatedPos:-1,hintPos:-1,cheatVisible:!1,gameTick:0,attemptTick:0,hintTick:0};var R=n(35369);let w=(t,e,n,o)=>{let{BOARD:i}=t;for(let t=0;t<i;++t)if(-1===e[t])return t;for(let t=0;t<i;++t)if(-1===n[t]&&e[t]!==o[t])return t;return -1};class D{constructor(t){var e=this;this.restart=()=>{let t=this.viewmodel,e=t.SUDOKU_SIZE_SQRT$.getSnapshot(),n=t.difficulty$.getSnapshot(),o=N(e),{puzzle:i,solution:a}=o.createSudoku(n),s=(0,k.s0)(o.size);(0,k._g)(i,s,o.size),t.status$.next(y.X.PENDING),t.gameTick$.setState(t=>t+1),t.puzzle$.next(i),t.solution$.next(a),t.attempt$.next(s),t.instructions$.next(R.aV.of()),t.hintPos$.next(-1),t.hintTick$.next(0),t.attemptTick$.next(0)},this.reset=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.viewmodel,{difficulty:o=n.difficulty$.getSnapshot(),SUDOKU_SIZE_SQRT:i=n.SUDOKU_SIZE_SQRT$.getSnapshot(),radix:a=n.radix$.getSnapshot()}=t,s=N(i),{puzzle:r,solution:l}=s.createSudoku(o/100),u=(0,k.s0)(s.size);(0,k._g)(r,u,s.size),n.status$.next(y.X.PENDING),n.SUDOKU_SIZE_SQRT$.next(i),n.difficulty$.next(o),n.radix$.next(a),n.puzzle$.next(r),n.solution$.next(l),n.attempt$.next(u),n.instructions$.next(R.aV.of()),n.hintPos$.next(-1),n.cheatVisible$.next(!1),n.gameTick$.setState(t=>t+1),n.attemptTick$.next(0),n.hintTick$.next(0)},this.start=()=>{let t=this.viewmodel;t.status$.getSnapshot()===y.X.PENDING&&t.status$.next(y.X.RUNNING)},this.pause=()=>{let t=this.viewmodel;t.status$.getSnapshot()===y.X.RUNNING&&t.status$.next(y.X.PAUSED)},this.resume=()=>{let t=this.viewmodel;t.status$.getSnapshot()===y.X.PAUSED&&t.status$.next(y.X.RUNNING)},this._end=()=>{let t=this.viewmodel;if(t.status$.getSnapshot()===y.X.RUNNING){let e=t.SUDOKU_SIZE_SQRT$.getSnapshot(),n=$(e),o=t.attempt$.getSnapshot(),i=t.solution$.getSnapshot();if(!C(n,o,i))return;let a=0,s=t.difficulty$.getSnapshot(),r=t.elapsedTime$.getSnapshot(),l=e**4*1e3;if(r<l){let t=e**4*s/100;a=(l-r)*t/1e3}let u=Math.max(5,Math.round(a));t.status$.next(y.X.END),t.score$.setState(t=>t+u)}},this.activePos=t=>{let{r:e,c:n}=t,o=this.viewmodel,i=$(o.SUDOKU_SIZE_SQRT$.getSnapshot()),a=e*i.MATRIX+n;o.activatedPos$.next(a)},this.hint=()=>{let t=this.viewmodel,e=t.SUDOKU_SIZE_SQRT$.getSnapshot(),n=t.puzzle$.getSnapshot(),o=t.solution$.getSnapshot(),i=t.attempt$.getSnapshot(),s=t.activatedPos$.getSnapshot(),r=$(e),l=-1===s||-1!==n[s]?w(r,i,n,o):s,u=E(r,l);t.hintPos$.next(l),t.hintTick$.setState(t=>t+1),t.instructions$.setState(t=>t.push({type:a.HINT,payload:u,timestamp:new Date().toISOString()}))},this.toggleCheatVisibility=t=>{let e=this.viewmodel;e.cheatVisible$.setState(e=>null!=t?t:!e)},this.input=t=>{let e=this.viewmodel;if(e.status$.getSnapshot()!==y.X.RUNNING)return;let n=e.SUDOKU_SIZE_SQRT$.getSnapshot(),{size:o}=N(n);if(!Number.isInteger(t)||t<-1||t>=o.BOARD)return;let i=e.activatedPos$.getSnapshot();if(-1===i)return;let s=e.puzzle$.getSnapshot();if(-1!==s[i])return;let r=e.attempt$.getSnapshot();if(r[i]===t)return;let l=(0,k.s0)(o);(0,k._g)(r,l,o),l[i]=t;let{r:u,c}=E(o,i);e.attempt$.next(l),e.attemptTick$.setState(t=>t+1),e.hintPos$.setState(t=>i===t?-1:t),e.instructions$.setState(e=>e.push({type:a.WRITE,payload:{r:u,c,v:t},timestamp:new Date().toISOString()}))},this.viewmodel=t.viewmodel,this.viewmodel.attempt$.subscribeStateChange(()=>this._end())}}class Z extends y.p{_consume(t){let e=this._controller;switch(t.type){case s.RESTART:e.restart();break;case s.RESET:e.reset(t.payload);break;case s.START:e.start();break;case s.PAUSE:e.pause();break;case s.RESUME:e.resume();break;case s.ACTIVE:e.activePos(t.payload);break;case s.HINT:e.hint();break;case s.TOGGLE_CHEAT_VISIBILITY:e.toggleCheatVisibility(t.payload);break;case s.INPUT:e.input(t.payload);break;default:console.error(this.constructor.name,"Bad action:",t)}}constructor(t){super(t),this.getSnapshot=()=>({status:this.status$.getSnapshot(),elapsedTime:this.elapsedTime$.getSnapshot(),SUDOKU_SIZE_SQRT:this.SUDOKU_SIZE_SQRT$.getSnapshot(),difficulty:this.difficulty$.getSnapshot(),radix:this.radix$.getSnapshot(),score:this.score$.getSnapshot(),puzzle:this.puzzle$.getSnapshot(),solution:this.solution$.getSnapshot(),attempt:this.attempt$.getSnapshot(),instructions:Array.from(this.instructions$.getSnapshot()),activatedPos:this.activatedPos$.getSnapshot(),hintPos:this.hintPos$.getSnapshot(),cheatVisible:this.cheatVisible$.getSnapshot(),gameTick:this.gameTick$.getSnapshot(),attemptTick:this.attemptTick$.getSnapshot(),hintTick:this.hintTick$.getSnapshot()}),this.SUDOKU_SIZE_SQRT$=new p.ZM(t.SUDOKU_SIZE_SQRT),this.difficulty$=new p.ZM(t.difficulty),this.radix$=new p.ZM(t.radix),this.score$=new p.ZM(t.score),this.puzzle$=new p.ZM(t.puzzle),this.solution$=new p.ZM(t.solution),this.attempt$=new p.ZM(t.attempt),this.instructions$=new p.ZM(R.aV.of(...t.instructions)),this.activatedPos$=new p.ZM(t.activatedPos),this.hintPos$=new p.ZM(t.hintPos),this.cheatVisible$=new p.ZM(t.cheatVisible),this.gameTick$=new p.ZM(t.gameTick),this.attemptTick$=new p.ZM(t.attemptTick),this.hintTick$=new p.ZM(t.hintTick);let e=new D({viewmodel:this});this._controller=e}}let U=t=>{let{storageKey:e,LoadingComponent:n=m.gb}=t,[o,i]=c.useState(void 0),a=c.useMemo(()=>e?(0,x.Yu)(e):void 0,[e]),s=c.useRef(t.initialData);return(c.useEffect(()=>{t();async function t(){let t=await s.current;if(a){let e=await a.load();null==e||e.version!==b?i(new Z(I(t))):i(new Z(I({...e.data,...t})))}else i(new Z(I(t)))}},[a]),c.useEffect(()=>{if(o)return()=>{console.log("[waw] unmounting sudoku viewmodel."),o.dispose()}},[o]),o)?(0,r.jsxs)(c.Fragment,{children:[(0,r.jsx)(g.Provider,{value:o,children:t.children}),a&&(0,r.jsx)(P,{viewmodel:o,storage:a,storageKey:e})]}):(0,r.jsx)(n,{})},P=t=>{let{viewmodel:e,storage:n,storageKey:o}=t,i=(0,p.sD)(e,["SUDOKU_SIZE_SQRT$","difficulty$","radix$","score$","puzzle$","solution$","instructions$","activatedPos$","gameTick$"]),a=c.useMemo(()=>(0,d.P2)(()=>{let t={elapsedTime:e.elapsedTime$.getSnapshot(),SUDOKU_SIZE_SQRT:e.SUDOKU_SIZE_SQRT$.getSnapshot(),difficulty:e.difficulty$.getSnapshot(),radix:e.radix$.getSnapshot(),score:e.score$.getSnapshot(),puzzle:e.puzzle$.getSnapshot(),solution:e.solution$.getSnapshot(),instructions:Array.from(e.instructions$.getSnapshot()),activatedPos:e.activatedPos$.getSnapshot(),gameTick:e.gameTick$.getSnapshot()};return f.kg.log("saving ".concat(o,". data:"),t),n.save({version:b,data:t})},200),[e,n,o]);return c.useEffect(()=>void a(),[a,i]),(0,h.i7)(()=>a.flushSync(),[],!1),(0,r.jsx)(c.Fragment,{})};var z=n(6260),A=n(72908),M=n(78262),X=n(9581),G=n(98271),O=n(31425),K=n(83321);let V=t=>{let{radix:e,container:n,initialValue:o,visible:i,label:a,onCancel:s,onConfirm:l}=t,[u,d]=c.useState(o);return c.useEffect(()=>d(o),[o,i]),(0,r.jsxs)(M.Z,{container:n,open:i,onClose:s,"aria-labelledby":"sudoku-input-dialog",children:[(0,r.jsx)(X.Z,{children:(0,r.jsx)(G.Z,{autoFocus:!0,margin:"dense",label:a,type:e<=10?"number":"input",fullWidth:!0,value:u,onChange:t=>d(t.target.value),onFocus:t=>t.target.select(),onKeyDown:t=>{"Enter"===t.key&&l(u)}})}),(0,r.jsxs)(O.Z,{children:[(0,r.jsx)(K.Z,{color:"inherit",onClick:s,children:"Cancel"}),(0,r.jsx)(K.Z,{color:"primary",onClick:()=>l(u),children:"Confirm"})]})]})};var Q=n(18872),W=n(9171),H=n(41616),B=n(70655),F=n(1849);let L=c.memo(()=>{let t=S(),e=v(t=>t.status$),n=(0,W.D)(),o=(0,h.rc)(e);c.useEffect(()=>{o!==e&&e===y.X.END&&n()},[o,e,n]);let i=c.useMemo(()=>({start:()=>t({type:s.START}),resume:()=>t({type:s.RESUME}),restart:()=>t({type:s.RESTART})}),[t]);switch(e){case y.X.PENDING:return(0,r.jsx)("div",{className:Y.overlay,children:(0,r.jsx)(K.Z,{className:Y.button,variant:"contained",color:"primary",startIcon:(0,r.jsx)(B.Z,{}),onClick:i.start,children:"Start"})});case y.X.PAUSED:return(0,r.jsx)("div",{className:Y.overlay,children:(0,r.jsx)(K.Z,{className:Y.button,variant:"contained",color:"primary",startIcon:(0,r.jsx)(H.Z,{}),onClick:i.resume,children:"Resume"})});case y.X.END:return(0,r.jsx)("div",{className:Y.overlay,children:(0,r.jsxs)("div",{className:Y.finishedBanner,children:[(0,r.jsx)("p",{children:"You win \uD83C\uDF89\uD83C\uDF89\uD83C\uDF89"}),(0,r.jsx)(K.Z,{className:Y.button,variant:"contained",color:"primary",startIcon:(0,r.jsx)(F.Z,{}),onClick:i.restart,children:"New"})]})});default:return null}}),Y={overlay:(0,Q.iv)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:"100%",userSelect:"none"}),confettiCanvas:(0,Q.iv)({position:"absolute",top:0,bottom:0,left:0,right:0,width:"100%",height:"100%"}),button:(0,Q.iv)({"&&, &&:hover":{boxShadow:"4px 4px 16px 0px hsl(0deg 0% 0% / 0.75)"}}),finishedBanner:(0,Q.iv)({position:"relative",display:"flex",flexDirection:"column",justifyContent:"center",padding:0,margin:0,fontSize:32}),playerName:(0,Q.iv)({color:"#e200e2"})};var q=n(45018),J=n(55819),tt=n(45929);let te=()=>{let t=S(),e=v(t=>t.status$),n=v(t=>t.SUDOKU_SIZE_SQRT$),o=v(t=>t.difficulty$),i=v(t=>t.radix$),a=e===y.X.PENDING,l=c.useMemo(()=>({onSizeChange:e=>{t({type:s.RESET,payload:{SUDOKU_SIZE_SQRT:Number(e.target.value)}})},onRadixChange:e=>{t({type:s.RESET,payload:{radix:Number(e.target.value)}})},onDifficultyChange:(e,n)=>{t({type:s.RESET,payload:{difficulty:n}})}}),[t]);return(0,r.jsxs)("div",{className:tn.settings,children:[(0,r.jsxs)("div",{className:tn.item,children:[(0,r.jsx)("span",{children:"Size:"}),(0,r.jsxs)(q.Z,{variant:"standard",value:n,disabled:!a,onChange:l.onSizeChange,children:[(0,r.jsx)(J.Z,{value:2,children:"4x4"}),(0,r.jsx)(J.Z,{value:3,children:"9x9"}),(0,r.jsx)(J.Z,{value:4,children:"16x16"})]})]}),(0,r.jsxs)("div",{className:tn.item,children:[(0,r.jsx)("span",{children:"Radix:"}),(0,r.jsxs)(q.Z,{variant:"standard",value:i,disabled:!a,onChange:l.onRadixChange,children:[(0,r.jsx)(J.Z,{value:10,children:"Decimal (x10)"}),(0,r.jsx)(J.Z,{value:16,children:"Hexadecimal (x16)"})]})]}),(0,r.jsxs)("div",{className:(0,Q.cx)(tn.item,tn.difficulty),children:[(0,r.jsx)("span",{children:"Difficulty:"}),(0,r.jsx)(tt.ZP,{value:o,disabled:!a,step:1,min:0,max:100,valueLabelDisplay:"auto","aria-labelledby":"sudoku-difficulty",onChange:l.onDifficultyChange})]})]})},tn=(0,f.ZC)({settings:{display:"block",maxWidth:"min(90vw, 400px)",margin:"auto"},item:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"flex-start",margin:"1rem 0","& > *":{marginRight:"1rem"}},difficulty:{flexWrap:"nowrap","& > span":{"&:first-child":{flex:"0 0 auto"}}}});var to=n(75303),ti=n(53247),ta=n(22961),ts=n(76997),tr=n(93946),tl=n(27484),tu=n.n(tl),tc=n(1646),td=n.n(tc),th=n(65464);tu().extend(td());let tp=c.memo(()=>{let t=v(t=>t.elapsedTime$),e=tu().duration(t).format("HH:mm:ss");return(0,r.jsxs)("div",{className:tf.elapsedTime,children:[(0,r.jsx)(ts.Z,{title:"Time used",children:(0,r.jsx)(th.Z,{})}),"\xa0\xa0",(0,r.jsx)("span",{children:e})]},"elapsed-time")}),tf=(0,f.ZC)({elapsedTime:{flex:"0 1 auto",display:"flex",alignItems:"center",fontFamily:"Consolas, 'Source Code Pro', 'Roboto Mono', monospace, sans-serif",color:"#595959",userSelect:"none"}});tu().extend(td());let tm=t=>{let{containerRef:e}=t,n=S(),o=v(t=>t.status$),i=v(t=>t.score$),[a,l]=c.useState(!1),u=c.useMemo(()=>({showCheat:()=>{n({type:s.TOGGLE_CHEAT_VISIBILITY,payload:!0})},restartGame:()=>{l(!1),n({type:s.RESTART})},pauseGame:()=>{n({type:s.PAUSE})},hint:()=>{n({type:s.HINT})},closeRestartDialog:()=>{l(!1)}}),[n]);return(0,r.jsxs)("div",{className:tx.toolbar,children:[(0,r.jsxs)("div",{className:(0,Q.cx)(tx.item,tx.buttons),children:[(0,r.jsx)(K.Z,{variant:"contained",color:"inherit",startIcon:(0,r.jsx)(F.Z,{}),onClick:()=>o===y.X.PENDING||o===y.X.END?u.restartGame():l(!0),children:"New"}),(0,r.jsx)(K.Z,{variant:"contained",color:"inherit",disabled:o!==y.X.RUNNING,startIcon:(0,r.jsx)(to.Z,{}),onClick:u.hint,children:"HINT"}),(0,r.jsx)(K.Z,{variant:"contained",color:"secondary",disabled:o!==y.X.RUNNING,startIcon:(0,r.jsx)(ta.Z,{}),onClick:u.showCheat,children:"Cheat"})]}),(0,r.jsxs)("div",{className:(0,Q.cx)(tx.item,tx.state),children:[(0,r.jsx)("div",{className:tx.stateButtons,children:o===y.X.RUNNING&&(0,r.jsx)(ts.Z,{title:"Pause",children:(0,r.jsx)(tr.Z,{color:"primary",onClick:u.pauseGame,children:(0,r.jsx)(ti.Z,{})})})},"state-buttons"),(0,r.jsx)(tp,{}),(0,r.jsxs)("div",{className:tx.score,children:["Score: ",i]},"score")]}),(0,r.jsxs)(M.Z,{container:e.current,open:a,onClose:u.closeRestartDialog,"aria-labelledby":"confirm-to-restart",children:[(0,r.jsx)(X.Z,{children:"Are you sure you want to start a new game?"}),(0,r.jsxs)(O.Z,{children:[(0,r.jsx)(K.Z,{color:"inherit",onClick:u.closeRestartDialog,children:"Cancel"}),(0,r.jsx)(K.Z,{color:"primary",onClick:u.restartGame,children:"Confirm"})]})]})]})};tm.propTypes={containerRef:u().any.isRequired};let tx=(0,f.ZC)({toolbar:{display:"block",maxWidth:"min(90vw, 400px)",margin:"auto"},item:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"flex-start",margin:"1rem 0","> *":{marginRight:"1rem"}},buttons:{justifyContent:"space-around","> button":{margin:"0 4px"}},state:{justifyContent:"center",margin:"2rem 0 0",height:"48px"},stateButtons:{flex:"0 1 auto",display:"flex",alignItems:"center",justifyContent:"center",margin:"0",userSelect:"none"},score:{flex:"0 1 auto",color:"green",overflow:"hidden",textOverflow:"ellipsis",fontFamily:"Consolas, 'Source Code Pro', 'Roboto Mono', monospace, sans-serif"}});var tb=n(82729);let tg=t=>{let{SUDOKU_SIZE_SQRT:e}=t,n=e*e,o=[];for(let t=e,i=-1;t<n;t+=e,++i){let e="calc(".concat(t," * var(--sudoku__board-cell-size) + ").concat(t+i,"px)");o.push((0,r.jsx)("div",{className:(0,Q.cx)(tv.boarder,tv.horizontalBoarder),style:{top:e}},"h-".concat(t))),o.push((0,r.jsx)("div",{className:(0,Q.cx)(tv.boarder,tv.verticalBorder),style:{left:e}},"v-".concat(t)))}return(0,r.jsx)(c.Fragment,{children:o})},tS=c.memo(tg);tg.propTypes={SUDOKU_SIZE_SQRT:u().number.isRequired};let tv=(0,f.ZC)({boarder:{position:"absolute",boxSizing:"content-box",background:"var(--sudoku__board-border-thickness-color)"},horizontalBoarder:{left:"0",right:"0",bottom:"unset",width:"calc(100% + 2px)",height:"var(--sudoku__board-border-thickness)"},verticalBorder:{top:"0",bottom:"0",right:"unset",height:"calc(100% + 2px)",width:"var(--sudoku__board-border-thickness)"}});function tk(t,e){let{BOARD:n,MATRIX:o,BASE_1:i,BASE_3:a}=t,s=Array(n).fill(!1),r=Array(o).fill(0);for(let t=0;t<n;t+=o){r.fill(0);for(let n=t,i=t+o;n<i;++n){let t=e[n];-1!==t&&(r[t]+=1)}for(let n=t,i=t+o;n<i;++n){let t=e[n];-1!==t&&r[t]>1&&(s[n]=!0)}}for(let t=0;t<o;++t){r.fill(0);for(let i=t;i<n;i+=o){let t=e[i];-1!==t&&(r[t]+=1)}for(let i=t;i<n;i+=o){let t=e[i];-1!==t&&r[t]>1&&(s[i]=!0)}}for(let t=0;t<n;t+=a)for(let n=0;n<o;n+=i){r.fill(0);for(let s=t,l=t+a;s<l;s+=o)for(let t=s+n,o=t+i;t<o;++t){let n=e[t];-1!==n&&(r[n]+=1)}for(let l=t,u=t+a;l<u;l+=o)for(let t=l+n,o=t+i;t<o;++t){let n=e[t];-1!==n&&r[n]>1&&(s[t]=!0)}}return s}function ty(){let t=(0,tb._)(["\n        --sudoku__board-bg: #d3d8e2;\n        --sudoku__board-cell-bg: #fff;\n        --sudoku__board-cell-size: 32px;\n        --sudoku__board-cell-font-size: 16px;\n        --sudoku__board-cell-border-thickness: 1px;\n        --sudoku__board-border-thickness: 2px;\n        --sudoku__board-border-thickness-color: #111;\n        --sudoku__board-border-thickness-plus: 3px;\n        --sudoku__board-border-thickness-plus-color: #111;\n        position: relative;\n        box-sizing: content-box;\n        display: inline-block;\n        width: fit-content;\n        padding: 0;\n        border: var(--sudoku__board-border-thickness-plus) solid var(--sudoku__board-border-thickness-plus-color);\n        margin: 0;\n        background-color: var(--sudoku__board-bg);\n        font-family: Consolas, 'Source Code Pro', 'Roboto Mono', monospace, sans-serif;\n        [data-sudoku-size=\"4x4\"] && {\n          --sudoku__board-cell-size: 48px;\n          --sudoku__board-cell-font-size: 20px;\n        }\n      "]);return ty=function(){return t},t}function t_(){let t=(0,tb._)(['\n        z-index: 2;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        display: none;\n        width: 100%;\n        height: 100%;\n        overflow: hidden;\n        background: linear-gradient(\n          45deg,\n          hsl(30deg 20% 90% / 0.2),\n          hsl(210deg 20% 100% / 0.3)\n        );\n        [data-sudoku-status="','"] && {\n          display: block;\n          backdrop-filter: blur(1px);\n        }\n        [data-sudoku-status="','"] && {\n          display: none;\n        }\n        [data-sudoku-status="','"] && {\n          display: block;\n          backdrop-filter: blur(16px);\n        }\n        [data-sudoku-status="','"] && {\n          display: block;\n          backdrop-filter: blur(4px);\n          color: #ff00ff;\n          animation: 1s 0s '," ease-in-out;\n        }\n      "]);return t_=function(){return t},t}function tT(){let t=(0,tb._)(['\n        display: flex;\n        flex-direction: column;\n        font-size: var(--sudoku__board-cell-font-size);\n        [data-sudoku-status="','"] && {\n          border-color: transparent;\n        }\n        [data-sudoku-status="','"] && {\n          border-color: transparent;\n        }\n        [data-sudoku-status="','"] && {\n          border-color: transparent;\n        }\n      ']);return tT=function(){return t},t}function t$(){let t=(0,tb._)(["\n        display: flex;\n      "]);return t$=function(){return t},t}function tN(){let t=(0,tb._)(["\n        flex: 0 0 auto;\n        overflow: hidden;\n        display: inline-block;\n        box-sizing: border-box;\n        width: var(--sudoku__board-cell-size);\n        height: var(--sudoku__board-cell-size);\n        margin: var(--sudoku__board-cell-border-thickness) 0 0 var(--sudoku__board-cell-border-thickness);\n        background-color: var(--sudoku__board-cell-bg);\n        user-select: none;\n        cursor: pointer;\n      "]);return tN=function(){return t},t}function tC(){let t=(0,tb._)(['\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        box-sizing: border-box;\n        height: 100%;\n        width: 100%;\n        padding: 4px;\n        margin: 0;\n        [data-sudoku-hint="true"] && {\n          animation: 0.5s 0s '," linear 1 both normal;\n        }\n      "]);return tC=function(){return t},t}function tE(){let t=(0,tb._)(["\n        && {\n          margin-left: 0;\n        }\n      "]);return tE=function(){return t},t}function tI(){let t=(0,tb._)(["\n        && {\n          margin-left: var(--sudoku__board-border-thickness);\n        }\n      "]);return tI=function(){return t},t}function tj(){let t=(0,tb._)(["\n        && {\n          margin-top: 0;\n        }\n      "]);return tj=function(){return t},t}function tR(){let t=(0,tb._)(["\n        && {\n          margin-top: var(--sudoku__board-border-thickness);\n        }\n      "]);return tR=function(){return t},t}function tw(){let t=(0,tb._)(["\n        && {\n          color: #333;\n        }\n      "]);return tw=function(){return t},t}function tD(){let t=(0,tb._)(["\n        && {\n          color: #ffa500;\n        }\n      "]);return tD=function(){return t},t}function tZ(){let t=(0,tb._)(["\n        && {\n          color: #0080ff;\n        }\n      "]);return tZ=function(){return t},t}function tU(){let t=(0,tb._)(["\n        && {\n          background: #ff6a00;\n        }\n      "]);return tU=function(){return t},t}function tP(){let t=(0,tb._)(["\n        && {\n          background: #6eb2f7;\n        }\n      "]);return tP=function(){return t},t}function tz(){let t=(0,tb._)(["\n        && {\n          background: #e2ebf3;\n        }\n      "]);return tz=function(){return t},t}function tA(){let t=(0,tb._)(["\n        && {\n          background: #bbdefb;\n        }\n      "]);return tA=function(){return t},t}function tM(){let t=(0,tb._)(["\n    0% {\n      transform: translate(0, -100px);\n    }\n    80% {\n      transform: translate(0, 20px);\n    }\n    90% {\n      transform: translate(0, -10px);\n    }\n    95% {\n      transform: translate(0, 2px);\n    }\n    100% {\n      transform: translate(0, 0);\n    }\n  "]);return tM=function(){return t},t}function tX(){let t=(0,tb._)(["\n    0% {\n      transform: scale(1) rotate(0deg);\n    }\n\n    50% {\n      transform: scale(2) rotate(200deg);\n    }\n\n    100% {\n      transform: scale(1.3) rotate(360deg);\n    }\n  "]);return tX=function(){return t},t}let tG=t=>{let e;let{attempt:n,hintPos:o,className:i,overlay:a,onCellClick:l}=t,u=S(),d=v(t=>t.SUDOKU_SIZE_SQRT$),p=v(t=>t.puzzle$),f=v(t=>t.solution$),m=v(t=>t.radix$),x=v(t=>t.activatedPos$),b=v(t=>t.hintTick$),g=c.useMemo(()=>new k.$X(d),[d]),y=tO(),_={onCellClick:(0,h.$0)((t,e)=>{null!=l&&l(t,e),u({type:s.ACTIVE,payload:{r:t,c:e}})})},T=(0,k.iN)(g),{r:$,c:N}=E(g,x),C=T[x],I=-1===x?-1:n[x],{r:j=-1,c:R=-1}=E(g,o),w=-1===o?-1:f[o];{let t=-1!==o&&-1===p[o];if(t){let t=n[o];n[o]=f[o],e=tk(g,n),n[o]=t}else e=tk(g,n)}let D=[];for(let t=0,o=0;t<g.MATRIX;++t){let i=[];for(let a=0;a<g.MATRIX;++a,++o){let s=n[o],l=t===j&&a===R,u=t===$&&a===N,c=!u&&(t===$||a===N||T[o]===C),h=-1!==I&&s===I&&!c&&!u,f=!!e[o],x=l?w:s,g=(0,r.jsx)("span",{className:(0,Q.cx)(y.boardCell,{[y.boardCellLeftSeamless]:0===a,[y.boardCellLeft]:a>0&&a%d==0,[y.boardCellTopSeamless]:0===t,[y.boardCellTop]:t>0&&t%d==0,[y.boardCellPreset]:-1!==s,[y.boardCellAttempt]:s!==p[o],[y.boardCellDuplicated]:!l&&f,[y.boardCellHint]:l,[y.boardCellActivated]:!f&&u,[y.boardCellRelated]:!f&&c,[y.boardCellSame]:!f&&h}),"data-sudoku-hint":l,children:(0,r.jsx)("span",{className:y.boardCellContent,onClick:()=>_.onCellClick(t,a),children:-1===x?"":(x+1).toString(m)})},l?"".concat(a,"-hint-").concat(b):a);i.push(g)}D.push((0,r.jsx)("div",{className:y.boardRow,children:i},t))}return(0,r.jsxs)("div",{className:"".concat(y.container," ").concat(i),children:[(0,r.jsx)("div",{className:y.overlay,children:a},"overlay"),(0,r.jsx)(tS,{SUDOKU_SIZE_SQRT:d}),(0,r.jsx)("div",{className:y.boardWrapper,children:D},"wrapper")]})};tG.propTypes={attempt:u().array.isRequired,className:u().string,overlay:u().node,onCellClick:u().func};let tO=()=>c.useMemo(()=>({container:(0,Q.iv)(ty()),overlay:(0,Q.iv)(t_(),y.X.PENDING,y.X.RUNNING,y.X.PAUSED,y.X.END,tK.finished),boardWrapper:(0,Q.iv)(tT(),y.X.PENDING,y.X.PAUSED,y.X.END),boardRow:(0,Q.iv)(t$()),boardCell:(0,Q.iv)(tN()),boardCellContent:(0,Q.iv)(tC(),tK.hint),boardCellLeftSeamless:(0,Q.iv)(tE()),boardCellLeft:(0,Q.iv)(tI()),boardCellTopSeamless:(0,Q.iv)(tj()),boardCellTop:(0,Q.iv)(tR()),boardCellPreset:(0,Q.iv)(tw()),boardCellHint:(0,Q.iv)(tD()),boardCellAttempt:(0,Q.iv)(tZ()),boardCellDuplicated:(0,Q.iv)(tU()),boardCellActivated:(0,Q.iv)(tP()),boardCellRelated:(0,Q.iv)(tz()),boardCellSame:(0,Q.iv)(tA())}),[]),tK={finished:(0,Q.F4)(tM()),hint:(0,Q.F4)(tX())},tV=()=>{let t=S(),e=v(t=>t.status$),n=v(t=>t.SUDOKU_SIZE_SQRT$),o=v(t=>t.puzzle$),i=v(t=>t.solution$),a=v(t=>t.attempt$),l=v(t=>t.radix$),u=v(t=>t.hintPos$),d=v(t=>t.cheatVisible$),p=$(n),m=c.useRef(null),x=c.useRef(""),[b,g]=c.useState(!1),k={closeCheat:(0,h.$0)(()=>{t({type:s.TOGGLE_CHEAT_VISIBILITY,payload:!1})}),handleInput:(0,h.$0)(e=>{g(!1),x.current=e;let n=/^\s*$/.test(e)?0:Number.parseInt(e,l);Number.isInteger(n)&&t({type:s.INPUT,payload:n-1})}),handleCellClick:(0,h.$0)((t,e)=>{if(-1===t||-1===e)return;let n=t*p.MATRIX+e;-1===o[n]&&g(!0)})};(0,h.TK)(()=>t({type:s.PAUSE}),[t]),(0,z.Z)(n>=2&&n<=7,"`childMatrixSize` must be an integer in the range [2, 7].");let y=n*n;return(0,r.jsxs)("div",{ref:m,className:tQ.sudoku,"data-sudoku-status":e,"data-sudoku-size":"".concat(y,"x").concat(y),children:[(0,r.jsxs)("div",{className:tQ.sudokuWrapper,children:[(0,r.jsx)(te,{}),(0,r.jsx)(tm,{containerRef:m}),(0,r.jsx)("div",{className:tQ.sudokuMain,children:(0,r.jsxs)("div",{className:tQ.sudokuMainWrapper,children:[(0,r.jsx)(tG,{className:tQ.sudokuBoardPuzzle,attempt:a,hintPos:u,overlay:(0,r.jsx)(L,{}),onCellClick:k.handleCellClick}),(0,r.jsx)(A.Z,{open:d,container:m.current,keepMounted:!0,disableAutoFocus:!0,BackdropProps:{timeout:500},closeAfterTransition:!0,onClose:k.closeCheat,children:(0,r.jsxs)("div",{className:tQ.sudokuSolution,onClick:k.closeCheat,children:[(0,r.jsx)("span",{className:tQ.sudokuSolutionClose,children:"\xd7"}),(0,r.jsx)("div",{onClick:f.UW,children:(0,r.jsx)(tG,{attempt:i,hintPos:-1})})]})})]})})]}),(0,r.jsx)(V,{radix:l,container:m.current,initialValue:x.current,visible:b,label:"A ".concat(10===l?"decimal":"hexadecimal"," number"),onCancel:()=>g(!1),onConfirm:k.handleInput})]})},tQ=(0,f.ZC)({sudoku:{display:"block",transform:"scale(1)",caretColor:"transparent",background:"transparent","--sudoku__font-size":"18px",'&[data-sudoku-size="4x4"]':{"--sudoku__font-size":"24px"}},sudokuSolution:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",height:"100%",width:"100%",background:"#eddede"},sudokuSolutionClose:{position:"absolute",top:"0",right:"0",bottom:"unset",left:"unset",display:"inline-block",height:"48px",width:"48px",lineHeight:"48px",fontSize:"32px",textAlign:"center",verticalAlign:"center",color:"#333",cursor:"pointer"},sudokuWrapper:{display:"block",maxWidth:"90vw",margin:"auto"},sudokuMain:{display:"flex",justifyContent:"center",padding:"1rem",margin:"0"},sudokuMainWrapper:{display:"block",overflow:"auto",fontSize:"16px"},sudokuBoardPuzzle:{['[data-sudoku-status="'.concat(y.X.PENDING,'"] &&')]:{"--sudoku__board-border-thickness-color":"transparent","--sudoku__board-border-thickness-plus-color":"transparent"},["'[data-sudoku-status=\"".concat(y.X.PAUSED,"\"] &&'")]:{"--sudoku__board-border-thickness-color":"transparent","--sudoku__board-border-thickness-plus-color":"transparent"},["'[data-sudoku-status=\"".concat(y.X.END,"\"] &&'")]:{"--sudoku__board-border-thickness-color":"transparent","--sudoku__board-border-thickness-plus-color":"transparent"}}}),tW=t=>(0,r.jsx)(U,{storageKey:t.storageKey,initialData:t.initialData,children:(0,r.jsx)(tV,{})});tW.propTypes={storageKey:u().string,initialData:u().any};var tH=tW}}]);