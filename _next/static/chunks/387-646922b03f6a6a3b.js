"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[387],{9171:function(e,t,n){n.d(t,{D:function(){return l}});var r=n(4844),s=n(95050),o=n(67294);let i=[["#ffbe0b","#fb5607","#ff006e","#8338ec","#3a86ff"],["#9b5de5","#f15bb5","#fee440","#00bbf9","#00f5d4"]],a=()=>{let e=i.length;return i[Math.min(e-1,Math.floor(Math.random()*e))]},l=()=>{let e=o.useRef(!1),t=o.useRef(null);o.useEffect(()=>(t.current=new s.Z,()=>{t.current=null}),[]);let n=(0,r.$0)(async()=>{if(null==t.current)return;let n=t.current,r=a(),s=window.screen.width<=900;e.current=!0;try{await n.addConfetti({confettiColors:r,confettiRadius:s?4:8,confettiNumber:s?100:300})}finally{e.current=!1}});return n}},4844:function(e,t,n){n.d(t,{NY:function(){return o},$0:function(){return i},rc:function(){return a},nu:function(){return l}});var r=n(67294),s=n(26692);function o(e,t){let n=r.useRef(0),o=r.useRef(t);return(0,s.Z)(o.current,t)||(n.current+=1),o.current=t,r.useMemo(e,[n.current])}function i(e){let t=r.useRef(e);return r.useLayoutEffect(()=>{t.current=e}),r.useCallback(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];let s=t.current;return s(...n)},[])}function a(e){let t=r.useRef(e);return r.useEffect(()=>{t.current=e},[e]),t.current}function l(e){let[t,n]=r.useState(e);return r.useEffect(()=>n(e),[e]),[t,n]}},34781:function(e,t,n){n.d(t,{p:function(){return a},X:function(){return s}}),(r=s||(s={}))[r.PENDING=1]="PENDING",r[r.RUNNING=2]="RUNNING",r[r.PAUSED=4]="PAUSED",r[r.END=8]="END";var r,s,o=n(95252),i=n(10075);class a extends o.jz{constructor(e){super();let t=new o.ZM(e.status),n=new o.ZM(e.elapsedTime),r=Date.now(),a=(e,t)=>{let o=Date.now();if(t===s.RUNNING){let e=o-r;n.setState(t=>t+e)}else e===s.PENDING&&n.setState(0);r=o};t.subscribe({next:(e,t)=>{a(e,t)},error:()=>{},complete:()=>{}});let l=(0,i.iP)(()=>{let e=t.getSnapshot();a(e,e)});this.status$=t,this.elapsedTime$=n,this._disposables.push(new o.JT(l))}}},31387:function(e,t,n){n.d(t,{vk:function(){return D},oh:function(){return i},tR:function(){return eO},aK:function(){return eH},ZP:function(){return eL},vD:function(){return b},eK:function(){return S}});var r,s,o,i,a=n(85893),l=n(45697),u=n.n(l),c=n(67294),d=n(26692),h=n(31819),f=n(45684),p=n(13339);let m="2023-06-06";(r=o||(o={})).ERASE="ERASE",r.HINT="HINT",r.WRITE="WRITE",(s=i||(i={})).RESTART="RESTART",s.RESET="RESET",s.START="START",s.PAUSE="PAUSE",s.RESUME="RESUME",s.ACTIVE="ACTIVE",s.HINT="HINT",s.TOGGLE_CHEAT_VISIBILITY="TOGGLE_CHEAT_VISIBILITY",s.INPUT="INPUT";let x=c.createContext(null);x.displayName="SudokuContextType";let b=()=>{let e=c.useContext(x);return e.dispatch},S=e=>{let t=c.useContext(x),n=e(t);return(0,h.vc)(n)};var g=n(43118),v=n(34781);let k={},_={},y=e=>{let t=_[e];return void 0===t&&(t=new g.$X(e),_[e]=t),t},T=e=>{let t=k[e];return void 0===t&&(t=new g.wY({childMatrixWidth:e}),k[e]=t),t};function $(e,t,n){let{BOARD:r}=e;for(let e=0;e<r;++e)if(t[e]!==n[e])return!1;return!0}function N(e,t){if(t<0)return{r:-1,c:-1};let{MATRIX:n}=e;return{r:Math.floor(t/n),c:t%n}}let E=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C,{SUDOKU_SIZE_SQRT:r=n.SUDOKU_SIZE_SQRT,difficulty:s=n.difficulty,score:i=n.score,radix:a=n.radix,activatedPos:l=null!==(t=n.activatedPos)&&void 0!==t?t:-1,gameTick:u=n.gameTick,puzzle:c=n.puzzle,solution:d=n.solution,instructions:h=n.instructions.slice(),elapsedTime:f=n.elapsedTime}=null!=e?e:{},{puzzle:p,solution:m}=null!=c&&null!=d?{puzzle:c,solution:d}:T(r).createSudoku(s/100),x=y(r),b=(0,g.s0)(x);(0,g._g)(p,b,x),function(e,t,n){for(let r of n)switch(r.type){case o.ERASE:{let{r:n,c:s}=r.payload,o=n*e.MATRIX+s;t[o]=-1;break}case o.WRITE:{let{r:n,c:s,v:o}=r.payload,i=n*e.MATRIX+s;t[i]=o}}}(x,b,h);let S=$(x,b,m)?v.X.END:f>0||!$(x,b,p)?v.X.PAUSED:v.X.PENDING;return{status:S,elapsedTime:f,SUDOKU_SIZE_SQRT:r,difficulty:s,radix:a,score:i,attempt:b,instructions:h,puzzle:p,solution:m,activatedPos:l,hintPos:-1,cheatVisible:!1,gameTick:u,attemptTick:0,hintTick:0}},C={status:v.X.PENDING,elapsedTime:0,SUDOKU_SIZE_SQRT:3,difficulty:20,radix:10,score:0,puzzle:null,solution:null,attempt:null,instructions:[],activatedPos:-1,hintPos:-1,cheatVisible:!1,gameTick:0,attemptTick:0,hintTick:0};var I=n(35369);let R=(e,t,n,r)=>{let{BOARD:s}=e;for(let e=0;e<s;++e)if(-1===t[e])return e;for(let e=0;e<s;++e)if(-1===n[e]&&t[e]!==r[e])return e;return -1};class j{constructor(e){var t=this;this.restart=()=>{let e=this.viewmodel,t=e.SUDOKU_SIZE_SQRT$.getSnapshot(),n=e.difficulty$.getSnapshot(),r=T(t),{puzzle:s,solution:o}=r.createSudoku(n),i=(0,g.s0)(r.size);(0,g._g)(s,i,r.size),e.status$.next(v.X.PENDING),e.gameTick$.setState(e=>e+1),e.puzzle$.next(s),e.solution$.next(o),e.attempt$.next(i),e.instructions$.next(I.aV.of()),e.hintPos$.next(-1),e.hintTick$.next(0),e.attemptTick$.next(0)},this.reset=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.viewmodel,{difficulty:r=n.difficulty$.getSnapshot(),SUDOKU_SIZE_SQRT:s=n.SUDOKU_SIZE_SQRT$.getSnapshot(),radix:o=n.radix$.getSnapshot()}=e,i=T(s),{puzzle:a,solution:l}=i.createSudoku(r/100),u=(0,g.s0)(i.size);(0,g._g)(a,u,i.size),n.status$.next(v.X.PENDING),n.SUDOKU_SIZE_SQRT$.next(s),n.difficulty$.next(r),n.radix$.next(o),n.puzzle$.next(a),n.solution$.next(l),n.attempt$.next(u),n.instructions$.next(I.aV.of()),n.hintPos$.next(-1),n.cheatVisible$.next(!1),n.gameTick$.setState(e=>e+1),n.attemptTick$.next(0),n.hintTick$.next(0)},this.start=()=>{let e=this.viewmodel;e.status$.getSnapshot()===v.X.PENDING&&e.status$.next(v.X.RUNNING)},this.pause=()=>{let e=this.viewmodel;e.status$.getSnapshot()===v.X.RUNNING&&e.status$.next(v.X.PAUSED)},this.resume=()=>{let e=this.viewmodel;e.status$.getSnapshot()===v.X.PAUSED&&e.status$.next(v.X.RUNNING)},this._end=()=>{let e=this.viewmodel;if(e.status$.getSnapshot()===v.X.RUNNING){let t=e.SUDOKU_SIZE_SQRT$.getSnapshot(),n=y(t),r=e.attempt$.getSnapshot(),s=e.solution$.getSnapshot();if(!$(n,r,s))return;let o=0,i=e.difficulty$.getSnapshot(),a=e.elapsedTime$.getSnapshot(),l=t**4*1e3;if(a<l){let e=t**4*i/100;o=(l-a)*e/1e3}let u=Math.max(5,Math.round(o));e.status$.next(v.X.END),e.score$.setState(e=>e+u)}},this.activePos=e=>{let{r:t,c:n}=e,r=this.viewmodel,s=y(r.SUDOKU_SIZE_SQRT$.getSnapshot()),o=t*s.MATRIX+n;r.activatedPos$.next(o)},this.hint=()=>{let e=this.viewmodel,t=e.SUDOKU_SIZE_SQRT$.getSnapshot(),n=e.puzzle$.getSnapshot(),r=e.solution$.getSnapshot(),s=e.attempt$.getSnapshot(),i=e.activatedPos$.getSnapshot(),a=y(t),l=-1===i||-1!==n[i]?R(a,s,n,r):i,u=N(a,l);e.hintPos$.next(l),e.hintTick$.setState(e=>e+1),e.instructions$.setState(e=>e.push({type:o.HINT,payload:u,timestamp:new Date().toISOString()}))},this.toggleCheatVisibility=e=>{let t=this.viewmodel;t.cheatVisible$.setState(t=>null!=e?e:!t)},this.input=e=>{let t=this.viewmodel;if(t.status$.getSnapshot()!==v.X.RUNNING)return;let n=t.SUDOKU_SIZE_SQRT$.getSnapshot(),{size:r}=T(n);if(!Number.isInteger(e)||e<-1||e>=r.BOARD)return;let s=t.activatedPos$.getSnapshot();if(-1===s)return;let i=t.puzzle$.getSnapshot();if(-1!==i[s])return;let a=t.attempt$.getSnapshot();if(a[s]===e)return;let l=(0,g.s0)(r);(0,g._g)(a,l,r),l[s]=e;let{r:u,c}=N(r,s);t.attempt$.next(l),t.attemptTick$.setState(e=>e+1),t.hintPos$.setState(e=>s===e?-1:e),t.instructions$.setState(t=>t.push({type:o.WRITE,payload:{r:u,c,v:e},timestamp:new Date().toISOString()}))},this.viewmodel=e.viewmodel,this.viewmodel.attempt$.subscribeStateChange(()=>this._end())}}class w extends v.p{_consume(e){let t=this._controller;switch(e.type){case i.RESTART:t.restart();break;case i.RESET:t.reset(e.payload);break;case i.START:t.start();break;case i.PAUSE:t.pause();break;case i.RESUME:t.resume();break;case i.ACTIVE:t.activePos(e.payload);break;case i.HINT:t.hint();break;case i.TOGGLE_CHEAT_VISIBILITY:t.toggleCheatVisibility(e.payload);break;case i.INPUT:t.input(e.payload);break;default:console.error(this.constructor.name,"Bad action:",e)}}constructor(e){super(e),this.getSnapshot=()=>({status:this.status$.getSnapshot(),elapsedTime:this.elapsedTime$.getSnapshot(),SUDOKU_SIZE_SQRT:this.SUDOKU_SIZE_SQRT$.getSnapshot(),difficulty:this.difficulty$.getSnapshot(),radix:this.radix$.getSnapshot(),score:this.score$.getSnapshot(),puzzle:this.puzzle$.getSnapshot(),solution:this.solution$.getSnapshot(),attempt:this.attempt$.getSnapshot(),instructions:Array.from(this.instructions$.getSnapshot()),activatedPos:this.activatedPos$.getSnapshot(),hintPos:this.hintPos$.getSnapshot(),cheatVisible:this.cheatVisible$.getSnapshot(),gameTick:this.gameTick$.getSnapshot(),attemptTick:this.attemptTick$.getSnapshot(),hintTick:this.hintTick$.getSnapshot()}),this.SUDOKU_SIZE_SQRT$=new h.ZM(e.SUDOKU_SIZE_SQRT),this.difficulty$=new h.ZM(e.difficulty),this.radix$=new h.ZM(e.radix),this.score$=new h.ZM(e.score),this.puzzle$=new h.ZM(e.puzzle),this.solution$=new h.ZM(e.solution),this.attempt$=new h.ZM(e.attempt),this.instructions$=new h.ZM(I.aV.of(...e.instructions)),this.activatedPos$=new h.ZM(e.activatedPos),this.hintPos$=new h.ZM(e.hintPos),this.cheatVisible$=new h.ZM(e.cheatVisible),this.gameTick$=new h.ZM(e.gameTick),this.attemptTick$=new h.ZM(e.attemptTick),this.hintTick$=new h.ZM(e.hintTick);let t=new j({viewmodel:this});this._controller=t}}let D=e=>{let{storageKey:t,LoadingComponent:n=f.gb}=e,[r,s]=c.useState(void 0),o=c.useMemo(()=>t?(0,p.Yu)(t):void 0,[t]),i=c.useRef(e.initialData);return(c.useEffect(()=>{e();async function e(){let e=await i.current;if(o){let t=await o.load();null==t||t.version!==m?s(new w(E(e))):s(new w(E({...t.data,...e})))}else s(new w(E(e)))}},[o]),c.useEffect(()=>{if(r)return()=>{console.log("unmounting sudoku viewmodel."),r.dispose()}},[r]),r)?(0,a.jsxs)(c.Fragment,{children:[(0,a.jsx)(x.Provider,{value:r,children:e.children}),o&&(0,a.jsx)(Z,{viewmodel:r,storage:o})]}):(0,a.jsx)(n,{})},Z=e=>{let{viewmodel:t,storage:n}=e,r=(0,h.L7)(t,["elapsedTime$","SUDOKU_SIZE_SQRT$","difficulty$","radix$","score$","puzzle$","solution$","instructions$","activatedPos$","gameTick$"],e=>({elapsedTime:e.elapsedTime$,SUDOKU_SIZE_SQRT:e.SUDOKU_SIZE_SQRT$,difficulty:e.difficulty$,radix:e.radix$,score:e.score$,puzzle:e.puzzle$,solution:e.solution$,instructions:Array.from(e.instructions$),activatedPos:e.activatedPos$,gameTick:e.gameTick$}),d.X);return c.useEffect(()=>{n.save({version:m,data:r})},[r,n]),(0,a.jsx)(c.Fragment,{})};var U=n(6260),P=n(4844),z=n(10075),A=n(14050),M=n(72908),X=n(78262),G=n(9581),O=n(98271),K=n(31425),V=n(83321);let Q=e=>{let{radix:t,container:n,initialValue:r,visible:s,label:o,onCancel:i,onConfirm:l}=e,[u,d]=c.useState(r);return c.useEffect(()=>d(r),[r,s]),(0,a.jsxs)(X.Z,{container:n,open:s,onClose:i,"aria-labelledby":"sudoku-input-dialog",children:[(0,a.jsx)(G.Z,{children:(0,a.jsx)(O.Z,{autoFocus:!0,margin:"dense",label:o,type:t<=10?"number":"input",fullWidth:!0,value:u,onChange:e=>d(e.target.value),onFocus:e=>e.target.select(),onKeyDown:e=>{"Enter"===e.key&&l(u)}})}),(0,a.jsxs)(K.Z,{children:[(0,a.jsx)(V.Z,{color:"inherit",onClick:i,children:"Cancel"}),(0,a.jsx)(V.Z,{color:"primary",onClick:()=>l(u),children:"Confirm"})]})]})};var B=n(18872),H=n(9171),L=n(41616),W=n(70655),F=n(1849);let Y=c.memo(()=>{let e=b(),t=S(e=>e.status$),n=(0,H.D)(),r=(0,P.rc)(t);c.useEffect(()=>{r!==t&&t===v.X.END&&n()},[r,t,n]);let s=c.useMemo(()=>({start:()=>e({type:i.START}),resume:()=>e({type:i.RESUME}),restart:()=>e({type:i.RESTART})}),[e]);switch(t){case v.X.PENDING:return(0,a.jsx)("div",{className:q.overlay,children:(0,a.jsx)(V.Z,{className:q.button,variant:"contained",color:"primary",startIcon:(0,a.jsx)(W.Z,{}),onClick:s.start,children:"Start"})});case v.X.PAUSED:return(0,a.jsx)("div",{className:q.overlay,children:(0,a.jsx)(V.Z,{className:q.button,variant:"contained",color:"primary",startIcon:(0,a.jsx)(L.Z,{}),onClick:s.resume,children:"Resume"})});case v.X.END:return(0,a.jsx)("div",{className:q.overlay,children:(0,a.jsxs)("div",{className:q.finishedBanner,children:[(0,a.jsx)("p",{children:"You win \uD83C\uDF89\uD83C\uDF89\uD83C\uDF89"}),(0,a.jsx)(V.Z,{className:q.button,variant:"contained",color:"primary",startIcon:(0,a.jsx)(F.Z,{}),onClick:s.restart,children:"New"})]})});default:return null}}),q={overlay:(0,B.iv)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:"100%",userSelect:"none"}),confettiCanvas:(0,B.iv)({position:"absolute",top:0,bottom:0,left:0,right:0,width:"100%",height:"100%"}),button:(0,B.iv)({"&&, &&:hover":{boxShadow:"4px 4px 16px 0px hsl(0deg 0% 0% / 0.75)"}}),finishedBanner:(0,B.iv)({position:"relative",display:"flex",flexDirection:"column",justifyContent:"center",padding:0,margin:0,fontSize:32}),playerName:(0,B.iv)({color:"#e200e2"})};var J=n(45018),ee=n(55819),et=n(45929);let en=()=>{let e=b(),t=S(e=>e.status$),n=S(e=>e.SUDOKU_SIZE_SQRT$),r=S(e=>e.difficulty$),s=S(e=>e.radix$),o=t===v.X.PENDING,l=c.useMemo(()=>({onSizeChange:t=>{e({type:i.RESET,payload:{SUDOKU_SIZE_SQRT:Number(t.target.value)}})},onRadixChange:t=>{e({type:i.RESET,payload:{radix:Number(t.target.value)}})},onDifficultyChange:(t,n)=>{e({type:i.RESET,payload:{difficulty:n}})}}),[e]);return(0,a.jsxs)("div",{className:er.settings,children:[(0,a.jsxs)("div",{className:er.item,children:[(0,a.jsx)("span",{children:"Size:"}),(0,a.jsxs)(J.Z,{variant:"standard",value:n,disabled:!o,onChange:l.onSizeChange,children:[(0,a.jsx)(ee.Z,{value:2,children:"4x4"}),(0,a.jsx)(ee.Z,{value:3,children:"9x9"}),(0,a.jsx)(ee.Z,{value:4,children:"16x16"})]})]}),(0,a.jsxs)("div",{className:er.item,children:[(0,a.jsx)("span",{children:"Radix:"}),(0,a.jsxs)(J.Z,{variant:"standard",value:s,disabled:!o,onChange:l.onRadixChange,children:[(0,a.jsx)(ee.Z,{value:10,children:"Decimal (x10)"}),(0,a.jsx)(ee.Z,{value:16,children:"Hexadecimal (x16)"})]})]}),(0,a.jsxs)("div",{className:(0,B.cx)(er.item,er.difficulty),children:[(0,a.jsx)("span",{children:"Difficulty:"}),(0,a.jsx)(et.ZP,{value:r,disabled:!o,step:1,min:0,max:100,valueLabelDisplay:"auto","aria-labelledby":"sudoku-difficulty",onChange:l.onDifficultyChange})]})]})},er=(0,z.ZC)({settings:{display:"block",maxWidth:"min(90vw, 400px)",margin:"auto"},item:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"flex-start",margin:"1rem 0","& > *":{marginRight:"1rem"}},difficulty:{flexWrap:"nowrap","& > span":{"&:first-child":{flex:"0 0 auto"}}}});var es=n(75303),eo=n(53247),ei=n(22961),ea=n(76997),el=n(93946),eu=n(27484),ec=n.n(eu),ed=n(1646),eh=n.n(ed),ef=n(65464);ec().extend(eh());let ep=c.memo(()=>{let e=S(e=>e.elapsedTime$),t=ec().duration(e).format("HH:mm:ss");return(0,a.jsxs)("div",{className:em.elapsedTime,children:[(0,a.jsx)(ea.Z,{title:"Time used",children:(0,a.jsx)(ef.Z,{})}),"\xa0\xa0",(0,a.jsx)("span",{children:t})]},"elapsed-time")}),em=(0,z.ZC)({elapsedTime:{flex:"0 1 auto",display:"flex",alignItems:"center",fontFamily:"Consolas, 'Source Code Pro', 'Roboto Mono', monospace, sans-serif",color:"#595959",userSelect:"none"}});ec().extend(eh());let ex=e=>{let{containerRef:t}=e,n=b(),r=S(e=>e.status$),s=S(e=>e.score$),[o,l]=c.useState(!1),u=c.useMemo(()=>({showCheat:()=>{n({type:i.TOGGLE_CHEAT_VISIBILITY,payload:!0})},restartGame:()=>{l(!1),n({type:i.RESTART})},pauseGame:()=>{n({type:i.PAUSE})},hint:()=>{n({type:i.HINT})},closeRestartDialog:()=>{l(!1)}}),[n]);return(0,a.jsxs)("div",{className:eb.toolbar,children:[(0,a.jsxs)("div",{className:(0,B.cx)(eb.item,eb.buttons),children:[(0,a.jsx)(V.Z,{variant:"contained",color:"inherit",startIcon:(0,a.jsx)(F.Z,{}),onClick:()=>r===v.X.PENDING||r===v.X.END?u.restartGame():l(!0),children:"New"}),(0,a.jsx)(V.Z,{variant:"contained",color:"inherit",disabled:r!==v.X.RUNNING,startIcon:(0,a.jsx)(es.Z,{}),onClick:u.hint,children:"HINT"}),(0,a.jsx)(V.Z,{variant:"contained",color:"secondary",disabled:r!==v.X.RUNNING,startIcon:(0,a.jsx)(ei.Z,{}),onClick:u.showCheat,children:"Cheat"})]}),(0,a.jsxs)("div",{className:(0,B.cx)(eb.item,eb.state),children:[(0,a.jsx)("div",{className:eb.stateButtons,children:r===v.X.RUNNING&&(0,a.jsx)(ea.Z,{title:"Pause",children:(0,a.jsx)(el.Z,{color:"primary",onClick:u.pauseGame,children:(0,a.jsx)(eo.Z,{})})})},"state-buttons"),(0,a.jsx)(ep,{}),(0,a.jsxs)("div",{className:eb.score,children:["Score: ",s]},"score")]}),(0,a.jsxs)(X.Z,{container:t.current,open:o,onClose:u.closeRestartDialog,"aria-labelledby":"confirm-to-restart",children:[(0,a.jsx)(G.Z,{children:"Are you sure you want to start a new game?"}),(0,a.jsxs)(K.Z,{children:[(0,a.jsx)(V.Z,{color:"inherit",onClick:u.closeRestartDialog,children:"Cancel"}),(0,a.jsx)(V.Z,{color:"primary",onClick:u.restartGame,children:"Confirm"})]})]})]})};ex.propTypes={containerRef:u().any.isRequired};let eb=(0,z.ZC)({toolbar:{display:"block",maxWidth:"min(90vw, 400px)",margin:"auto"},item:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"flex-start",margin:"1rem 0","> *":{marginRight:"1rem"}},buttons:{justifyContent:"space-around","> button":{margin:"0 4px"}},state:{justifyContent:"center",margin:"2rem 0 0",height:"48px"},stateButtons:{flex:"0 1 auto",display:"flex",alignItems:"center",justifyContent:"center",margin:"0",userSelect:"none"},score:{flex:"0 1 auto",color:"green",overflow:"hidden",textOverflow:"ellipsis",fontFamily:"Consolas, 'Source Code Pro', 'Roboto Mono', monospace, sans-serif"}});var eS=n(82729);let eg=e=>{let{SUDOKU_SIZE_SQRT:t}=e,n=t*t,r=[];for(let e=t,s=-1;e<n;e+=t,++s){let t="calc(".concat(e," * var(--sudoku__board-cell-size) + ").concat(e+s,"px)");r.push((0,a.jsx)("div",{className:(0,B.cx)(ek.boarder,ek.horizontalBoarder),style:{top:t}},"h-".concat(e))),r.push((0,a.jsx)("div",{className:(0,B.cx)(ek.boarder,ek.verticalBorder),style:{left:t}},"v-".concat(e)))}return(0,a.jsx)(c.Fragment,{children:r})},ev=c.memo(eg);eg.propTypes={SUDOKU_SIZE_SQRT:u().number.isRequired};let ek=(0,z.ZC)({boarder:{position:"absolute",boxSizing:"content-box",background:"var(--sudoku__board-border-thickness-color)"},horizontalBoarder:{left:"0",right:"0",bottom:"unset",width:"calc(100% + 2px)",height:"var(--sudoku__board-border-thickness)"},verticalBorder:{top:"0",bottom:"0",right:"unset",height:"calc(100% + 2px)",width:"var(--sudoku__board-border-thickness)"}});function e_(e,t){let{BOARD:n,MATRIX:r,BASE_1:s,BASE_3:o}=e,i=Array(n).fill(!1),a=Array(r).fill(0);for(let e=0;e<n;e+=r){a.fill(0);for(let n=e,s=e+r;n<s;++n){let e=t[n];-1!==e&&(a[e]+=1)}for(let n=e,s=e+r;n<s;++n){let e=t[n];-1!==e&&a[e]>1&&(i[n]=!0)}}for(let e=0;e<r;++e){a.fill(0);for(let s=e;s<n;s+=r){let e=t[s];-1!==e&&(a[e]+=1)}for(let s=e;s<n;s+=r){let e=t[s];-1!==e&&a[e]>1&&(i[s]=!0)}}for(let e=0;e<n;e+=o)for(let n=0;n<r;n+=s){a.fill(0);for(let i=e,l=e+o;i<l;i+=r)for(let e=i+n,r=e+s;e<r;++e){let n=t[e];-1!==n&&(a[n]+=1)}for(let l=e,u=e+o;l<u;l+=r)for(let e=l+n,r=e+s;e<r;++e){let n=t[e];-1!==n&&a[n]>1&&(i[e]=!0)}}return i}function ey(){let e=(0,eS._)(["\n        --sudoku__board-bg: #d3d8e2;\n        --sudoku__board-cell-bg: #fff;\n        --sudoku__board-cell-size: 32px;\n        --sudoku__board-cell-font-size: 16px;\n        --sudoku__board-cell-border-thickness: 1px;\n        --sudoku__board-border-thickness: 2px;\n        --sudoku__board-border-thickness-color: #111;\n        --sudoku__board-border-thickness-plus: 3px;\n        --sudoku__board-border-thickness-plus-color: #111;\n        position: relative;\n        box-sizing: content-box;\n        display: inline-block;\n        width: fit-content;\n        padding: 0;\n        border: var(--sudoku__board-border-thickness-plus) solid var(--sudoku__board-border-thickness-plus-color);\n        margin: 0;\n        background-color: var(--sudoku__board-bg);\n        font-family: Consolas, 'Source Code Pro', 'Roboto Mono', monospace, sans-serif;\n        [data-sudoku-size=\"4x4\"] && {\n          --sudoku__board-cell-size: 48px;\n          --sudoku__board-cell-font-size: 20px;\n        }\n      "]);return ey=function(){return e},e}function eT(){let e=(0,eS._)(['\n        z-index: 2;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        display: none;\n        width: 100%;\n        height: 100%;\n        overflow: hidden;\n        background: linear-gradient(\n          45deg,\n          hsl(30deg 20% 90% / 0.2),\n          hsl(210deg 20% 100% / 0.3)\n        );\n        [data-sudoku-status="','"] && {\n          display: block;\n          backdrop-filter: blur(1px);\n        }\n        [data-sudoku-status="','"] && {\n          display: none;\n        }\n        [data-sudoku-status="','"] && {\n          display: block;\n          backdrop-filter: blur(16px);\n        }\n        [data-sudoku-status="','"] && {\n          display: block;\n          backdrop-filter: blur(4px);\n          color: #ff00ff;\n          animation: 1s 0s '," ease-in-out;\n        }\n      "]);return eT=function(){return e},e}function e$(){let e=(0,eS._)(['\n        display: flex;\n        flex-direction: column;\n        font-size: var(--sudoku__board-cell-font-size);\n        [data-sudoku-status="','"] && {\n          border-color: transparent;\n        }\n        [data-sudoku-status="','"] && {\n          border-color: transparent;\n        }\n        [data-sudoku-status="','"] && {\n          border-color: transparent;\n        }\n      ']);return e$=function(){return e},e}function eN(){let e=(0,eS._)(["\n        display: flex;\n      "]);return eN=function(){return e},e}function eE(){let e=(0,eS._)(["\n        flex: 0 0 auto;\n        overflow: hidden;\n        display: inline-block;\n        box-sizing: border-box;\n        width: var(--sudoku__board-cell-size);\n        height: var(--sudoku__board-cell-size);\n        margin: var(--sudoku__board-cell-border-thickness) 0 0 var(--sudoku__board-cell-border-thickness);\n        background-color: var(--sudoku__board-cell-bg);\n        user-select: none;\n        cursor: pointer;\n      "]);return eE=function(){return e},e}function eC(){let e=(0,eS._)(['\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        box-sizing: border-box;\n        height: 100%;\n        width: 100%;\n        padding: 4px;\n        margin: 0;\n        [data-sudoku-hint="true"] && {\n          animation: 0.5s 0s '," linear 1 both normal;\n        }\n      "]);return eC=function(){return e},e}function eI(){let e=(0,eS._)(["\n        && {\n          margin-left: 0;\n        }\n      "]);return eI=function(){return e},e}function eR(){let e=(0,eS._)(["\n        && {\n          margin-left: var(--sudoku__board-border-thickness);\n        }\n      "]);return eR=function(){return e},e}function ej(){let e=(0,eS._)(["\n        && {\n          margin-top: 0;\n        }\n      "]);return ej=function(){return e},e}function ew(){let e=(0,eS._)(["\n        && {\n          margin-top: var(--sudoku__board-border-thickness);\n        }\n      "]);return ew=function(){return e},e}function eD(){let e=(0,eS._)(["\n        && {\n          color: #333;\n        }\n      "]);return eD=function(){return e},e}function eZ(){let e=(0,eS._)(["\n        && {\n          color: #ffa500;\n        }\n      "]);return eZ=function(){return e},e}function eU(){let e=(0,eS._)(["\n        && {\n          color: #0080ff;\n        }\n      "]);return eU=function(){return e},e}function eP(){let e=(0,eS._)(["\n        && {\n          background: #ff6a00;\n        }\n      "]);return eP=function(){return e},e}function ez(){let e=(0,eS._)(["\n        && {\n          background: #6eb2f7;\n        }\n      "]);return ez=function(){return e},e}function eA(){let e=(0,eS._)(["\n        && {\n          background: #e2ebf3;\n        }\n      "]);return eA=function(){return e},e}function eM(){let e=(0,eS._)(["\n        && {\n          background: #bbdefb;\n        }\n      "]);return eM=function(){return e},e}function eX(){let e=(0,eS._)(["\n    0% {\n      transform: translate(0, -100px);\n    }\n    80% {\n      transform: translate(0, 20px);\n    }\n    90% {\n      transform: translate(0, -10px);\n    }\n    95% {\n      transform: translate(0, 2px);\n    }\n    100% {\n      transform: translate(0, 0);\n    }\n  "]);return eX=function(){return e},e}function eG(){let e=(0,eS._)(["\n    0% {\n      transform: scale(1) rotate(0deg);\n    }\n\n    50% {\n      transform: scale(2) rotate(200deg);\n    }\n\n    100% {\n      transform: scale(1.3) rotate(360deg);\n    }\n  "]);return eG=function(){return e},e}let eO=e=>{let t;let{attempt:n,hintPos:r,className:s,overlay:o,onCellClick:l}=e,u=b(),d=S(e=>e.SUDOKU_SIZE_SQRT$),h=S(e=>e.puzzle$),f=S(e=>e.solution$),p=S(e=>e.radix$),m=S(e=>e.activatedPos$),x=S(e=>e.hintTick$),v=c.useMemo(()=>new g.$X(d),[d]),k=eK(),_={onCellClick:(0,P.$0)((e,t)=>{null!=l&&l(e,t),u({type:i.ACTIVE,payload:{r:e,c:t}})})},y=(0,g.iN)(v),{r:T,c:$}=N(v,m),E=y[m],C=-1===m?-1:n[m],{r:I=-1,c:R=-1}=N(v,r),j=-1===r?-1:f[r];{let e=-1!==r&&-1===h[r];if(e){let e=n[r];n[r]=f[r],t=e_(v,n),n[r]=e}else t=e_(v,n)}let w=[];for(let e=0,r=0;e<v.MATRIX;++e){let s=[];for(let o=0;o<v.MATRIX;++o,++r){let i=n[r],l=e===I&&o===R,u=e===T&&o===$,c=!u&&(e===T||o===$||y[r]===E),f=-1!==C&&i===C&&!c&&!u,m=!!t[r],b=l?j:i,S=(0,a.jsx)("span",{className:(0,B.cx)(k.boardCell,{[k.boardCellLeftSeamless]:0===o,[k.boardCellLeft]:o>0&&o%d==0,[k.boardCellTopSeamless]:0===e,[k.boardCellTop]:e>0&&e%d==0,[k.boardCellPreset]:-1!==i,[k.boardCellAttempt]:i!==h[r],[k.boardCellDuplicated]:!l&&m,[k.boardCellHint]:l,[k.boardCellActivated]:!m&&u,[k.boardCellRelated]:!m&&c,[k.boardCellSame]:!m&&f}),"data-sudoku-hint":l,children:(0,a.jsx)("span",{className:k.boardCellContent,onClick:()=>_.onCellClick(e,o),children:-1===b?"":(b+1).toString(p)})},l?"".concat(o,"-hint-").concat(x):o);s.push(S)}w.push((0,a.jsx)("div",{className:k.boardRow,children:s},e))}return(0,a.jsxs)("div",{className:"".concat(k.container," ").concat(s),children:[(0,a.jsx)("div",{className:k.overlay,children:o},"overlay"),(0,a.jsx)(ev,{SUDOKU_SIZE_SQRT:d}),(0,a.jsx)("div",{className:k.boardWrapper,children:w},"wrapper")]})};eO.propTypes={attempt:u().array.isRequired,className:u().string,overlay:u().node,onCellClick:u().func};let eK=()=>c.useMemo(()=>({container:(0,B.iv)(ey()),overlay:(0,B.iv)(eT(),v.X.PENDING,v.X.RUNNING,v.X.PAUSED,v.X.END,eV.finished),boardWrapper:(0,B.iv)(e$(),v.X.PENDING,v.X.PAUSED,v.X.END),boardRow:(0,B.iv)(eN()),boardCell:(0,B.iv)(eE()),boardCellContent:(0,B.iv)(eC(),eV.hint),boardCellLeftSeamless:(0,B.iv)(eI()),boardCellLeft:(0,B.iv)(eR()),boardCellTopSeamless:(0,B.iv)(ej()),boardCellTop:(0,B.iv)(ew()),boardCellPreset:(0,B.iv)(eD()),boardCellHint:(0,B.iv)(eZ()),boardCellAttempt:(0,B.iv)(eU()),boardCellDuplicated:(0,B.iv)(eP()),boardCellActivated:(0,B.iv)(ez()),boardCellRelated:(0,B.iv)(eA()),boardCellSame:(0,B.iv)(eM())}),[]),eV={finished:(0,B.F4)(eX()),hint:(0,B.F4)(eG())},eQ=()=>{let e=b(),t=S(e=>e.status$),n=S(e=>e.SUDOKU_SIZE_SQRT$),r=S(e=>e.puzzle$),s=S(e=>e.solution$),o=S(e=>e.attempt$),l=S(e=>e.radix$),u=S(e=>e.hintPos$),d=S(e=>e.cheatVisible$),h=y(n),f=c.useRef(null),p=c.useRef(""),[m,x]=c.useState(!1),g={closeCheat:(0,P.$0)(()=>{e({type:i.TOGGLE_CHEAT_VISIBILITY,payload:!1})}),handleInput:(0,P.$0)(t=>{x(!1),p.current=t;let n=/^\s*$/.test(t)?0:Number.parseInt(t,l);Number.isInteger(n)&&e({type:i.INPUT,payload:n-1})}),handleCellClick:(0,P.$0)((e,t)=>{if(-1===e||-1===t)return;let n=e*h.MATRIX+t;-1===r[n]&&x(!0)})};c.useEffect(()=>{let t=()=>e({type:i.PAUSE});return window.addEventListener("beforeunload",t),()=>window.removeEventListener("beforeunload",t)},[e]),(0,U.Z)(n>=2&&n<=7,"`childMatrixSize` must be an integer in the range [2, 7].");let v=n*n;return(0,a.jsxs)("div",{ref:f,className:eB.sudoku,"data-sudoku-status":t,"data-sudoku-size":"".concat(v,"x").concat(v),children:[(0,a.jsxs)("div",{className:eB.sudokuWrapper,children:[(0,a.jsx)(en,{}),(0,a.jsx)(ex,{containerRef:f}),(0,a.jsx)("div",{className:eB.sudokuMain,children:(0,a.jsxs)("div",{className:eB.sudokuMainWrapper,children:[(0,a.jsx)(eO,{className:eB.sudokuBoardPuzzle,attempt:o,hintPos:u,overlay:(0,a.jsx)(Y,{}),onCellClick:g.handleCellClick}),(0,a.jsx)(M.Z,{open:d,container:f.current,keepMounted:!0,disableAutoFocus:!0,BackdropProps:{timeout:500},closeAfterTransition:!0,onClose:g.closeCheat,children:(0,a.jsxs)("div",{className:eB.sudokuSolution,onClick:g.closeCheat,children:[(0,a.jsx)("span",{className:eB.sudokuSolutionClose,children:"\xd7"}),(0,a.jsx)("div",{onClick:A.UW,children:(0,a.jsx)(eO,{attempt:s,hintPos:-1})})]})})]})})]}),(0,a.jsx)(Q,{radix:l,container:f.current,initialValue:p.current,visible:m,label:"A ".concat(10===l?"decimal":"hexadecimal"," number"),onCancel:()=>x(!1),onConfirm:g.handleInput})]})},eB=(0,z.ZC)({sudoku:{display:"block",transform:"scale(1)",caretColor:"transparent",background:"transparent","--sudoku__font-size":"18px",'&[data-sudoku-size="4x4"]':{"--sudoku__font-size":"24px"}},sudokuSolution:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",height:"100%",width:"100%",background:"#eddede"},sudokuSolutionClose:{position:"absolute",top:"0",right:"0",bottom:"unset",left:"unset",display:"inline-block",height:"48px",width:"48px",lineHeight:"48px",fontSize:"32px",textAlign:"center",verticalAlign:"center",color:"#333",cursor:"pointer"},sudokuWrapper:{display:"block",maxWidth:"90vw",margin:"auto"},sudokuMain:{display:"flex",justifyContent:"center",padding:"1rem",margin:"0"},sudokuMainWrapper:{display:"block",overflow:"auto",fontSize:"16px"},sudokuBoardPuzzle:{['[data-sudoku-status="'.concat(v.X.PENDING,'"] &&')]:{"--sudoku__board-border-thickness-color":"transparent","--sudoku__board-border-thickness-plus-color":"transparent"},["'[data-sudoku-status=\"".concat(v.X.PAUSED,"\"] &&'")]:{"--sudoku__board-border-thickness-color":"transparent","--sudoku__board-border-thickness-plus-color":"transparent"},["'[data-sudoku-status=\"".concat(v.X.END,"\"] &&'")]:{"--sudoku__board-border-thickness-color":"transparent","--sudoku__board-border-thickness-plus-color":"transparent"}}}),eH=e=>(0,a.jsx)(D,{storageKey:e.storageKey,initialData:e.initialData,children:(0,a.jsx)(eQ,{})});eH.propTypes={storageKey:u().string,initialData:u().any};var eL=eH},14050:function(e,t,n){n.d(t,{UW:function(){return r},tR:function(){return l},tm:function(){return u},OU:function(){return d},Qj:function(){return f}});let r=e=>{e.stopPropagation()};var s=n(24729),o=n(23279),i=n.n(o),a=n(67294);function l(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",{hash:r}=(0,s.yj)(),[o,l]=a.useState(r);a.useEffect(()=>{if(null==o)return;let e=document.getElementById(o);null!=e&&e.scrollIntoView()},[]);let{onScroll:u,pauseWatchingScroll:c}=a.useMemo(()=>{let r=t-5,s=!1,o=i()(function(){if(s)return;let t=function(e,t){let n=document.getElementsByClassName(e);for(let e=0;e<n.length;++e){let r=n[e];if(r.getBoundingClientRect().top>=t)return r}return n[n.length-1]}(e,r);if(null==t)return;let o=t.getAttribute(n);null!=o&&l(o)},50);return{onScroll:o,pauseWatchingScroll:e=>{s=!0,setTimeout(()=>{s=!1},e)}}},[e,t,n]);return{activatedIdentifier:o,refreshActivatedIdentifier:u,pauseWatchingScroll:c}}function u(){let[e,t]=a.useState(!1);return a.useEffect(()=>{let e=setTimeout(()=>t(!0),800);return()=>clearTimeout(e)},[]),e}var c=n(10075);function d(e,t){let n=a.useRef(0),r=a.useRef(null),s=(0,c.ei)(e,t);return(null===r.current||h(r.current,s,t))&&(n.current+=1),r.current=s,a.useMemo(()=>r.current,[n.current])}let h=(e,t,n)=>{for(let r of n)if(e[r]===t[r])return!0;return!1};function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,[n,r]=a.useState(0);return a.useEffect(()=>{let n=null===e?document.documentElement:e.current;if(null==n)return;let s=i()(()=>{let e=n.scrollTop,t=n.scrollHeight-n.clientHeight;r(e/t)},t);s();let o=n===document.documentElement?window:n;return o.addEventListener("scroll",s),()=>o.removeEventListener("scroll",s)},[e,t]),n}}}]);