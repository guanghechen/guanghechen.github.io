"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[51],{15051:function(t,e,i){i.r(e),i.d(e,{SudokuSolverDemo:function(){return d}});var r=i(35944),l=i(43118),n=i(18872),o=i(94101),s=i(45697),u=i.n(s),h=i(67294),a=i(26692);let f=new l.M({childMatrixWidth:3}),{size:c}=f;class d extends h.Component{shouldComponentUpdate(t,e){let i=this.props,r=this.state;return r.previewHeight!==e.previewHeight||r.puzzleText!==e.puzzleText||r.solutionText!==e.solutionText||!(0,a.Z)(i.puzzle,t.puzzle)||!(0,a.Z)(i.solution,t.solution)}render(){let{previewRef:t,onPuzzleTextChange:e}=this,{previewHeight:i,puzzleText:l,solutionText:n}=this.state;return(0,r.BX)("div",{className:p.container,children:[(0,r.tZ)("textarea",{className:p.editor,style:{height:void 0===i?void 0:i+2},value:l,onChange:e}),(0,r.tZ)("pre",{ref:t,className:p.preview,children:(0,r.tZ)("code",{children:n})})]})}componentDidMount(){let t=this.previewRef.current;if(t){let{height:e}=t.getBoundingClientRect();this.setState({previewHeight:e})}}componentDidUpdate(t){let e=this.previewRef.current;if(e){let{height:t}=e.getBoundingClientRect();this.setState({previewHeight:t})}t.puzzle!==this.props.puzzle&&this.setState({puzzleText:this.stringifyPuzzle(c,this.props.puzzle)}),t.solution!==this.props.solution&&this.setState({solutionText:this.stringifyPuzzle(c,this.props.solution)})}stringifyPuzzle(t,e){let i=(0,l.OA)(e,t);return i.map(t=>t.map(t=>String(t).padStart(2)).join(" ")).join("\n")}parsePuzzle(t,e){let i=t.split(/\s*\n\s*/g).filter(t=>t.length>0).map(t=>t.split(/\s*[,\s]\s*/g).filter(t=>t.length>0).map(t=>Number(t))).flat();return this.checkPuzzle(i,e)?i:null}checkPuzzle(t,e){if(t.length!==e.BOARD)return!1;for(let i of t)if(!Number.isInteger(i)||i<-1||i>=e.MATRIX)return!1;return!0}constructor(t){super(t),this.onPuzzleTextChange=t=>{let e=t.target.value;this.setState({puzzleText:e});let i=this.parsePuzzle(e,c);null!==i&&f.solve(i,null)&&this.props.onPuzzleChange(i)},this.state={previewHeight:void 0,puzzleText:this.stringifyPuzzle(c,t.puzzle),solutionText:this.stringifyPuzzle(c,t.solution)},this.previewRef={current:null}}}d.displayName="SudokuSolverDemo",d.propTypes={puzzle:u().array.isRequired,solution:u().array.isRequired,onPuzzleChange:u().func.isRequired};let p={container:(0,n.iv)({display:"flex",width:"100%",lineHeight:"28px",fontFamily:"Consolas, 'Source Code Pro', 'Roboto Mono', monospace, sans-serif",fontSize:"16px",["@media screen and ".concat(o.u3.smMinus)]:{flexDirection:"column"}}),editor:(0,n.iv)({flex:"1 1 0",boxSizing:"border-box",overflow:"auto",padding:"14px",border:"none",outline:"none",lineHeight:"inherit",fontFamily:"inherit",fontSize:"inherit",resize:"none",transition:"all 0.30s ease-in-out","&:focus":{boxShadow:"0 0 5px rgb(81, 203, 238)",border:"1px solid rgb(81, 203, 238)"},["@media screen and ".concat(o.u3.smMinus)]:{flex:"0 0 auto"}}),preview:(0,n.iv)({flex:"1 1 0",boxSizing:"border-box",overflow:"auto",padding:"14px",margin:"0",color:"#083ca6",background:"#f6f6f6",lineHeight:"inherit",fontFamily:"inherit",fontSize:"inherit","> code":{lineHeight:"inherit",fontFamily:"inherit",fontSize:"inherit"},["@media screen and ".concat(o.u3.smMinus)]:{flex:"0 0 auto"}})}},66420:function(t,e,i){function r(t){let e=Math.random()*t>>0;return e===t?t-1:e}function l(t,e=0,i=t.length){if(e<0&&(e=0),i>t.length&&(i=t.length),e+1>=i)return;let l=i-e;for(let n=l-1,o=i-1;n>0;--n,--o){let i=r(n)+e,l=t[i];t[i]=t[o],t[o]=l}}i.d(e,{Er:function(){return l},Iy:function(){return r},ZP:function(){return l}})},43118:function(t,e,i){i.d(e,{wY:function(){return c},$X:function(){return n},M:function(){return f},_g:function(){return u},iN:function(){return a},s0:function(){return o},OA:function(){return h}});var r=i(66420);class l{_count;_row;_col;_L;_R;_U;_D;_sz;constructor(t){let{MAX_N:e}=t;this._count=Array(e),this._row=Array(e),this._col=Array(e),this._L=Array(e),this._R=Array(e),this._U=Array(e),this._D=Array(e),this._sz=0}destroy(){this._sz=0,this._count.length=0,this._row.length=0,this._col.length=0,this._L.length=0,this._R.length=0,this._U.length=0,this._D.length=0}init(t){let{_L:e,_R:i,_U:r,_D:l,_count:n}=this,o=t+1;for(let t=0;t<o;++t)e[t]=t-1,i[t]=t+1,r[t]=t,l[t]=t;i[t]=0,e[0]=t,n.fill(0,0,o),this._sz=o}addRow(t,e){let{_count:i,_row:r,_col:l,_L:n,_R:o,_U:s,_D:u}=this,{_sz:h}=this,a=h;for(let a=0;a<e.length;++a,++h){let f=e[a];r[h]=t,l[h]=f,i[f]+=1,n[h]=h-1,o[h]=h+1,u[h]=f,u[s[f]]=h,s[h]=s[f],s[f]=h}o[h-1]=a,n[a]=h-1,this._sz=h}solve(){if(0===this._sz)return null;let t=[];return this._algorithmX(0,t)?t:null}_algorithmX(t,e){let{_count:i,_row:r,_col:l,_L:n,_R:o,_D:s}=this;if(0===o[0])return e.length=t,!0;let u=o[0];for(let t=o[0];0!==t;t=o[t])i[t]<i[u]&&(u=t);this._removeColumn(u);for(let i=s[u];i!==u;i=s[i]){e[t]=r[i];for(let t=o[i];t!==i;t=o[t])this._removeColumn(l[t]);if(this._algorithmX(t+1,e))return!0;for(let t=n[i];t!==i;t=n[t])this._restoreColumn(l[t])}return this._restoreColumn(u),!1}_removeColumn(t){let{_count:e,_col:i,_L:r,_R:l,_U:n,_D:o}=this;r[l[t]]=r[t],l[r[t]]=l[t];for(let r=o[t];r!==t;r=o[r])for(let t=l[r];t!==r;t=l[t])n[o[t]]=n[t],o[n[t]]=o[t],e[i[t]]-=1}_restoreColumn(t){let{_count:e,_col:i,_L:r,_R:l,_U:n,_D:o}=this;for(let l=n[t];l!==t;l=n[l])for(let t=r[l];t!==l;t=r[t])e[i[t]]+=1,n[o[t]]=t,o[n[t]]=t;r[l[t]]=t,l[r[t]]=t}}class n{BASE_1;BASE_2;BASE_3;BASE_4;MATRIX_RANK;MATRIX;BOARD;constructor(t){let e=t*t,i=e*t;this.MATRIX_RANK=this.BASE_1=t,this.MATRIX=this.BASE_2=e,this.BASE_3=i,this.BOARD=this.BASE_4=i*t}}let o=t=>Array(t.BOARD),s=(t,e,i)=>{t.fill(e,0,i.BOARD)},u=(t,e,i)=>{let{BOARD:r}=i;for(let i=0;i<r;++i)e[i]=t[i]},h=(t,e)=>{let i=[],{MATRIX:r}=e;for(let e=0,l=0;e<r;++e){let n=[];i[e]=n;for(let e=0;e<r;++e,++l)n[e]=t[l]}return i};function a(t){let{BASE_1:e,BASE_3:i,MATRIX:r,BOARD:l}=t,n=Array(l);for(let t=0,o=0;t<l;t+=i)for(let l=t,s=t+i;l<s;l+=r)for(let i=0;i<r;i+=e){let r=o+e;n.fill(t+i,o,r),o=r}return n}class f{size;DL_TOTAL_COLUMNS;dlx;matCodeMap;constraints=[,,,,];constructor(t){let{childMatrixWidth:e}=t,i=new n(e),r=4*i.BOARD,o=i.BOARD*i.MATRIX,s=r*o+i.MATRIX+1,u=new l({MAX_N:s});this.size=i,this.DL_TOTAL_COLUMNS=r,this.dlx=u,this.matCodeMap=function(t){let{BASE_1:e,BASE_3:i,MATRIX:r,BOARD:l}=t,n=Array(l);for(let t=0,o=0;t<l;t+=i,o+=e)for(let l=t,s=t+i;l<s;l+=r)for(let t=l,i=l+r,s=o;t<i;t+=e)n.fill(s++,t,t+e);return n}(i)}solve(t,e){let{size:i,DL_TOTAL_COLUMNS:r,constraints:l,matCodeMap:n,dlx:o}=this,{MATRIX:s,BOARD:u}=i,h=(t,e)=>t*u+e+1;o.init(r);for(let e=0,i=0;e<s;++e)for(let r=0;r<s;++r,++i){let u=t[i],a=n[i],f=-1===u?0:u,c=-1===u?s:u+1;for(let t=f;t<c;++t){l[0]=h(0,i),l[1]=h(1,e*s+t),l[2]=h(2,r*s+t),l[3]=h(3,a*s+t);let n=i*s+t+1;o.addRow(n,l)}}let a=o.solve();if(null===a)return!1;if(null!==e)for(let t of a){let i=t-1,r=i%s,l=i/s>>0;e[l]=r}return!0}}class c{size;solver;matCoordinateMap;gridCodes;candidates;availableNums;tmpBoard;difficulty;constructor(t){let{childMatrixWidth:e,difficulty:i=.2}=t,r=new n(e),l=new f({childMatrixWidth:e}),s=Array(r.BOARD);for(let t=0;t<r.BOARD;++t)s[t]=t;this.size=r,this.solver=l,this.matCoordinateMap=a(r),this.gridCodes=s,this.difficulty=this._resolveDifficulty(i),this.candidates=Array(r.MATRIX),this.availableNums=Array(r.MATRIX),this.tmpBoard=o(r)}createSudoku(t){null!=t&&(this.difficulty=this._resolveDifficulty(t));let e=this._createSolution(),i=this._createPuzzle(e);return{puzzle:i,solution:e}}_createSolution(){let{size:t,candidates:e,gridCodes:i,solver:l,tmpBoard:n}=this;s(n,-1,t),(0,r.Er)(i);let u=Math.round((.3*Math.random()+.2)*t.BOARD),h=Math.max(t.BASE_3,Math.min(t.BOARD,u));for(let t=0;t<h;++t){let l=i[t],o=this._collectCandidates(n,l);if(o<1)continue;let s=(0,r.Iy)(o),u=e[s];n[l]=u}let a=o(t);for(let t=0;t<h;++t){let e=i[t];if(-1!==e){if(l.solve(n,a))return a;n[e]=-1}}throw Error("[createSolution] This is impossible!")}_createPuzzle(t){let{size:e,candidates:i,gridCodes:l,solver:n,difficulty:s}=this,h=o(e);u(t,h,e),(0,r.Er)(l);let a=Math.floor(e.BOARD*s);for(let e=0;e<a;++e){let r=l[e],o=this._collectCandidates(h,r),s=0;for(;s<o&&(h[r]=i[s],!n.solve(h,null));++s);h[r]=s<o?t[r]:-1}return h}_collectCandidates(t,e){let{size:i,matCoordinateMap:r,candidates:l,availableNums:n}=this,{MATRIX_RANK:o,MATRIX:s,BOARD:u}=i,h=e%s,a=e-h,f=r[e];n.fill(!0);for(let e=a,i=a+s;e<i;++e){let i=t[e];-1!==i&&(n[i]=!1)}for(let e=h;e<u;e+=s){let i=t[e];-1!==i&&(n[i]=!1)}for(let e=f,i=0;i<o;++i,e+=s)for(let i=e,r=e+o;i<r;++i){let e=t[i];-1!==e&&(n[e]=!1)}let c=0;for(let t=0;t<s;++t)n[t]&&(l[c++]=t);return c}_resolveDifficulty(t){return .8*Math.max(0,Math.min(1,t))+.2}}}}]);