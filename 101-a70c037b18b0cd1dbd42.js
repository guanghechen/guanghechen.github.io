"use strict";(self.webpackChunk_guanghechen_blog=self.webpackChunk_guanghechen_blog||[]).push([[101],{97101:function(t,n,r){r.r(n),r.d(n,{SudokuCreator:function(){return o.wY},SudokuSolver:function(){return o.M},checkPuzzle:function(){return e},createSudokuBoardData:function(){return o.s0}});var o=r(66201);function e(t,n){if(t.length!==n.BOARD)return!1;for(const r of t)if(!Number.isInteger(r)||r<-1||r>=n.MATRIX)return!1;return!0}},66420:function(t,n,r){function o(t){const n=Math.random()*t>>0;return n===t?t-1:n}function e(t,n=0,r=t.length){if(n<0&&(n=0),r>t.length&&(r=t.length),n+1>=r)return;for(let e=r-n-1,s=r-1;e>0;--e,--s){const r=o(e)+n,i=t[r];t[r]=t[s],t[s]=i}}r.d(n,{Er:function(){return e},Iy:function(){return o},ZP:function(){return e}})},66201:function(t,n,r){r.d(n,{wY:function(){return h},$X:function(){return s},M:function(){return _},_g:function(){return l},iN:function(){return u},s0:function(){return i},OA:function(){return c}});var o=r(66420);class e{_count;_row;_col;_L;_R;_U;_D;_sz;constructor(t){const{MAX_N:n}=t;this._count=new Array(n),this._row=new Array(n),this._col=new Array(n),this._L=new Array(n),this._R=new Array(n),this._U=new Array(n),this._D=new Array(n),this._sz=0}destroy(){this._sz=0,this._count.length=0,this._row.length=0,this._col.length=0,this._L.length=0,this._R.length=0,this._U.length=0,this._D.length=0}init(t){const{_L:n,_R:r,_U:o,_D:e,_count:s}=this,i=t+1;for(let l=0;l<i;++l)n[l]=l-1,r[l]=l+1,o[l]=l,e[l]=l;r[t]=0,n[0]=t,s.fill(0,0,i),this._sz=i}addRow(t,n){const{_count:r,_row:o,_col:e,_L:s,_R:i,_U:l,_D:c}=this;let{_sz:u}=this;const _=u;for(let h=0;h<n.length;++h,++u){const _=n[h];o[u]=t,e[u]=_,r[_]+=1,s[u]=u-1,i[u]=u+1,c[u]=_,c[l[_]]=u,l[u]=l[_],l[_]=u}i[u-1]=_,s[_]=u-1,this._sz=u}solve(){if(0===this._sz)return null;const t=[];return this._algorithmX(0,t)?t:null}_algorithmX(t,n){const{_count:r,_row:o,_col:e,_L:s,_R:i,_D:l}=this;if(0===i[0])return n.length=t,!0;let c=i[0];for(let u=i[0];0!==u;u=i[u])r[u]<r[c]&&(c=u);this._removeColumn(c);for(let u=l[c];u!==c;u=l[u]){n[t]=o[u];for(let t=i[u];t!==u;t=i[t])this._removeColumn(e[t]);if(this._algorithmX(t+1,n))return!0;for(let t=s[u];t!==u;t=s[t])this._restoreColumn(e[t])}return this._restoreColumn(c),!1}_removeColumn(t){const{_count:n,_col:r,_L:o,_R:e,_U:s,_D:i}=this;o[e[t]]=o[t],e[o[t]]=e[t];for(let l=i[t];l!==t;l=i[l])for(let t=e[l];t!==l;t=e[t])s[i[t]]=s[t],i[s[t]]=i[t],n[r[t]]-=1}_restoreColumn(t){const{_count:n,_col:r,_L:o,_R:e,_U:s,_D:i}=this;for(let l=s[t];l!==t;l=s[l])for(let t=o[l];t!==l;t=o[t])n[r[t]]+=1,s[i[t]]=t,i[s[t]]=t;o[e[t]]=t,e[o[t]]=t}}class s{BASE_1;BASE_2;BASE_3;BASE_4;MATRIX_RANK;MATRIX;BOARD;constructor(t){const n=t,r=n*n,o=r*n,e=o*n;this.MATRIX_RANK=this.BASE_1=n,this.MATRIX=this.BASE_2=r,this.BASE_3=o,this.BOARD=this.BASE_4=e}}const i=t=>new Array(t.BOARD),l=(t,n,r)=>{const{BOARD:o}=r;for(let e=0;e<o;++e)n[e]=t[e]},c=(t,n)=>{const r=[],{MATRIX:o}=n;for(let e=0,s=0;e<o;++e){const n=[];r[e]=n;for(let r=0;r<o;++r,++s)n[r]=t[s]}return r};function u(t){const{BASE_1:n,BASE_3:r,MATRIX:o,BOARD:e}=t,s=new Array(e);for(let i=0,l=0;i<e;i+=r)for(let t=i,e=i+r;t<e;t+=o)for(let r=0;r<o;r+=n){const t=l+n;s.fill(i+r,l,t),l=t}return s}class _{size;DL_TOTAL_COLUMNS;dlx;matCodeMap;constraints=new Array(4);constructor(t){const{childMatrixWidth:n}=t,r=new s(n),o=4*r.BOARD,i=o*(r.BOARD*r.MATRIX)+r.MATRIX+1,l=new e({MAX_N:i});this.size=r,this.DL_TOTAL_COLUMNS=o,this.dlx=l,this.matCodeMap=function(t){const{BASE_1:n,BASE_3:r,MATRIX:o,BOARD:e}=t,s=new Array(e);for(let i=0,l=0;i<e;i+=r,l+=n)for(let t=i,e=i+r;t<e;t+=o)for(let r=t,i=t+o,c=l;r<i;r+=n)s.fill(c++,r,r+n);return s}(r)}solve(t,n){const{size:r,DL_TOTAL_COLUMNS:o,constraints:e,matCodeMap:s,dlx:i}=this,{MATRIX:l,BOARD:c}=r,u=(t,n)=>t*c+n+1;i.init(o);for(let h=0,a=0;h<l;++h)for(let n=0;n<l;++n,++a){const r=t[a],o=s[a],c=-1===r?l:r+1;for(let t=-1===r?0:r;t<c;++t){e[0]=u(0,a),e[1]=u(1,h*l+t),e[2]=u(2,n*l+t),e[3]=u(3,o*l+t);const r=a*l+t+1;i.addRow(r,e)}}const _=i.solve();if(null===_)return!1;if(null!==n)for(const h of _){const t=h-1,r=t%l;n[t/l>>0]=r}return!0}}class h{size;solver;matCoordinateMap;gridCodes;candidates;availableNums;tmpBoard;difficulty;constructor(t){const{childMatrixWidth:n,difficulty:r=.2}=t,o=new s(n),e=new _({childMatrixWidth:n}),l=new Array(o.BOARD);for(let s=0;s<o.BOARD;++s)l[s]=s;this.size=o,this.solver=e,this.matCoordinateMap=u(o),this.gridCodes=l,this.difficulty=this._resolveDifficulty(r),this.candidates=new Array(o.MATRIX),this.availableNums=new Array(o.MATRIX),this.tmpBoard=i(o)}createSudoku(t){null!=t&&(this.difficulty=this._resolveDifficulty(t));const n=this._createSolution();return{puzzle:this._createPuzzle(n),solution:n}}_createSolution(){const{size:t,candidates:n,gridCodes:r,solver:e,tmpBoard:s}=this;((t,n,r)=>{t.fill(n,0,r.BOARD)})(s,-1,t),(0,o.Er)(r);const l=Math.round((.3*Math.random()+.2)*t.BOARD),c=Math.max(t.BASE_3,Math.min(t.BOARD,l));for(let i=0;i<c;++i){const t=r[i],e=this._collectCandidates(s,t);if(e<1)continue;const l=n[(0,o.Iy)(e)];s[t]=l}const u=i(t);for(let o=0;o<c;++o){const t=r[o];if(-1!==t){if(e.solve(s,u))return u;s[t]=-1}}throw new Error("[createSolution] This is impossible!")}_createPuzzle(t){const{size:n,candidates:r,gridCodes:e,solver:s,difficulty:c}=this,u=i(n);l(t,u,n),(0,o.Er)(e);const _=Math.floor(n.BOARD*c);for(let o=0;o<_;++o){const n=e[o],i=this._collectCandidates(u,n);let l=0;for(;l<i&&(u[n]=r[l],!s.solve(u,null));++l);u[n]=l<i?t[n]:-1}return u}_collectCandidates(t,n){const{size:r,matCoordinateMap:o,candidates:e,availableNums:s}=this,{MATRIX_RANK:i,MATRIX:l,BOARD:c}=r,u=n%l,_=n-u,h=o[n];s.fill(!0);for(let f=_,A=_+l;f<A;++f){const n=t[f];-1!==n&&(s[n]=!1)}for(let f=u;f<c;f+=l){const n=t[f];-1!==n&&(s[n]=!1)}for(let f=h,A=0;A<i;++A,f+=l)for(let n=f,r=f+i;n<r;++n){const r=t[n];-1!==r&&(s[r]=!1)}let a=0;for(let f=0;f<l;++f)s[f]&&(e[a++]=f);return a}_resolveDifficulty(t){return.8*Math.max(0,Math.min(1,t))+.2}}}}]);