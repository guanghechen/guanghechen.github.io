(self.webpackChunk_guanghechen_blog=self.webpackChunk_guanghechen_blog||[]).push([[520,981,181,101],{51223:function(t,n,e){var r=e(5112),o=e(70030),i=e(3070).f,s=r("unscopables"),l=Array.prototype;null==l[s]&&i(l,s,{configurable:!0,value:o(null)}),t.exports=function(t){l[s][t]=!0}},60490:function(t,n,e){var r=e(35005);t.exports=r("document","documentElement")},70030:function(t,n,e){var r,o=e(19670),i=e(36048),s=e(80748),l=e(3501),c=e(60490),u=e(80317),a=e(6200),f="prototype",h="script",d=a("IE_PROTO"),_=function(){},A=function(t){return"<"+h+">"+t+"</"+h+">"},m=function(t){t.write(A("")),t.close();var n=t.parentWindow.Object;return t=null,n},p=function(){try{r=new ActiveXObject("htmlfile")}catch(i){}var t,n,e;p="undefined"!=typeof document?document.domain&&r?m(r):(n=u("iframe"),e="java"+h+":",n.style.display="none",c.appendChild(n),n.src=String(e),(t=n.contentWindow.document).open(),t.write(A("document.F=Object")),t.close(),t.F):m(r);for(var o=s.length;o--;)delete p[f][s[o]];return p()};l[d]=!0,t.exports=Object.create||function(t,n){var e;return null!==t?(_[f]=o(t),e=new _,_[f]=null,e[d]=t):e=p(),void 0===n?e:i.f(e,n)}},36048:function(t,n,e){var r=e(19781),o=e(3353),i=e(3070),s=e(19670),l=e(45656),c=e(81956);n.f=r&&!o?Object.defineProperties:function(t,n){s(t);for(var e,r=l(n),o=c(n),u=o.length,a=0;u>a;)i.f(t,e=o[a++],r[e]);return t}},81956:function(t,n,e){var r=e(16324),o=e(80748);t.exports=Object.keys||function(t){return r(t,o)}},33792:function(t,n,e){e(51223)("flat")},40981:function(t,n,e){"use strict";e.r(n),e.d(n,{SimpleTextareaEditor:function(){return i}});var r,o=e(81880);const i=e(10932).Z.textarea(r||(r=(0,o.Z)(["\n    padding: 1rem;\n    border: 1px solid #DDDDDD;\n    outline: none;\n    line-height: inherit;\n    font-size: inherit;\n    resize: none;\n    transition: all 0.30s ease-in-out;\n\n    &:focus {\n      box-shadow: 0 0 5px rgba(81, 203, 238, 1);\n      border: 1px solid rgba(81, 203, 238, 1);\n    }\n  "])))},17181:function(t,n,e){"use strict";e.r(n),e.d(n,{SimpleTexturalPreviewer:function(){return c}});var r,o=e(81880),i=e(10932),s=e(67294);const l=i.Z.div(r||(r=(0,o.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #083ca6;\n  background: #f6f6f6;\n"]))),c=t=>{const{value:n,children:e,...r}=t;return s.createElement(l,r,s.createElement("pre",null,s.createElement("code",null,t.value)))}},97520:function(t,n,e){"use strict";e.r(n),e.d(n,{SudokuSolverComponent:function(){return _}});e(33792);var r,o,i,s=e(81880),l=e(66201),c=e(10932),u=e(40981),a=e(17181),f=e(97101),h=e(67294);const d=new l.M({childMatrixWidth:3}),_=t=>{const{puzzle:n,solution:e,onPuzzleChange:r}=t,{size:o}=d,[i,s]=h.useState((()=>A(o,n))),l=h.useCallback((t=>{const n=t.target.value;s(n);const e=function(t,n){const e=t.split(/\s*\n\s*/g).filter((t=>t.length>0)).map((t=>t.split(/\s*[,\s]\s*/g).filter((t=>t.length>0)).map((t=>Number(t))))).flat();return(0,f.checkPuzzle)(e,n)?e:null}(n,o);null!==e&&d.solve(e,null)&&r(e)}),[o,r]);h.useEffect((()=>s(A(o,n))),[o,n]);const c=h.useMemo((()=>A(o,e)),[o,e]);return h.createElement(m,null,h.createElement(p,{value:i,onChange:l}),h.createElement(v,{value:c}))};function A(t,n){return(0,l.OA)(n,t).map((t=>t.map((t=>String(t).padStart(2))).join(" "))).join("\n")}const m=c.Z.div(r||(r=(0,s.Z)(["\n  display: flex;\n  width: 100%;\n  line-height: 1.5;\n  font-size: 1rem;\n"]))),p=(0,c.Z)(u.SimpleTextareaEditor)(o||(o=(0,s.Z)(["\n  flex: 1 1 0;\n"]))),v=(0,c.Z)(a.SimpleTexturalPreviewer)(i||(i=(0,s.Z)(["\n  flex: 1 1 0;\n  padding: 0.5rem 0;\n"])))},97101:function(t,n,e){"use strict";e.r(n),e.d(n,{SudokuCreator:function(){return r.wY},SudokuSolver:function(){return r.M},checkPuzzle:function(){return o},createSudokuBoardData:function(){return r.s0}});var r=e(66201);function o(t,n){if(t.length!==n.BOARD)return!1;for(const e of t)if(!Number.isInteger(e)||e<-1||e>=n.MATRIX)return!1;return!0}},66420:function(t,n,e){"use strict";function r(t){const n=Math.random()*t>>0;return n===t?t-1:n}function o(t,n=0,e=t.length){if(n<0&&(n=0),e>t.length&&(e=t.length),n+1>=e)return;for(let o=e-n-1,i=e-1;o>0;--o,--i){const e=r(o)+n,s=t[e];t[e]=t[i],t[i]=s}}e.d(n,{Er:function(){return o},Iy:function(){return r},ZP:function(){return o}})},66201:function(t,n,e){"use strict";e.d(n,{wY:function(){return f},$X:function(){return i},M:function(){return a},_g:function(){return l},iN:function(){return u},s0:function(){return s},OA:function(){return c}});var r=e(66420);class o{_count;_row;_col;_L;_R;_U;_D;_sz;constructor(t){const{MAX_N:n}=t;this._count=new Array(n),this._row=new Array(n),this._col=new Array(n),this._L=new Array(n),this._R=new Array(n),this._U=new Array(n),this._D=new Array(n),this._sz=0}destroy(){this._sz=0,this._count.length=0,this._row.length=0,this._col.length=0,this._L.length=0,this._R.length=0,this._U.length=0,this._D.length=0}init(t){const{_L:n,_R:e,_U:r,_D:o,_count:i}=this,s=t+1;for(let l=0;l<s;++l)n[l]=l-1,e[l]=l+1,r[l]=l,o[l]=l;e[t]=0,n[0]=t,i.fill(0,0,s),this._sz=s}addRow(t,n){const{_count:e,_row:r,_col:o,_L:i,_R:s,_U:l,_D:c}=this;let{_sz:u}=this;const a=u;for(let f=0;f<n.length;++f,++u){const a=n[f];r[u]=t,o[u]=a,e[a]+=1,i[u]=u-1,s[u]=u+1,c[u]=a,c[l[a]]=u,l[u]=l[a],l[a]=u}s[u-1]=a,i[a]=u-1,this._sz=u}solve(){if(0===this._sz)return null;const t=[];return this._algorithmX(0,t)?t:null}_algorithmX(t,n){const{_count:e,_row:r,_col:o,_L:i,_R:s,_D:l}=this;if(0===s[0])return n.length=t,!0;let c=s[0];for(let u=s[0];0!==u;u=s[u])e[u]<e[c]&&(c=u);this._removeColumn(c);for(let u=l[c];u!==c;u=l[u]){n[t]=r[u];for(let t=s[u];t!==u;t=s[t])this._removeColumn(o[t]);if(this._algorithmX(t+1,n))return!0;for(let t=i[u];t!==u;t=i[t])this._restoreColumn(o[t])}return this._restoreColumn(c),!1}_removeColumn(t){const{_count:n,_col:e,_L:r,_R:o,_U:i,_D:s}=this;r[o[t]]=r[t],o[r[t]]=o[t];for(let l=s[t];l!==t;l=s[l])for(let t=o[l];t!==l;t=o[t])i[s[t]]=i[t],s[i[t]]=s[t],n[e[t]]-=1}_restoreColumn(t){const{_count:n,_col:e,_L:r,_R:o,_U:i,_D:s}=this;for(let l=i[t];l!==t;l=i[l])for(let t=r[l];t!==l;t=r[t])n[e[t]]+=1,i[s[t]]=t,s[i[t]]=t;r[o[t]]=t,o[r[t]]=t}}class i{BASE_1;BASE_2;BASE_3;BASE_4;MATRIX_RANK;MATRIX;BOARD;constructor(t){const n=t,e=n*n,r=e*n,o=r*n;this.MATRIX_RANK=this.BASE_1=n,this.MATRIX=this.BASE_2=e,this.BASE_3=r,this.BOARD=this.BASE_4=o}}const s=t=>new Array(t.BOARD),l=(t,n,e)=>{const{BOARD:r}=e;for(let o=0;o<r;++o)n[o]=t[o]},c=(t,n)=>{const e=[],{MATRIX:r}=n;for(let o=0,i=0;o<r;++o){const n=[];e[o]=n;for(let e=0;e<r;++e,++i)n[e]=t[i]}return e};function u(t){const{BASE_1:n,BASE_3:e,MATRIX:r,BOARD:o}=t,i=new Array(o);for(let s=0,l=0;s<o;s+=e)for(let t=s,o=s+e;t<o;t+=r)for(let e=0;e<r;e+=n){const t=l+n;i.fill(s+e,l,t),l=t}return i}class a{size;DL_TOTAL_COLUMNS;dlx;matCodeMap;constraints=new Array(4);constructor(t){const{childMatrixWidth:n}=t,e=new i(n),r=4*e.BOARD,s=r*(e.BOARD*e.MATRIX)+e.MATRIX+1,l=new o({MAX_N:s});this.size=e,this.DL_TOTAL_COLUMNS=r,this.dlx=l,this.matCodeMap=function(t){const{BASE_1:n,BASE_3:e,MATRIX:r,BOARD:o}=t,i=new Array(o);for(let s=0,l=0;s<o;s+=e,l+=n)for(let t=s,o=s+e;t<o;t+=r)for(let e=t,s=t+r,c=l;e<s;e+=n)i.fill(c++,e,e+n);return i}(e)}solve(t,n){const{size:e,DL_TOTAL_COLUMNS:r,constraints:o,matCodeMap:i,dlx:s}=this,{MATRIX:l,BOARD:c}=e,u=(t,n)=>t*c+n+1;s.init(r);for(let f=0,h=0;f<l;++f)for(let n=0;n<l;++n,++h){const e=t[h],r=i[h],c=-1===e?l:e+1;for(let t=-1===e?0:e;t<c;++t){o[0]=u(0,h),o[1]=u(1,f*l+t),o[2]=u(2,n*l+t),o[3]=u(3,r*l+t);const e=h*l+t+1;s.addRow(e,o)}}const a=s.solve();if(null===a)return!1;if(null!==n)for(const f of a){const t=f-1,e=t%l;n[t/l>>0]=e}return!0}}class f{size;solver;matCoordinateMap;gridCodes;candidates;availableNums;tmpBoard;difficulty;constructor(t){const{childMatrixWidth:n,difficulty:e=.2}=t,r=new i(n),o=new a({childMatrixWidth:n}),l=new Array(r.BOARD);for(let i=0;i<r.BOARD;++i)l[i]=i;this.size=r,this.solver=o,this.matCoordinateMap=u(r),this.gridCodes=l,this.difficulty=this._resolveDifficulty(e),this.candidates=new Array(r.MATRIX),this.availableNums=new Array(r.MATRIX),this.tmpBoard=s(r)}createSudoku(t){null!=t&&(this.difficulty=this._resolveDifficulty(t));const n=this._createSolution();return{puzzle:this._createPuzzle(n),solution:n}}_createSolution(){const{size:t,candidates:n,gridCodes:e,solver:o,tmpBoard:i}=this;((t,n,e)=>{t.fill(n,0,e.BOARD)})(i,-1,t),(0,r.Er)(e);const l=Math.round((.3*Math.random()+.2)*t.BOARD),c=Math.max(t.BASE_3,Math.min(t.BOARD,l));for(let s=0;s<c;++s){const t=e[s],o=this._collectCandidates(i,t);if(o<1)continue;const l=n[(0,r.Iy)(o)];i[t]=l}const u=s(t);for(let r=0;r<c;++r){const t=e[r];if(-1!==t){if(o.solve(i,u))return u;i[t]=-1}}throw new Error("[createSolution] This is impossible!")}_createPuzzle(t){const{size:n,candidates:e,gridCodes:o,solver:i,difficulty:c}=this,u=s(n);l(t,u,n),(0,r.Er)(o);const a=Math.floor(n.BOARD*c);for(let r=0;r<a;++r){const n=o[r],s=this._collectCandidates(u,n);let l=0;for(;l<s&&(u[n]=e[l],!i.solve(u,null));++l);u[n]=l<s?t[n]:-1}return u}_collectCandidates(t,n){const{size:e,matCoordinateMap:r,candidates:o,availableNums:i}=this,{MATRIX_RANK:s,MATRIX:l,BOARD:c}=e,u=n%l,a=n-u,f=r[n];i.fill(!0);for(let d=a,_=a+l;d<_;++d){const n=t[d];-1!==n&&(i[n]=!1)}for(let d=u;d<c;d+=l){const n=t[d];-1!==n&&(i[n]=!1)}for(let d=f,_=0;_<s;++_,d+=l)for(let n=d,e=d+s;n<e;++n){const e=t[n];-1!==e&&(i[e]=!1)}let h=0;for(let d=0;d<l;++d)i[d]&&(o[h++]=d);return h}_resolveDifficulty(t){return.8*Math.max(0,Math.min(1,t))+.2}}},81880:function(t,n,e){"use strict";function r(t,n){return n||(n=t.slice(0)),t.raw=n,t}e.d(n,{Z:function(){return r}})}}]);